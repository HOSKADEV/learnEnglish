function OE(n,e){for(var t=0;t<e.length;t++){const s=e[t];if(typeof s!="string"&&!Array.isArray(s)){for(const o in s)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(s,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>s[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const c of l.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&s(c)}).observe(document,{childList:!0,subtree:!0});function t(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function s(o){if(o.ep)return;o.ep=!0;const l=t(o);fetch(o.href,l)}})();function E0(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var sf={exports:{}},rl={},of={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wy;function FE(){if(wy)return Me;wy=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),c=Symbol.for("react.context"),h=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),E=Symbol.iterator;function S(F){return F===null||typeof F!="object"?null:(F=E&&F[E]||F["@@iterator"],typeof F=="function"?F:null)}var N={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},U=Object.assign,z={};function k(F,Z,_e){this.props=F,this.context=Z,this.refs=z,this.updater=_e||N}k.prototype.isReactComponent={},k.prototype.setState=function(F,Z){if(typeof F!="object"&&typeof F!="function"&&F!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,F,Z,"setState")},k.prototype.forceUpdate=function(F){this.updater.enqueueForceUpdate(this,F,"forceUpdate")};function H(){}H.prototype=k.prototype;function K(F,Z,_e){this.props=F,this.context=Z,this.refs=z,this.updater=_e||N}var Y=K.prototype=new H;Y.constructor=K,U(Y,k.prototype),Y.isPureReactComponent=!0;var ae=Array.isArray,fe=Object.prototype.hasOwnProperty,he={current:null},P={key:!0,ref:!0,__self:!0,__source:!0};function T(F,Z,_e){var xe,je={},Ve=null,be=null;if(Z!=null)for(xe in Z.ref!==void 0&&(be=Z.ref),Z.key!==void 0&&(Ve=""+Z.key),Z)fe.call(Z,xe)&&!P.hasOwnProperty(xe)&&(je[xe]=Z[xe]);var Oe=arguments.length-2;if(Oe===1)je.children=_e;else if(1<Oe){for(var We=Array(Oe),vt=0;vt<Oe;vt++)We[vt]=arguments[vt+2];je.children=We}if(F&&F.defaultProps)for(xe in Oe=F.defaultProps,Oe)je[xe]===void 0&&(je[xe]=Oe[xe]);return{$$typeof:n,type:F,key:Ve,ref:be,props:je,_owner:he.current}}function b(F,Z){return{$$typeof:n,type:F.type,key:Z,ref:F.ref,props:F.props,_owner:F._owner}}function V(F){return typeof F=="object"&&F!==null&&F.$$typeof===n}function j(F){var Z={"=":"=0",":":"=2"};return"$"+F.replace(/[=:]/g,function(_e){return Z[_e]})}var D=/\/+/g;function C(F,Z){return typeof F=="object"&&F!==null&&F.key!=null?j(""+F.key):Z.toString(36)}function O(F,Z,_e,xe,je){var Ve=typeof F;(Ve==="undefined"||Ve==="boolean")&&(F=null);var be=!1;if(F===null)be=!0;else switch(Ve){case"string":case"number":be=!0;break;case"object":switch(F.$$typeof){case n:case e:be=!0}}if(be)return be=F,je=je(be),F=xe===""?"."+C(be,0):xe,ae(je)?(_e="",F!=null&&(_e=F.replace(D,"$&/")+"/"),O(je,Z,_e,"",function(vt){return vt})):je!=null&&(V(je)&&(je=b(je,_e+(!je.key||be&&be.key===je.key?"":(""+je.key).replace(D,"$&/")+"/")+F)),Z.push(je)),1;if(be=0,xe=xe===""?".":xe+":",ae(F))for(var Oe=0;Oe<F.length;Oe++){Ve=F[Oe];var We=xe+C(Ve,Oe);be+=O(Ve,Z,_e,We,je)}else if(We=S(F),typeof We=="function")for(F=We.call(F),Oe=0;!(Ve=F.next()).done;)Ve=Ve.value,We=xe+C(Ve,Oe++),be+=O(Ve,Z,_e,We,je);else if(Ve==="object")throw Z=String(F),Error("Objects are not valid as a React child (found: "+(Z==="[object Object]"?"object with keys {"+Object.keys(F).join(", ")+"}":Z)+"). If you meant to render a collection of children, use an array instead.");return be}function ie(F,Z,_e){if(F==null)return F;var xe=[],je=0;return O(F,xe,"","",function(Ve){return Z.call(_e,Ve,je++)}),xe}function Te(F){if(F._status===-1){var Z=F._result;Z=Z(),Z.then(function(_e){(F._status===0||F._status===-1)&&(F._status=1,F._result=_e)},function(_e){(F._status===0||F._status===-1)&&(F._status=2,F._result=_e)}),F._status===-1&&(F._status=0,F._result=Z)}if(F._status===1)return F._result.default;throw F._result}var De={current:null},Q={transition:null},we={ReactCurrentDispatcher:De,ReactCurrentBatchConfig:Q,ReactCurrentOwner:he};function le(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:ie,forEach:function(F,Z,_e){ie(F,function(){Z.apply(this,arguments)},_e)},count:function(F){var Z=0;return ie(F,function(){Z++}),Z},toArray:function(F){return ie(F,function(Z){return Z})||[]},only:function(F){if(!V(F))throw Error("React.Children.only expected to receive a single React element child.");return F}},Me.Component=k,Me.Fragment=t,Me.Profiler=o,Me.PureComponent=K,Me.StrictMode=s,Me.Suspense=p,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=we,Me.act=le,Me.cloneElement=function(F,Z,_e){if(F==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+F+".");var xe=U({},F.props),je=F.key,Ve=F.ref,be=F._owner;if(Z!=null){if(Z.ref!==void 0&&(Ve=Z.ref,be=he.current),Z.key!==void 0&&(je=""+Z.key),F.type&&F.type.defaultProps)var Oe=F.type.defaultProps;for(We in Z)fe.call(Z,We)&&!P.hasOwnProperty(We)&&(xe[We]=Z[We]===void 0&&Oe!==void 0?Oe[We]:Z[We])}var We=arguments.length-2;if(We===1)xe.children=_e;else if(1<We){Oe=Array(We);for(var vt=0;vt<We;vt++)Oe[vt]=arguments[vt+2];xe.children=Oe}return{$$typeof:n,type:F.type,key:je,ref:Ve,props:xe,_owner:be}},Me.createContext=function(F){return F={$$typeof:c,_currentValue:F,_currentValue2:F,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},F.Provider={$$typeof:l,_context:F},F.Consumer=F},Me.createElement=T,Me.createFactory=function(F){var Z=T.bind(null,F);return Z.type=F,Z},Me.createRef=function(){return{current:null}},Me.forwardRef=function(F){return{$$typeof:h,render:F}},Me.isValidElement=V,Me.lazy=function(F){return{$$typeof:w,_payload:{_status:-1,_result:F},_init:Te}},Me.memo=function(F,Z){return{$$typeof:y,type:F,compare:Z===void 0?null:Z}},Me.startTransition=function(F){var Z=Q.transition;Q.transition={};try{F()}finally{Q.transition=Z}},Me.unstable_act=le,Me.useCallback=function(F,Z){return De.current.useCallback(F,Z)},Me.useContext=function(F){return De.current.useContext(F)},Me.useDebugValue=function(){},Me.useDeferredValue=function(F){return De.current.useDeferredValue(F)},Me.useEffect=function(F,Z){return De.current.useEffect(F,Z)},Me.useId=function(){return De.current.useId()},Me.useImperativeHandle=function(F,Z,_e){return De.current.useImperativeHandle(F,Z,_e)},Me.useInsertionEffect=function(F,Z){return De.current.useInsertionEffect(F,Z)},Me.useLayoutEffect=function(F,Z){return De.current.useLayoutEffect(F,Z)},Me.useMemo=function(F,Z){return De.current.useMemo(F,Z)},Me.useReducer=function(F,Z,_e){return De.current.useReducer(F,Z,_e)},Me.useRef=function(F){return De.current.useRef(F)},Me.useState=function(F){return De.current.useState(F)},Me.useSyncExternalStore=function(F,Z,_e){return De.current.useSyncExternalStore(F,Z,_e)},Me.useTransition=function(){return De.current.useTransition()},Me.version="18.3.1",Me}var xy;function sp(){return xy||(xy=1,of.exports=FE()),of.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ey;function UE(){if(Ey)return rl;Ey=1;var n=sp(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),s=Object.prototype.hasOwnProperty,o=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(h,p,y){var w,E={},S=null,N=null;y!==void 0&&(S=""+y),p.key!==void 0&&(S=""+p.key),p.ref!==void 0&&(N=p.ref);for(w in p)s.call(p,w)&&!l.hasOwnProperty(w)&&(E[w]=p[w]);if(h&&h.defaultProps)for(w in p=h.defaultProps,p)E[w]===void 0&&(E[w]=p[w]);return{$$typeof:e,type:h,key:S,ref:N,props:E,_owner:o.current}}return rl.Fragment=t,rl.jsx=c,rl.jsxs=c,rl}var Ty;function zE(){return Ty||(Ty=1,sf.exports=UE()),sf.exports}var m=zE(),R=sp();const T0=E0(R),BE=OE({__proto__:null,default:T0},[R]);var cc={},af={exports:{}},on={},lf={exports:{}},uf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Iy;function $E(){return Iy||(Iy=1,(function(n){function e(Q,we){var le=Q.length;Q.push(we);e:for(;0<le;){var F=le-1>>>1,Z=Q[F];if(0<o(Z,we))Q[F]=we,Q[le]=Z,le=F;else break e}}function t(Q){return Q.length===0?null:Q[0]}function s(Q){if(Q.length===0)return null;var we=Q[0],le=Q.pop();if(le!==we){Q[0]=le;e:for(var F=0,Z=Q.length,_e=Z>>>1;F<_e;){var xe=2*(F+1)-1,je=Q[xe],Ve=xe+1,be=Q[Ve];if(0>o(je,le))Ve<Z&&0>o(be,je)?(Q[F]=be,Q[Ve]=le,F=Ve):(Q[F]=je,Q[xe]=le,F=xe);else if(Ve<Z&&0>o(be,le))Q[F]=be,Q[Ve]=le,F=Ve;else break e}}return we}function o(Q,we){var le=Q.sortIndex-we.sortIndex;return le!==0?le:Q.id-we.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var c=Date,h=c.now();n.unstable_now=function(){return c.now()-h}}var p=[],y=[],w=1,E=null,S=3,N=!1,U=!1,z=!1,k=typeof setTimeout=="function"?setTimeout:null,H=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function Y(Q){for(var we=t(y);we!==null;){if(we.callback===null)s(y);else if(we.startTime<=Q)s(y),we.sortIndex=we.expirationTime,e(p,we);else break;we=t(y)}}function ae(Q){if(z=!1,Y(Q),!U)if(t(p)!==null)U=!0,Te(fe);else{var we=t(y);we!==null&&De(ae,we.startTime-Q)}}function fe(Q,we){U=!1,z&&(z=!1,H(T),T=-1),N=!0;var le=S;try{for(Y(we),E=t(p);E!==null&&(!(E.expirationTime>we)||Q&&!j());){var F=E.callback;if(typeof F=="function"){E.callback=null,S=E.priorityLevel;var Z=F(E.expirationTime<=we);we=n.unstable_now(),typeof Z=="function"?E.callback=Z:E===t(p)&&s(p),Y(we)}else s(p);E=t(p)}if(E!==null)var _e=!0;else{var xe=t(y);xe!==null&&De(ae,xe.startTime-we),_e=!1}return _e}finally{E=null,S=le,N=!1}}var he=!1,P=null,T=-1,b=5,V=-1;function j(){return!(n.unstable_now()-V<b)}function D(){if(P!==null){var Q=n.unstable_now();V=Q;var we=!0;try{we=P(!0,Q)}finally{we?C():(he=!1,P=null)}}else he=!1}var C;if(typeof K=="function")C=function(){K(D)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,ie=O.port2;O.port1.onmessage=D,C=function(){ie.postMessage(null)}}else C=function(){k(D,0)};function Te(Q){P=Q,he||(he=!0,C())}function De(Q,we){T=k(function(){Q(n.unstable_now())},we)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){U||N||(U=!0,Te(fe))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):b=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return S},n.unstable_getFirstCallbackNode=function(){return t(p)},n.unstable_next=function(Q){switch(S){case 1:case 2:case 3:var we=3;break;default:we=S}var le=S;S=we;try{return Q()}finally{S=le}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,we){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var le=S;S=Q;try{return we()}finally{S=le}},n.unstable_scheduleCallback=function(Q,we,le){var F=n.unstable_now();switch(typeof le=="object"&&le!==null?(le=le.delay,le=typeof le=="number"&&0<le?F+le:F):le=F,Q){case 1:var Z=-1;break;case 2:Z=250;break;case 5:Z=1073741823;break;case 4:Z=1e4;break;default:Z=5e3}return Z=le+Z,Q={id:w++,callback:we,priorityLevel:Q,startTime:le,expirationTime:Z,sortIndex:-1},le>F?(Q.sortIndex=le,e(y,Q),t(p)===null&&Q===t(y)&&(z?(H(T),T=-1):z=!0,De(ae,le-F))):(Q.sortIndex=Z,e(p,Q),U||N||(U=!0,Te(fe))),Q},n.unstable_shouldYield=j,n.unstable_wrapCallback=function(Q){var we=S;return function(){var le=S;S=we;try{return Q.apply(this,arguments)}finally{S=le}}}})(uf)),uf}var Sy;function HE(){return Sy||(Sy=1,lf.exports=$E()),lf.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var by;function WE(){if(by)return on;by=1;var n=sp(),e=HE();function t(r){for(var i="https://reactjs.org/docs/error-decoder.html?invariant="+r,a=1;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a]);return"Minified React error #"+r+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var s=new Set,o={};function l(r,i){c(r,i),c(r+"Capture",i)}function c(r,i){for(o[r]=i,r=0;r<i.length;r++)s.add(i[r])}var h=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),p=Object.prototype.hasOwnProperty,y=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,w={},E={};function S(r){return p.call(E,r)?!0:p.call(w,r)?!1:y.test(r)?E[r]=!0:(w[r]=!0,!1)}function N(r,i,a,d){if(a!==null&&a.type===0)return!1;switch(typeof i){case"function":case"symbol":return!0;case"boolean":return d?!1:a!==null?!a.acceptsBooleans:(r=r.toLowerCase().slice(0,5),r!=="data-"&&r!=="aria-");default:return!1}}function U(r,i,a,d){if(i===null||typeof i>"u"||N(r,i,a,d))return!0;if(d)return!1;if(a!==null)switch(a.type){case 3:return!i;case 4:return i===!1;case 5:return isNaN(i);case 6:return isNaN(i)||1>i}return!1}function z(r,i,a,d,f,g,x){this.acceptsBooleans=i===2||i===3||i===4,this.attributeName=d,this.attributeNamespace=f,this.mustUseProperty=a,this.propertyName=r,this.type=i,this.sanitizeURL=g,this.removeEmptyString=x}var k={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(r){k[r]=new z(r,0,!1,r,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(r){var i=r[0];k[i]=new z(i,1,!1,r[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(r){k[r]=new z(r,2,!1,r.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(r){k[r]=new z(r,2,!1,r,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(r){k[r]=new z(r,3,!1,r.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(r){k[r]=new z(r,3,!0,r,null,!1,!1)}),["capture","download"].forEach(function(r){k[r]=new z(r,4,!1,r,null,!1,!1)}),["cols","rows","size","span"].forEach(function(r){k[r]=new z(r,6,!1,r,null,!1,!1)}),["rowSpan","start"].forEach(function(r){k[r]=new z(r,5,!1,r.toLowerCase(),null,!1,!1)});var H=/[\-:]([a-z])/g;function K(r){return r[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(r){var i=r.replace(H,K);k[i]=new z(i,1,!1,r,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(r){var i=r.replace(H,K);k[i]=new z(i,1,!1,r,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(r){var i=r.replace(H,K);k[i]=new z(i,1,!1,r,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(r){k[r]=new z(r,1,!1,r.toLowerCase(),null,!1,!1)}),k.xlinkHref=new z("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(r){k[r]=new z(r,1,!1,r.toLowerCase(),null,!0,!0)});function Y(r,i,a,d){var f=k.hasOwnProperty(i)?k[i]:null;(f!==null?f.type!==0:d||!(2<i.length)||i[0]!=="o"&&i[0]!=="O"||i[1]!=="n"&&i[1]!=="N")&&(U(i,a,f,d)&&(a=null),d||f===null?S(i)&&(a===null?r.removeAttribute(i):r.setAttribute(i,""+a)):f.mustUseProperty?r[f.propertyName]=a===null?f.type===3?!1:"":a:(i=f.attributeName,d=f.attributeNamespace,a===null?r.removeAttribute(i):(f=f.type,a=f===3||f===4&&a===!0?"":""+a,d?r.setAttributeNS(d,i,a):r.setAttribute(i,a))))}var ae=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,fe=Symbol.for("react.element"),he=Symbol.for("react.portal"),P=Symbol.for("react.fragment"),T=Symbol.for("react.strict_mode"),b=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),j=Symbol.for("react.context"),D=Symbol.for("react.forward_ref"),C=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),ie=Symbol.for("react.memo"),Te=Symbol.for("react.lazy"),De=Symbol.for("react.offscreen"),Q=Symbol.iterator;function we(r){return r===null||typeof r!="object"?null:(r=Q&&r[Q]||r["@@iterator"],typeof r=="function"?r:null)}var le=Object.assign,F;function Z(r){if(F===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);F=i&&i[1]||""}return`
`+F+r}var _e=!1;function xe(r,i){if(!r||_e)return"";_e=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(i)if(i=function(){throw Error()},Object.defineProperty(i.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(i,[])}catch(q){var d=q}Reflect.construct(r,[],i)}else{try{i.call()}catch(q){d=q}r.call(i.prototype)}else{try{throw Error()}catch(q){d=q}r()}}catch(q){if(q&&d&&typeof q.stack=="string"){for(var f=q.stack.split(`
`),g=d.stack.split(`
`),x=f.length-1,A=g.length-1;1<=x&&0<=A&&f[x]!==g[A];)A--;for(;1<=x&&0<=A;x--,A--)if(f[x]!==g[A]){if(x!==1||A!==1)do if(x--,A--,0>A||f[x]!==g[A]){var L=`
`+f[x].replace(" at new "," at ");return r.displayName&&L.includes("<anonymous>")&&(L=L.replace("<anonymous>",r.displayName)),L}while(1<=x&&0<=A);break}}}finally{_e=!1,Error.prepareStackTrace=a}return(r=r?r.displayName||r.name:"")?Z(r):""}function je(r){switch(r.tag){case 5:return Z(r.type);case 16:return Z("Lazy");case 13:return Z("Suspense");case 19:return Z("SuspenseList");case 0:case 2:case 15:return r=xe(r.type,!1),r;case 11:return r=xe(r.type.render,!1),r;case 1:return r=xe(r.type,!0),r;default:return""}}function Ve(r){if(r==null)return null;if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r;switch(r){case P:return"Fragment";case he:return"Portal";case b:return"Profiler";case T:return"StrictMode";case C:return"Suspense";case O:return"SuspenseList"}if(typeof r=="object")switch(r.$$typeof){case j:return(r.displayName||"Context")+".Consumer";case V:return(r._context.displayName||"Context")+".Provider";case D:var i=r.render;return r=r.displayName,r||(r=i.displayName||i.name||"",r=r!==""?"ForwardRef("+r+")":"ForwardRef"),r;case ie:return i=r.displayName||null,i!==null?i:Ve(r.type)||"Memo";case Te:i=r._payload,r=r._init;try{return Ve(r(i))}catch{}}return null}function be(r){var i=r.type;switch(r.tag){case 24:return"Cache";case 9:return(i.displayName||"Context")+".Consumer";case 10:return(i._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return r=i.render,r=r.displayName||r.name||"",i.displayName||(r!==""?"ForwardRef("+r+")":"ForwardRef");case 7:return"Fragment";case 5:return i;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Ve(i);case 8:return i===T?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i}return null}function Oe(r){switch(typeof r){case"boolean":case"number":case"string":case"undefined":return r;case"object":return r;default:return""}}function We(r){var i=r.type;return(r=r.nodeName)&&r.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function vt(r){var i=We(r)?"checked":"value",a=Object.getOwnPropertyDescriptor(r.constructor.prototype,i),d=""+r[i];if(!r.hasOwnProperty(i)&&typeof a<"u"&&typeof a.get=="function"&&typeof a.set=="function"){var f=a.get,g=a.set;return Object.defineProperty(r,i,{configurable:!0,get:function(){return f.call(this)},set:function(x){d=""+x,g.call(this,x)}}),Object.defineProperty(r,i,{enumerable:a.enumerable}),{getValue:function(){return d},setValue:function(x){d=""+x},stopTracking:function(){r._valueTracker=null,delete r[i]}}}}function Yn(r){r._valueTracker||(r._valueTracker=vt(r))}function Xn(r){if(!r)return!1;var i=r._valueTracker;if(!i)return!0;var a=i.getValue(),d="";return r&&(d=We(r)?r.checked?"true":"false":r.value),r=d,r!==a?(i.setValue(r),!0):!1}function ss(r){if(r=r||(typeof document<"u"?document:void 0),typeof r>"u")return null;try{return r.activeElement||r.body}catch{return r.body}}function qi(r,i){var a=i.checked;return le({},i,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:a??r._wrapperState.initialChecked})}function Ql(r,i){var a=i.defaultValue==null?"":i.defaultValue,d=i.checked!=null?i.checked:i.defaultChecked;a=Oe(i.value!=null?i.value:a),r._wrapperState={initialChecked:d,initialValue:a,controlled:i.type==="checkbox"||i.type==="radio"?i.checked!=null:i.value!=null}}function Gi(r,i){i=i.checked,i!=null&&Y(r,"checked",i,!1)}function si(r,i){Gi(r,i);var a=Oe(i.value),d=i.type;if(a!=null)d==="number"?(a===0&&r.value===""||r.value!=a)&&(r.value=""+a):r.value!==""+a&&(r.value=""+a);else if(d==="submit"||d==="reset"){r.removeAttribute("value");return}i.hasOwnProperty("value")?_t(r,i.type,a):i.hasOwnProperty("defaultValue")&&_t(r,i.type,Oe(i.defaultValue)),i.checked==null&&i.defaultChecked!=null&&(r.defaultChecked=!!i.defaultChecked)}function ca(r,i,a){if(i.hasOwnProperty("value")||i.hasOwnProperty("defaultValue")){var d=i.type;if(!(d!=="submit"&&d!=="reset"||i.value!==void 0&&i.value!==null))return;i=""+r._wrapperState.initialValue,a||i===r.value||(r.value=i),r.defaultValue=i}a=r.name,a!==""&&(r.name=""),r.defaultChecked=!!r._wrapperState.initialChecked,a!==""&&(r.name=a)}function _t(r,i,a){(i!=="number"||ss(r.ownerDocument)!==r)&&(a==null?r.defaultValue=""+r._wrapperState.initialValue:r.defaultValue!==""+a&&(r.defaultValue=""+a))}var pt=Array.isArray;function Dn(r,i,a,d){if(r=r.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<r.length;a++)f=i.hasOwnProperty("$"+r[a].value),r[a].selected!==f&&(r[a].selected=f),f&&d&&(r[a].defaultSelected=!0)}else{for(a=""+Oe(a),i=null,f=0;f<r.length;f++){if(r[f].value===a){r[f].selected=!0,d&&(r[f].defaultSelected=!0);return}i!==null||r[f].disabled||(i=r[f])}i!==null&&(i.selected=!0)}}function da(r,i){if(i.dangerouslySetInnerHTML!=null)throw Error(t(91));return le({},i,{value:void 0,defaultValue:void 0,children:""+r._wrapperState.initialValue})}function ha(r,i){var a=i.value;if(a==null){if(a=i.children,i=i.defaultValue,a!=null){if(i!=null)throw Error(t(92));if(pt(a)){if(1<a.length)throw Error(t(93));a=a[0]}i=a}i==null&&(i=""),a=i}r._wrapperState={initialValue:Oe(a)}}function Yl(r,i){var a=Oe(i.value),d=Oe(i.defaultValue);a!=null&&(a=""+a,a!==r.value&&(r.value=a),i.defaultValue==null&&r.defaultValue!==a&&(r.defaultValue=a)),d!=null&&(r.defaultValue=""+d)}function is(r){var i=r.textContent;i===r._wrapperState.initialValue&&i!==""&&i!==null&&(r.value=i)}function fa(r){switch(r){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ki(r,i){return r==null||r==="http://www.w3.org/1999/xhtml"?fa(i):r==="http://www.w3.org/2000/svg"&&i==="foreignObject"?"http://www.w3.org/1999/xhtml":r}var os,Xl=(function(r){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(i,a,d,f){MSApp.execUnsafeLocalFunction(function(){return r(i,a,d,f)})}:r})(function(r,i){if(r.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in r)r.innerHTML=i;else{for(os=os||document.createElement("div"),os.innerHTML="<svg>"+i.valueOf().toString()+"</svg>",i=os.firstChild;r.firstChild;)r.removeChild(r.firstChild);for(;i.firstChild;)r.appendChild(i.firstChild)}});function ii(r,i){if(i){var a=r.firstChild;if(a&&a===r.lastChild&&a.nodeType===3){a.nodeValue=i;return}}r.textContent=i}var as={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Jl=["Webkit","ms","Moz","O"];Object.keys(as).forEach(function(r){Jl.forEach(function(i){i=i+r.charAt(0).toUpperCase()+r.substring(1),as[i]=as[r]})});function ls(r,i,a){return i==null||typeof i=="boolean"||i===""?"":a||typeof i!="number"||i===0||as.hasOwnProperty(r)&&as[r]?(""+i).trim():i+"px"}function Qi(r,i){r=r.style;for(var a in i)if(i.hasOwnProperty(a)){var d=a.indexOf("--")===0,f=ls(a,i[a],d);a==="float"&&(a="cssFloat"),d?r.setProperty(a,f):r[a]=f}}var pa=le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function jn(r,i){if(i){if(pa[r]&&(i.children!=null||i.dangerouslySetInnerHTML!=null))throw Error(t(137,r));if(i.dangerouslySetInnerHTML!=null){if(i.children!=null)throw Error(t(60));if(typeof i.dangerouslySetInnerHTML!="object"||!("__html"in i.dangerouslySetInnerHTML))throw Error(t(61))}if(i.style!=null&&typeof i.style!="object")throw Error(t(62))}}function Yi(r,i){if(r.indexOf("-")===-1)return typeof i.is=="string";switch(r){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var us=null;function Xi(r){return r=r.target||r.srcElement||window,r.correspondingUseElement&&(r=r.correspondingUseElement),r.nodeType===3?r.parentNode:r}var Ir=null,Sr=null,ct=null;function ma(r){if(r=Ba(r)){if(typeof Ir!="function")throw Error(t(280));var i=r.stateNode;i&&(i=Su(i),Ir(r.stateNode,r.type,i))}}function cs(r){Sr?ct?ct.push(r):ct=[r]:Sr=r}function ds(){if(Sr){var r=Sr,i=ct;if(ct=Sr=null,ma(r),i)for(r=0;r<i.length;r++)ma(i[r])}}function Zl(r,i){return r(i)}function eu(){}var Jn=!1;function tu(r,i,a){if(Jn)return r(i,a);Jn=!0;try{return Zl(r,i,a)}finally{Jn=!1,(Sr!==null||ct!==null)&&(eu(),ds())}}function oi(r,i){var a=r.stateNode;if(a===null)return null;var d=Su(a);if(d===null)return null;a=d[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(d=!d.disabled)||(r=r.type,d=!(r==="button"||r==="input"||r==="select"||r==="textarea")),r=!d;break e;default:r=!1}if(r)return null;if(a&&typeof a!="function")throw Error(t(231,i,typeof a));return a}var hs=!1;if(h)try{var fs={};Object.defineProperty(fs,"passive",{get:function(){hs=!0}}),window.addEventListener("test",fs,fs),window.removeEventListener("test",fs,fs)}catch{hs=!1}function nu(r,i,a,d,f,g,x,A,L){var q=Array.prototype.slice.call(arguments,3);try{i.apply(a,q)}catch(te){this.onError(te)}}var br=!1,Zn=null,Ji=!1,xn=null,ru={onError:function(r){br=!0,Zn=r}};function su(r,i,a,d,f,g,x,A,L){br=!1,Zn=null,nu.apply(ru,arguments)}function ga(r,i,a,d,f,g,x,A,L){if(su.apply(this,arguments),br){if(br){var q=Zn;br=!1,Zn=null}else throw Error(t(198));Ji||(Ji=!0,xn=q)}}function Vn(r){var i=r,a=r;if(r.alternate)for(;i.return;)i=i.return;else{r=i;do i=r,(i.flags&4098)!==0&&(a=i.return),r=i.return;while(r)}return i.tag===3?a:null}function ya(r){if(r.tag===13){var i=r.memoizedState;if(i===null&&(r=r.alternate,r!==null&&(i=r.memoizedState)),i!==null)return i.dehydrated}return null}function iu(r){if(Vn(r)!==r)throw Error(t(188))}function ou(r){var i=r.alternate;if(!i){if(i=Vn(r),i===null)throw Error(t(188));return i!==r?null:r}for(var a=r,d=i;;){var f=a.return;if(f===null)break;var g=f.alternate;if(g===null){if(d=f.return,d!==null){a=d;continue}break}if(f.child===g.child){for(g=f.child;g;){if(g===a)return iu(f),r;if(g===d)return iu(f),i;g=g.sibling}throw Error(t(188))}if(a.return!==d.return)a=f,d=g;else{for(var x=!1,A=f.child;A;){if(A===a){x=!0,a=f,d=g;break}if(A===d){x=!0,d=f,a=g;break}A=A.sibling}if(!x){for(A=g.child;A;){if(A===a){x=!0,a=g,d=f;break}if(A===d){x=!0,d=g,a=f;break}A=A.sibling}if(!x)throw Error(t(189))}}if(a.alternate!==d)throw Error(t(190))}if(a.tag!==3)throw Error(t(188));return a.stateNode.current===a?r:i}function au(r){return r=ou(r),r!==null?ai(r):null}function ai(r){if(r.tag===5||r.tag===6)return r;for(r=r.child;r!==null;){var i=ai(r);if(i!==null)return i;r=r.sibling}return null}var va=e.unstable_scheduleCallback,Zi=e.unstable_cancelCallback,li=e.unstable_shouldYield,kr=e.unstable_requestPaint,et=e.unstable_now,Vd=e.unstable_getCurrentPriorityLevel,eo=e.unstable_ImmediatePriority,_a=e.unstable_UserBlockingPriority,ui=e.unstable_NormalPriority,wa=e.unstable_LowPriority,to=e.unstable_IdlePriority,ci=null,dn=null;function lu(r){if(dn&&typeof dn.onCommitFiberRoot=="function")try{dn.onCommitFiberRoot(ci,r,void 0,(r.current.flags&128)===128)}catch{}}var hn=Math.clz32?Math.clz32:di,er=Math.log,En=Math.LN2;function di(r){return r>>>=0,r===0?32:31-(er(r)/En|0)|0}var tr=64,ps=4194304;function Ge(r){switch(r&-r){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return r&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return r}}function Cr(r,i){var a=r.pendingLanes;if(a===0)return 0;var d=0,f=r.suspendedLanes,g=r.pingedLanes,x=a&268435455;if(x!==0){var A=x&~f;A!==0?d=Ge(A):(g&=x,g!==0&&(d=Ge(g)))}else x=a&~f,x!==0?d=Ge(x):g!==0&&(d=Ge(g));if(d===0)return 0;if(i!==0&&i!==d&&(i&f)===0&&(f=d&-d,g=i&-i,f>=g||f===16&&(g&4194240)!==0))return i;if((d&4)!==0&&(d|=a&16),i=r.entangledLanes,i!==0)for(r=r.entanglements,i&=d;0<i;)a=31-hn(i),f=1<<a,d|=r[a],i&=~f;return d}function hi(r,i){switch(r){case 1:case 2:case 4:return i+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fi(r,i){for(var a=r.suspendedLanes,d=r.pingedLanes,f=r.expirationTimes,g=r.pendingLanes;0<g;){var x=31-hn(g),A=1<<x,L=f[x];L===-1?((A&a)===0||(A&d)!==0)&&(f[x]=hi(A,i)):L<=i&&(r.expiredLanes|=A),g&=~A}}function xa(r){return r=r.pendingLanes&-1073741825,r!==0?r:r&1073741824?1073741824:0}function Ea(){var r=tr;return tr<<=1,(tr&4194240)===0&&(tr=64),r}function Ta(r){for(var i=[],a=0;31>a;a++)i.push(r);return i}function pi(r,i,a){r.pendingLanes|=i,i!==536870912&&(r.suspendedLanes=0,r.pingedLanes=0),r=r.eventTimes,i=31-hn(i),r[i]=a}function Ld(r,i){var a=r.pendingLanes&~i;r.pendingLanes=i,r.suspendedLanes=0,r.pingedLanes=0,r.expiredLanes&=i,r.mutableReadLanes&=i,r.entangledLanes&=i,i=r.entanglements;var d=r.eventTimes;for(r=r.expirationTimes;0<a;){var f=31-hn(a),g=1<<f;i[f]=0,d[f]=-1,r[f]=-1,a&=~g}}function Ia(r,i){var a=r.entangledLanes|=i;for(r=r.entanglements;a;){var d=31-hn(a),f=1<<d;f&i|r[d]&i&&(r[d]|=i),a&=~f}}var Be=0;function nr(r){return r&=-r,1<r?4<r?(r&268435455)!==0?16:536870912:4:1}var Sa,no,ba,ka,Ca,rr=!1,ro=[],sr=null,ir=null,jt=null,mi=new Map,Ar=new Map,fn=[],uu="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ms(r,i){switch(r){case"focusin":case"focusout":sr=null;break;case"dragenter":case"dragleave":ir=null;break;case"mouseover":case"mouseout":jt=null;break;case"pointerover":case"pointerout":mi.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ar.delete(i.pointerId)}}function Ln(r,i,a,d,f,g){return r===null||r.nativeEvent!==g?(r={blockedOn:i,domEventName:a,eventSystemFlags:d,nativeEvent:g,targetContainers:[f]},i!==null&&(i=Ba(i),i!==null&&no(i)),r):(r.eventSystemFlags|=d,i=r.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),r)}function cu(r,i,a,d,f){switch(i){case"focusin":return sr=Ln(sr,r,i,a,d,f),!0;case"dragenter":return ir=Ln(ir,r,i,a,d,f),!0;case"mouseover":return jt=Ln(jt,r,i,a,d,f),!0;case"pointerover":var g=f.pointerId;return mi.set(g,Ln(mi.get(g)||null,r,i,a,d,f)),!0;case"gotpointercapture":return g=f.pointerId,Ar.set(g,Ln(Ar.get(g)||null,r,i,a,d,f)),!0}return!1}function so(r){var i=_i(r.target);if(i!==null){var a=Vn(i);if(a!==null){if(i=a.tag,i===13){if(i=ya(a),i!==null){r.blockedOn=i,Ca(r.priority,function(){ba(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){r.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}r.blockedOn=null}function Xe(r){if(r.blockedOn!==null)return!1;for(var i=r.targetContainers;0<i.length;){var a=io(r.domEventName,r.eventSystemFlags,i[0],r.nativeEvent);if(a===null){a=r.nativeEvent;var d=new a.constructor(a.type,a);us=d,a.target.dispatchEvent(d),us=null}else return i=Ba(a),i!==null&&no(i),r.blockedOn=a,!1;i.shift()}return!0}function du(r,i,a){Xe(r)&&a.delete(i)}function Md(){rr=!1,sr!==null&&Xe(sr)&&(sr=null),ir!==null&&Xe(ir)&&(ir=null),jt!==null&&Xe(jt)&&(jt=null),mi.forEach(du),Ar.forEach(du)}function gs(r,i){r.blockedOn===i&&(r.blockedOn=null,rr||(rr=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Md)))}function ys(r){function i(f){return gs(f,r)}if(0<ro.length){gs(ro[0],r);for(var a=1;a<ro.length;a++){var d=ro[a];d.blockedOn===r&&(d.blockedOn=null)}}for(sr!==null&&gs(sr,r),ir!==null&&gs(ir,r),jt!==null&&gs(jt,r),mi.forEach(i),Ar.forEach(i),a=0;a<fn.length;a++)d=fn[a],d.blockedOn===r&&(d.blockedOn=null);for(;0<fn.length&&(a=fn[0],a.blockedOn===null);)so(a),a.blockedOn===null&&fn.shift()}var Rr=ae.ReactCurrentBatchConfig,Nr=!0;function or(r,i,a,d){var f=Be,g=Rr.transition;Rr.transition=null;try{Be=1,Aa(r,i,a,d)}finally{Be=f,Rr.transition=g}}function hu(r,i,a,d){var f=Be,g=Rr.transition;Rr.transition=null;try{Be=4,Aa(r,i,a,d)}finally{Be=f,Rr.transition=g}}function Aa(r,i,a,d){if(Nr){var f=io(r,i,a,d);if(f===null)Kd(r,i,d,ar,a),ms(r,d);else if(cu(f,r,i,a,d))d.stopPropagation();else if(ms(r,d),i&4&&-1<uu.indexOf(r)){for(;f!==null;){var g=Ba(f);if(g!==null&&Sa(g),g=io(r,i,a,d),g===null&&Kd(r,i,d,ar,a),g===f)break;f=g}f!==null&&d.stopPropagation()}else Kd(r,i,d,null,a)}}var ar=null;function io(r,i,a,d){if(ar=null,r=Xi(d),r=_i(r),r!==null)if(i=Vn(r),i===null)r=null;else if(a=i.tag,a===13){if(r=ya(i),r!==null)return r;r=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;r=null}else i!==r&&(r=null);return ar=r,null}function oo(r){switch(r){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vd()){case eo:return 1;case _a:return 4;case ui:case wa:return 16;case to:return 536870912;default:return 16}default:return 16}}var pn=null,ao=null,Pr=null;function fu(){if(Pr)return Pr;var r,i=ao,a=i.length,d,f="value"in pn?pn.value:pn.textContent,g=f.length;for(r=0;r<a&&i[r]===f[r];r++);var x=a-r;for(d=1;d<=x&&i[a-d]===f[g-d];d++);return Pr=f.slice(r,1<d?1-d:void 0)}function gi(r){var i=r.keyCode;return"charCode"in r?(r=r.charCode,r===0&&i===13&&(r=13)):r=i,r===10&&(r=13),32<=r||r===13?r:0}function lr(){return!0}function Ra(){return!1}function zt(r){function i(a,d,f,g,x){this._reactName=a,this._targetInst=f,this.type=d,this.nativeEvent=g,this.target=x,this.currentTarget=null;for(var A in r)r.hasOwnProperty(A)&&(a=r[A],this[A]=a?a(g):g[A]);return this.isDefaultPrevented=(g.defaultPrevented!=null?g.defaultPrevented:g.returnValue===!1)?lr:Ra,this.isPropagationStopped=Ra,this}return le(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=lr)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=lr)},persist:function(){},isPersistent:lr}),i}var ur={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(r){return r.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yi=zt(ur),vs=le({},ur,{view:0,detail:0}),lo=zt(vs),uo,co,mn,vi=le({},vs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ne,button:0,buttons:0,relatedTarget:function(r){return r.relatedTarget===void 0?r.fromElement===r.srcElement?r.toElement:r.fromElement:r.relatedTarget},movementX:function(r){return"movementX"in r?r.movementX:(r!==mn&&(mn&&r.type==="mousemove"?(uo=r.screenX-mn.screenX,co=r.screenY-mn.screenY):co=uo=0,mn=r),uo)},movementY:function(r){return"movementY"in r?r.movementY:co}}),Na=zt(vi),pu=le({},vi,{dataTransfer:0}),mu=zt(pu),ho=le({},vs,{relatedTarget:0}),Vt=zt(ho),gu=le({},ur,{animationName:0,elapsedTime:0,pseudoElement:0}),yu=zt(gu),_s=le({},ur,{clipboardData:function(r){return"clipboardData"in r?r.clipboardData:window.clipboardData}}),u=zt(_s),v=le({},ur,{data:0}),_=zt(v),I={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},$={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},G={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function se(r){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(r):(r=G[r])?!!i[r]:!1}function Ne(){return se}var mt=le({},vs,{key:function(r){if(r.key){var i=I[r.key]||r.key;if(i!=="Unidentified")return i}return r.type==="keypress"?(r=gi(r),r===13?"Enter":String.fromCharCode(r)):r.type==="keydown"||r.type==="keyup"?$[r.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ne,charCode:function(r){return r.type==="keypress"?gi(r):0},keyCode:function(r){return r.type==="keydown"||r.type==="keyup"?r.keyCode:0},which:function(r){return r.type==="keypress"?gi(r):r.type==="keydown"||r.type==="keyup"?r.keyCode:0}}),Qe=zt(mt),wt=le({},vi,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gn=zt(wt),Dr=le({},vs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ne}),cr=zt(Dr),dr=le({},ur,{propertyName:0,elapsedTime:0,pseudoElement:0}),fo=zt(dr),Pa=le({},vi,{deltaX:function(r){return"deltaX"in r?r.deltaX:"wheelDeltaX"in r?-r.wheelDeltaX:0},deltaY:function(r){return"deltaY"in r?r.deltaY:"wheelDeltaY"in r?-r.wheelDeltaY:"wheelDelta"in r?-r.wheelDelta:0},deltaZ:0,deltaMode:0}),Px=zt(Pa),Dx=[9,13,27,32],Od=h&&"CompositionEvent"in window,Da=null;h&&"documentMode"in document&&(Da=document.documentMode);var jx=h&&"TextEvent"in window&&!Da,hm=h&&(!Od||Da&&8<Da&&11>=Da),fm=" ",pm=!1;function mm(r,i){switch(r){case"keyup":return Dx.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function gm(r){return r=r.detail,typeof r=="object"&&"data"in r?r.data:null}var po=!1;function Vx(r,i){switch(r){case"compositionend":return gm(i);case"keypress":return i.which!==32?null:(pm=!0,fm);case"textInput":return r=i.data,r===fm&&pm?null:r;default:return null}}function Lx(r,i){if(po)return r==="compositionend"||!Od&&mm(r,i)?(r=fu(),Pr=ao=pn=null,po=!1,r):null;switch(r){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return hm&&i.locale!=="ko"?null:i.data;default:return null}}var Mx={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function ym(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i==="input"?!!Mx[r.type]:i==="textarea"}function vm(r,i,a,d){cs(d),i=Eu(i,"onChange"),0<i.length&&(a=new yi("onChange","change",null,a,d),r.push({event:a,listeners:i}))}var ja=null,Va=null;function Ox(r){Lm(r,0)}function vu(r){var i=_o(r);if(Xn(i))return r}function Fx(r,i){if(r==="change")return i}var _m=!1;if(h){var Fd;if(h){var Ud="oninput"in document;if(!Ud){var wm=document.createElement("div");wm.setAttribute("oninput","return;"),Ud=typeof wm.oninput=="function"}Fd=Ud}else Fd=!1;_m=Fd&&(!document.documentMode||9<document.documentMode)}function xm(){ja&&(ja.detachEvent("onpropertychange",Em),Va=ja=null)}function Em(r){if(r.propertyName==="value"&&vu(Va)){var i=[];vm(i,Va,r,Xi(r)),tu(Ox,i)}}function Ux(r,i,a){r==="focusin"?(xm(),ja=i,Va=a,ja.attachEvent("onpropertychange",Em)):r==="focusout"&&xm()}function zx(r){if(r==="selectionchange"||r==="keyup"||r==="keydown")return vu(Va)}function Bx(r,i){if(r==="click")return vu(i)}function $x(r,i){if(r==="input"||r==="change")return vu(i)}function Hx(r,i){return r===i&&(r!==0||1/r===1/i)||r!==r&&i!==i}var Mn=typeof Object.is=="function"?Object.is:Hx;function La(r,i){if(Mn(r,i))return!0;if(typeof r!="object"||r===null||typeof i!="object"||i===null)return!1;var a=Object.keys(r),d=Object.keys(i);if(a.length!==d.length)return!1;for(d=0;d<a.length;d++){var f=a[d];if(!p.call(i,f)||!Mn(r[f],i[f]))return!1}return!0}function Tm(r){for(;r&&r.firstChild;)r=r.firstChild;return r}function Im(r,i){var a=Tm(r);r=0;for(var d;a;){if(a.nodeType===3){if(d=r+a.textContent.length,r<=i&&d>=i)return{node:a,offset:i-r};r=d}e:{for(;a;){if(a.nextSibling){a=a.nextSibling;break e}a=a.parentNode}a=void 0}a=Tm(a)}}function Sm(r,i){return r&&i?r===i?!0:r&&r.nodeType===3?!1:i&&i.nodeType===3?Sm(r,i.parentNode):"contains"in r?r.contains(i):r.compareDocumentPosition?!!(r.compareDocumentPosition(i)&16):!1:!1}function bm(){for(var r=window,i=ss();i instanceof r.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)r=i.contentWindow;else break;i=ss(r.document)}return i}function zd(r){var i=r&&r.nodeName&&r.nodeName.toLowerCase();return i&&(i==="input"&&(r.type==="text"||r.type==="search"||r.type==="tel"||r.type==="url"||r.type==="password")||i==="textarea"||r.contentEditable==="true")}function Wx(r){var i=bm(),a=r.focusedElem,d=r.selectionRange;if(i!==a&&a&&a.ownerDocument&&Sm(a.ownerDocument.documentElement,a)){if(d!==null&&zd(a)){if(i=d.start,r=d.end,r===void 0&&(r=i),"selectionStart"in a)a.selectionStart=i,a.selectionEnd=Math.min(r,a.value.length);else if(r=(i=a.ownerDocument||document)&&i.defaultView||window,r.getSelection){r=r.getSelection();var f=a.textContent.length,g=Math.min(d.start,f);d=d.end===void 0?g:Math.min(d.end,f),!r.extend&&g>d&&(f=d,d=g,g=f),f=Im(a,g);var x=Im(a,d);f&&x&&(r.rangeCount!==1||r.anchorNode!==f.node||r.anchorOffset!==f.offset||r.focusNode!==x.node||r.focusOffset!==x.offset)&&(i=i.createRange(),i.setStart(f.node,f.offset),r.removeAllRanges(),g>d?(r.addRange(i),r.extend(x.node,x.offset)):(i.setEnd(x.node,x.offset),r.addRange(i)))}}for(i=[],r=a;r=r.parentNode;)r.nodeType===1&&i.push({element:r,left:r.scrollLeft,top:r.scrollTop});for(typeof a.focus=="function"&&a.focus(),a=0;a<i.length;a++)r=i[a],r.element.scrollLeft=r.left,r.element.scrollTop=r.top}}var qx=h&&"documentMode"in document&&11>=document.documentMode,mo=null,Bd=null,Ma=null,$d=!1;function km(r,i,a){var d=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;$d||mo==null||mo!==ss(d)||(d=mo,"selectionStart"in d&&zd(d)?d={start:d.selectionStart,end:d.selectionEnd}:(d=(d.ownerDocument&&d.ownerDocument.defaultView||window).getSelection(),d={anchorNode:d.anchorNode,anchorOffset:d.anchorOffset,focusNode:d.focusNode,focusOffset:d.focusOffset}),Ma&&La(Ma,d)||(Ma=d,d=Eu(Bd,"onSelect"),0<d.length&&(i=new yi("onSelect","select",null,i,a),r.push({event:i,listeners:d}),i.target=mo)))}function _u(r,i){var a={};return a[r.toLowerCase()]=i.toLowerCase(),a["Webkit"+r]="webkit"+i,a["Moz"+r]="moz"+i,a}var go={animationend:_u("Animation","AnimationEnd"),animationiteration:_u("Animation","AnimationIteration"),animationstart:_u("Animation","AnimationStart"),transitionend:_u("Transition","TransitionEnd")},Hd={},Cm={};h&&(Cm=document.createElement("div").style,"AnimationEvent"in window||(delete go.animationend.animation,delete go.animationiteration.animation,delete go.animationstart.animation),"TransitionEvent"in window||delete go.transitionend.transition);function wu(r){if(Hd[r])return Hd[r];if(!go[r])return r;var i=go[r],a;for(a in i)if(i.hasOwnProperty(a)&&a in Cm)return Hd[r]=i[a];return r}var Am=wu("animationend"),Rm=wu("animationiteration"),Nm=wu("animationstart"),Pm=wu("transitionend"),Dm=new Map,jm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ws(r,i){Dm.set(r,i),l(i,[r])}for(var Wd=0;Wd<jm.length;Wd++){var qd=jm[Wd],Gx=qd.toLowerCase(),Kx=qd[0].toUpperCase()+qd.slice(1);ws(Gx,"on"+Kx)}ws(Am,"onAnimationEnd"),ws(Rm,"onAnimationIteration"),ws(Nm,"onAnimationStart"),ws("dblclick","onDoubleClick"),ws("focusin","onFocus"),ws("focusout","onBlur"),ws(Pm,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Oa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qx=new Set("cancel close invalid load scroll toggle".split(" ").concat(Oa));function Vm(r,i,a){var d=r.type||"unknown-event";r.currentTarget=a,ga(d,i,void 0,r),r.currentTarget=null}function Lm(r,i){i=(i&4)!==0;for(var a=0;a<r.length;a++){var d=r[a],f=d.event;d=d.listeners;e:{var g=void 0;if(i)for(var x=d.length-1;0<=x;x--){var A=d[x],L=A.instance,q=A.currentTarget;if(A=A.listener,L!==g&&f.isPropagationStopped())break e;Vm(f,A,q),g=L}else for(x=0;x<d.length;x++){if(A=d[x],L=A.instance,q=A.currentTarget,A=A.listener,L!==g&&f.isPropagationStopped())break e;Vm(f,A,q),g=L}}}if(Ji)throw r=xn,Ji=!1,xn=null,r}function tt(r,i){var a=i[eh];a===void 0&&(a=i[eh]=new Set);var d=r+"__bubble";a.has(d)||(Mm(i,r,2,!1),a.add(d))}function Gd(r,i,a){var d=0;i&&(d|=4),Mm(a,r,d,i)}var xu="_reactListening"+Math.random().toString(36).slice(2);function Fa(r){if(!r[xu]){r[xu]=!0,s.forEach(function(a){a!=="selectionchange"&&(Qx.has(a)||Gd(a,!1,r),Gd(a,!0,r))});var i=r.nodeType===9?r:r.ownerDocument;i===null||i[xu]||(i[xu]=!0,Gd("selectionchange",!1,i))}}function Mm(r,i,a,d){switch(oo(i)){case 1:var f=or;break;case 4:f=hu;break;default:f=Aa}a=f.bind(null,i,a,r),f=void 0,!hs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),d?f!==void 0?r.addEventListener(i,a,{capture:!0,passive:f}):r.addEventListener(i,a,!0):f!==void 0?r.addEventListener(i,a,{passive:f}):r.addEventListener(i,a,!1)}function Kd(r,i,a,d,f){var g=d;if((i&1)===0&&(i&2)===0&&d!==null)e:for(;;){if(d===null)return;var x=d.tag;if(x===3||x===4){var A=d.stateNode.containerInfo;if(A===f||A.nodeType===8&&A.parentNode===f)break;if(x===4)for(x=d.return;x!==null;){var L=x.tag;if((L===3||L===4)&&(L=x.stateNode.containerInfo,L===f||L.nodeType===8&&L.parentNode===f))return;x=x.return}for(;A!==null;){if(x=_i(A),x===null)return;if(L=x.tag,L===5||L===6){d=g=x;continue e}A=A.parentNode}}d=d.return}tu(function(){var q=g,te=Xi(a),ne=[];e:{var ee=Dm.get(r);if(ee!==void 0){var ue=yi,pe=r;switch(r){case"keypress":if(gi(a)===0)break e;case"keydown":case"keyup":ue=Qe;break;case"focusin":pe="focus",ue=Vt;break;case"focusout":pe="blur",ue=Vt;break;case"beforeblur":case"afterblur":ue=Vt;break;case"click":if(a.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Na;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=mu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=cr;break;case Am:case Rm:case Nm:ue=yu;break;case Pm:ue=fo;break;case"scroll":ue=lo;break;case"wheel":ue=Px;break;case"copy":case"cut":case"paste":ue=u;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=gn}var ye=(i&4)!==0,gt=!ye&&r==="scroll",B=ye?ee!==null?ee+"Capture":null:ee;ye=[];for(var M=q,W;M!==null;){W=M;var re=W.stateNode;if(W.tag===5&&re!==null&&(W=re,B!==null&&(re=oi(M,B),re!=null&&ye.push(Ua(M,re,W)))),gt)break;M=M.return}0<ye.length&&(ee=new ue(ee,pe,null,a,te),ne.push({event:ee,listeners:ye}))}}if((i&7)===0){e:{if(ee=r==="mouseover"||r==="pointerover",ue=r==="mouseout"||r==="pointerout",ee&&a!==us&&(pe=a.relatedTarget||a.fromElement)&&(_i(pe)||pe[jr]))break e;if((ue||ee)&&(ee=te.window===te?te:(ee=te.ownerDocument)?ee.defaultView||ee.parentWindow:window,ue?(pe=a.relatedTarget||a.toElement,ue=q,pe=pe?_i(pe):null,pe!==null&&(gt=Vn(pe),pe!==gt||pe.tag!==5&&pe.tag!==6)&&(pe=null)):(ue=null,pe=q),ue!==pe)){if(ye=Na,re="onMouseLeave",B="onMouseEnter",M="mouse",(r==="pointerout"||r==="pointerover")&&(ye=gn,re="onPointerLeave",B="onPointerEnter",M="pointer"),gt=ue==null?ee:_o(ue),W=pe==null?ee:_o(pe),ee=new ye(re,M+"leave",ue,a,te),ee.target=gt,ee.relatedTarget=W,re=null,_i(te)===q&&(ye=new ye(B,M+"enter",pe,a,te),ye.target=W,ye.relatedTarget=gt,re=ye),gt=re,ue&&pe)t:{for(ye=ue,B=pe,M=0,W=ye;W;W=yo(W))M++;for(W=0,re=B;re;re=yo(re))W++;for(;0<M-W;)ye=yo(ye),M--;for(;0<W-M;)B=yo(B),W--;for(;M--;){if(ye===B||B!==null&&ye===B.alternate)break t;ye=yo(ye),B=yo(B)}ye=null}else ye=null;ue!==null&&Om(ne,ee,ue,ye,!1),pe!==null&&gt!==null&&Om(ne,gt,pe,ye,!0)}}e:{if(ee=q?_o(q):window,ue=ee.nodeName&&ee.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ee.type==="file")var ve=Fx;else if(ym(ee))if(_m)ve=$x;else{ve=zx;var Ie=Ux}else(ue=ee.nodeName)&&ue.toLowerCase()==="input"&&(ee.type==="checkbox"||ee.type==="radio")&&(ve=Bx);if(ve&&(ve=ve(r,q))){vm(ne,ve,a,te);break e}Ie&&Ie(r,ee,q),r==="focusout"&&(Ie=ee._wrapperState)&&Ie.controlled&&ee.type==="number"&&_t(ee,"number",ee.value)}switch(Ie=q?_o(q):window,r){case"focusin":(ym(Ie)||Ie.contentEditable==="true")&&(mo=Ie,Bd=q,Ma=null);break;case"focusout":Ma=Bd=mo=null;break;case"mousedown":$d=!0;break;case"contextmenu":case"mouseup":case"dragend":$d=!1,km(ne,a,te);break;case"selectionchange":if(qx)break;case"keydown":case"keyup":km(ne,a,te)}var Se;if(Od)e:{switch(r){case"compositionstart":var Ae="onCompositionStart";break e;case"compositionend":Ae="onCompositionEnd";break e;case"compositionupdate":Ae="onCompositionUpdate";break e}Ae=void 0}else po?mm(r,a)&&(Ae="onCompositionEnd"):r==="keydown"&&a.keyCode===229&&(Ae="onCompositionStart");Ae&&(hm&&a.locale!=="ko"&&(po||Ae!=="onCompositionStart"?Ae==="onCompositionEnd"&&po&&(Se=fu()):(pn=te,ao="value"in pn?pn.value:pn.textContent,po=!0)),Ie=Eu(q,Ae),0<Ie.length&&(Ae=new _(Ae,r,null,a,te),ne.push({event:Ae,listeners:Ie}),Se?Ae.data=Se:(Se=gm(a),Se!==null&&(Ae.data=Se)))),(Se=jx?Vx(r,a):Lx(r,a))&&(q=Eu(q,"onBeforeInput"),0<q.length&&(te=new _("onBeforeInput","beforeinput",null,a,te),ne.push({event:te,listeners:q}),te.data=Se))}Lm(ne,i)})}function Ua(r,i,a){return{instance:r,listener:i,currentTarget:a}}function Eu(r,i){for(var a=i+"Capture",d=[];r!==null;){var f=r,g=f.stateNode;f.tag===5&&g!==null&&(f=g,g=oi(r,a),g!=null&&d.unshift(Ua(r,g,f)),g=oi(r,i),g!=null&&d.push(Ua(r,g,f))),r=r.return}return d}function yo(r){if(r===null)return null;do r=r.return;while(r&&r.tag!==5);return r||null}function Om(r,i,a,d,f){for(var g=i._reactName,x=[];a!==null&&a!==d;){var A=a,L=A.alternate,q=A.stateNode;if(L!==null&&L===d)break;A.tag===5&&q!==null&&(A=q,f?(L=oi(a,g),L!=null&&x.unshift(Ua(a,L,A))):f||(L=oi(a,g),L!=null&&x.push(Ua(a,L,A)))),a=a.return}x.length!==0&&r.push({event:i,listeners:x})}var Yx=/\r\n?/g,Xx=/\u0000|\uFFFD/g;function Fm(r){return(typeof r=="string"?r:""+r).replace(Yx,`
`).replace(Xx,"")}function Tu(r,i,a){if(i=Fm(i),Fm(r)!==i&&a)throw Error(t(425))}function Iu(){}var Qd=null,Yd=null;function Xd(r,i){return r==="textarea"||r==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var Jd=typeof setTimeout=="function"?setTimeout:void 0,Jx=typeof clearTimeout=="function"?clearTimeout:void 0,Um=typeof Promise=="function"?Promise:void 0,Zx=typeof queueMicrotask=="function"?queueMicrotask:typeof Um<"u"?function(r){return Um.resolve(null).then(r).catch(eE)}:Jd;function eE(r){setTimeout(function(){throw r})}function Zd(r,i){var a=i,d=0;do{var f=a.nextSibling;if(r.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"){if(d===0){r.removeChild(f),ys(i);return}d--}else a!=="$"&&a!=="$?"&&a!=="$!"||d++;a=f}while(a);ys(i)}function xs(r){for(;r!=null;r=r.nextSibling){var i=r.nodeType;if(i===1||i===3)break;if(i===8){if(i=r.data,i==="$"||i==="$!"||i==="$?")break;if(i==="/$")return null}}return r}function zm(r){r=r.previousSibling;for(var i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="$"||a==="$!"||a==="$?"){if(i===0)return r;i--}else a==="/$"&&i++}r=r.previousSibling}return null}var vo=Math.random().toString(36).slice(2),hr="__reactFiber$"+vo,za="__reactProps$"+vo,jr="__reactContainer$"+vo,eh="__reactEvents$"+vo,tE="__reactListeners$"+vo,nE="__reactHandles$"+vo;function _i(r){var i=r[hr];if(i)return i;for(var a=r.parentNode;a;){if(i=a[jr]||a[hr]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(r=zm(r);r!==null;){if(a=r[hr])return a;r=zm(r)}return i}r=a,a=r.parentNode}return null}function Ba(r){return r=r[hr]||r[jr],!r||r.tag!==5&&r.tag!==6&&r.tag!==13&&r.tag!==3?null:r}function _o(r){if(r.tag===5||r.tag===6)return r.stateNode;throw Error(t(33))}function Su(r){return r[za]||null}var th=[],wo=-1;function Es(r){return{current:r}}function nt(r){0>wo||(r.current=th[wo],th[wo]=null,wo--)}function Je(r,i){wo++,th[wo]=r.current,r.current=i}var Ts={},Bt=Es(Ts),en=Es(!1),wi=Ts;function xo(r,i){var a=r.type.contextTypes;if(!a)return Ts;var d=r.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===i)return d.__reactInternalMemoizedMaskedChildContext;var f={},g;for(g in a)f[g]=i[g];return d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=i,r.__reactInternalMemoizedMaskedChildContext=f),f}function tn(r){return r=r.childContextTypes,r!=null}function bu(){nt(en),nt(Bt)}function Bm(r,i,a){if(Bt.current!==Ts)throw Error(t(168));Je(Bt,i),Je(en,a)}function $m(r,i,a){var d=r.stateNode;if(i=i.childContextTypes,typeof d.getChildContext!="function")return a;d=d.getChildContext();for(var f in d)if(!(f in i))throw Error(t(108,be(r)||"Unknown",f));return le({},a,d)}function ku(r){return r=(r=r.stateNode)&&r.__reactInternalMemoizedMergedChildContext||Ts,wi=Bt.current,Je(Bt,r),Je(en,en.current),!0}function Hm(r,i,a){var d=r.stateNode;if(!d)throw Error(t(169));a?(r=$m(r,i,wi),d.__reactInternalMemoizedMergedChildContext=r,nt(en),nt(Bt),Je(Bt,r)):nt(en),Je(en,a)}var Vr=null,Cu=!1,nh=!1;function Wm(r){Vr===null?Vr=[r]:Vr.push(r)}function rE(r){Cu=!0,Wm(r)}function Is(){if(!nh&&Vr!==null){nh=!0;var r=0,i=Be;try{var a=Vr;for(Be=1;r<a.length;r++){var d=a[r];do d=d(!0);while(d!==null)}Vr=null,Cu=!1}catch(f){throw Vr!==null&&(Vr=Vr.slice(r+1)),va(eo,Is),f}finally{Be=i,nh=!1}}return null}var Eo=[],To=0,Au=null,Ru=0,Tn=[],In=0,xi=null,Lr=1,Mr="";function Ei(r,i){Eo[To++]=Ru,Eo[To++]=Au,Au=r,Ru=i}function qm(r,i,a){Tn[In++]=Lr,Tn[In++]=Mr,Tn[In++]=xi,xi=r;var d=Lr;r=Mr;var f=32-hn(d)-1;d&=~(1<<f),a+=1;var g=32-hn(i)+f;if(30<g){var x=f-f%5;g=(d&(1<<x)-1).toString(32),d>>=x,f-=x,Lr=1<<32-hn(i)+f|a<<f|d,Mr=g+r}else Lr=1<<g|a<<f|d,Mr=r}function rh(r){r.return!==null&&(Ei(r,1),qm(r,1,0))}function sh(r){for(;r===Au;)Au=Eo[--To],Eo[To]=null,Ru=Eo[--To],Eo[To]=null;for(;r===xi;)xi=Tn[--In],Tn[In]=null,Mr=Tn[--In],Tn[In]=null,Lr=Tn[--In],Tn[In]=null}var yn=null,vn=null,it=!1,On=null;function Gm(r,i){var a=Cn(5,null,null,0);a.elementType="DELETED",a.stateNode=i,a.return=r,i=r.deletions,i===null?(r.deletions=[a],r.flags|=16):i.push(a)}function Km(r,i){switch(r.tag){case 5:var a=r.type;return i=i.nodeType!==1||a.toLowerCase()!==i.nodeName.toLowerCase()?null:i,i!==null?(r.stateNode=i,yn=r,vn=xs(i.firstChild),!0):!1;case 6:return i=r.pendingProps===""||i.nodeType!==3?null:i,i!==null?(r.stateNode=i,yn=r,vn=null,!0):!1;case 13:return i=i.nodeType!==8?null:i,i!==null?(a=xi!==null?{id:Lr,overflow:Mr}:null,r.memoizedState={dehydrated:i,treeContext:a,retryLane:1073741824},a=Cn(18,null,null,0),a.stateNode=i,a.return=r,r.child=a,yn=r,vn=null,!0):!1;default:return!1}}function ih(r){return(r.mode&1)!==0&&(r.flags&128)===0}function oh(r){if(it){var i=vn;if(i){var a=i;if(!Km(r,i)){if(ih(r))throw Error(t(418));i=xs(a.nextSibling);var d=yn;i&&Km(r,i)?Gm(d,a):(r.flags=r.flags&-4097|2,it=!1,yn=r)}}else{if(ih(r))throw Error(t(418));r.flags=r.flags&-4097|2,it=!1,yn=r}}}function Qm(r){for(r=r.return;r!==null&&r.tag!==5&&r.tag!==3&&r.tag!==13;)r=r.return;yn=r}function Nu(r){if(r!==yn)return!1;if(!it)return Qm(r),it=!0,!1;var i;if((i=r.tag!==3)&&!(i=r.tag!==5)&&(i=r.type,i=i!=="head"&&i!=="body"&&!Xd(r.type,r.memoizedProps)),i&&(i=vn)){if(ih(r))throw Ym(),Error(t(418));for(;i;)Gm(r,i),i=xs(i.nextSibling)}if(Qm(r),r.tag===13){if(r=r.memoizedState,r=r!==null?r.dehydrated:null,!r)throw Error(t(317));e:{for(r=r.nextSibling,i=0;r;){if(r.nodeType===8){var a=r.data;if(a==="/$"){if(i===0){vn=xs(r.nextSibling);break e}i--}else a!=="$"&&a!=="$!"&&a!=="$?"||i++}r=r.nextSibling}vn=null}}else vn=yn?xs(r.stateNode.nextSibling):null;return!0}function Ym(){for(var r=vn;r;)r=xs(r.nextSibling)}function Io(){vn=yn=null,it=!1}function ah(r){On===null?On=[r]:On.push(r)}var sE=ae.ReactCurrentBatchConfig;function $a(r,i,a){if(r=a.ref,r!==null&&typeof r!="function"&&typeof r!="object"){if(a._owner){if(a=a._owner,a){if(a.tag!==1)throw Error(t(309));var d=a.stateNode}if(!d)throw Error(t(147,r));var f=d,g=""+r;return i!==null&&i.ref!==null&&typeof i.ref=="function"&&i.ref._stringRef===g?i.ref:(i=function(x){var A=f.refs;x===null?delete A[g]:A[g]=x},i._stringRef=g,i)}if(typeof r!="string")throw Error(t(284));if(!a._owner)throw Error(t(290,r))}return r}function Pu(r,i){throw r=Object.prototype.toString.call(i),Error(t(31,r==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":r))}function Xm(r){var i=r._init;return i(r._payload)}function Jm(r){function i(B,M){if(r){var W=B.deletions;W===null?(B.deletions=[M],B.flags|=16):W.push(M)}}function a(B,M){if(!r)return null;for(;M!==null;)i(B,M),M=M.sibling;return null}function d(B,M){for(B=new Map;M!==null;)M.key!==null?B.set(M.key,M):B.set(M.index,M),M=M.sibling;return B}function f(B,M){return B=Ps(B,M),B.index=0,B.sibling=null,B}function g(B,M,W){return B.index=W,r?(W=B.alternate,W!==null?(W=W.index,W<M?(B.flags|=2,M):W):(B.flags|=2,M)):(B.flags|=1048576,M)}function x(B){return r&&B.alternate===null&&(B.flags|=2),B}function A(B,M,W,re){return M===null||M.tag!==6?(M=Jh(W,B.mode,re),M.return=B,M):(M=f(M,W),M.return=B,M)}function L(B,M,W,re){var ve=W.type;return ve===P?te(B,M,W.props.children,re,W.key):M!==null&&(M.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Te&&Xm(ve)===M.type)?(re=f(M,W.props),re.ref=$a(B,M,W),re.return=B,re):(re=nc(W.type,W.key,W.props,null,B.mode,re),re.ref=$a(B,M,W),re.return=B,re)}function q(B,M,W,re){return M===null||M.tag!==4||M.stateNode.containerInfo!==W.containerInfo||M.stateNode.implementation!==W.implementation?(M=Zh(W,B.mode,re),M.return=B,M):(M=f(M,W.children||[]),M.return=B,M)}function te(B,M,W,re,ve){return M===null||M.tag!==7?(M=Ri(W,B.mode,re,ve),M.return=B,M):(M=f(M,W),M.return=B,M)}function ne(B,M,W){if(typeof M=="string"&&M!==""||typeof M=="number")return M=Jh(""+M,B.mode,W),M.return=B,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case fe:return W=nc(M.type,M.key,M.props,null,B.mode,W),W.ref=$a(B,null,M),W.return=B,W;case he:return M=Zh(M,B.mode,W),M.return=B,M;case Te:var re=M._init;return ne(B,re(M._payload),W)}if(pt(M)||we(M))return M=Ri(M,B.mode,W,null),M.return=B,M;Pu(B,M)}return null}function ee(B,M,W,re){var ve=M!==null?M.key:null;if(typeof W=="string"&&W!==""||typeof W=="number")return ve!==null?null:A(B,M,""+W,re);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case fe:return W.key===ve?L(B,M,W,re):null;case he:return W.key===ve?q(B,M,W,re):null;case Te:return ve=W._init,ee(B,M,ve(W._payload),re)}if(pt(W)||we(W))return ve!==null?null:te(B,M,W,re,null);Pu(B,W)}return null}function ue(B,M,W,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get(W)||null,A(M,B,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case fe:return B=B.get(re.key===null?W:re.key)||null,L(M,B,re,ve);case he:return B=B.get(re.key===null?W:re.key)||null,q(M,B,re,ve);case Te:var Ie=re._init;return ue(B,M,W,Ie(re._payload),ve)}if(pt(re)||we(re))return B=B.get(W)||null,te(M,B,re,ve,null);Pu(M,re)}return null}function pe(B,M,W,re){for(var ve=null,Ie=null,Se=M,Ae=M=0,Pt=null;Se!==null&&Ae<W.length;Ae++){Se.index>Ae?(Pt=Se,Se=null):Pt=Se.sibling;var qe=ee(B,Se,W[Ae],re);if(qe===null){Se===null&&(Se=Pt);break}r&&Se&&qe.alternate===null&&i(B,Se),M=g(qe,M,Ae),Ie===null?ve=qe:Ie.sibling=qe,Ie=qe,Se=Pt}if(Ae===W.length)return a(B,Se),it&&Ei(B,Ae),ve;if(Se===null){for(;Ae<W.length;Ae++)Se=ne(B,W[Ae],re),Se!==null&&(M=g(Se,M,Ae),Ie===null?ve=Se:Ie.sibling=Se,Ie=Se);return it&&Ei(B,Ae),ve}for(Se=d(B,Se);Ae<W.length;Ae++)Pt=ue(Se,B,Ae,W[Ae],re),Pt!==null&&(r&&Pt.alternate!==null&&Se.delete(Pt.key===null?Ae:Pt.key),M=g(Pt,M,Ae),Ie===null?ve=Pt:Ie.sibling=Pt,Ie=Pt);return r&&Se.forEach(function(Ds){return i(B,Ds)}),it&&Ei(B,Ae),ve}function ye(B,M,W,re){var ve=we(W);if(typeof ve!="function")throw Error(t(150));if(W=ve.call(W),W==null)throw Error(t(151));for(var Ie=ve=null,Se=M,Ae=M=0,Pt=null,qe=W.next();Se!==null&&!qe.done;Ae++,qe=W.next()){Se.index>Ae?(Pt=Se,Se=null):Pt=Se.sibling;var Ds=ee(B,Se,qe.value,re);if(Ds===null){Se===null&&(Se=Pt);break}r&&Se&&Ds.alternate===null&&i(B,Se),M=g(Ds,M,Ae),Ie===null?ve=Ds:Ie.sibling=Ds,Ie=Ds,Se=Pt}if(qe.done)return a(B,Se),it&&Ei(B,Ae),ve;if(Se===null){for(;!qe.done;Ae++,qe=W.next())qe=ne(B,qe.value,re),qe!==null&&(M=g(qe,M,Ae),Ie===null?ve=qe:Ie.sibling=qe,Ie=qe);return it&&Ei(B,Ae),ve}for(Se=d(B,Se);!qe.done;Ae++,qe=W.next())qe=ue(Se,B,Ae,qe.value,re),qe!==null&&(r&&qe.alternate!==null&&Se.delete(qe.key===null?Ae:qe.key),M=g(qe,M,Ae),Ie===null?ve=qe:Ie.sibling=qe,Ie=qe);return r&&Se.forEach(function(ME){return i(B,ME)}),it&&Ei(B,Ae),ve}function gt(B,M,W,re){if(typeof W=="object"&&W!==null&&W.type===P&&W.key===null&&(W=W.props.children),typeof W=="object"&&W!==null){switch(W.$$typeof){case fe:e:{for(var ve=W.key,Ie=M;Ie!==null;){if(Ie.key===ve){if(ve=W.type,ve===P){if(Ie.tag===7){a(B,Ie.sibling),M=f(Ie,W.props.children),M.return=B,B=M;break e}}else if(Ie.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===Te&&Xm(ve)===Ie.type){a(B,Ie.sibling),M=f(Ie,W.props),M.ref=$a(B,Ie,W),M.return=B,B=M;break e}a(B,Ie);break}else i(B,Ie);Ie=Ie.sibling}W.type===P?(M=Ri(W.props.children,B.mode,re,W.key),M.return=B,B=M):(re=nc(W.type,W.key,W.props,null,B.mode,re),re.ref=$a(B,M,W),re.return=B,B=re)}return x(B);case he:e:{for(Ie=W.key;M!==null;){if(M.key===Ie)if(M.tag===4&&M.stateNode.containerInfo===W.containerInfo&&M.stateNode.implementation===W.implementation){a(B,M.sibling),M=f(M,W.children||[]),M.return=B,B=M;break e}else{a(B,M);break}else i(B,M);M=M.sibling}M=Zh(W,B.mode,re),M.return=B,B=M}return x(B);case Te:return Ie=W._init,gt(B,M,Ie(W._payload),re)}if(pt(W))return pe(B,M,W,re);if(we(W))return ye(B,M,W,re);Pu(B,W)}return typeof W=="string"&&W!==""||typeof W=="number"?(W=""+W,M!==null&&M.tag===6?(a(B,M.sibling),M=f(M,W),M.return=B,B=M):(a(B,M),M=Jh(W,B.mode,re),M.return=B,B=M),x(B)):a(B,M)}return gt}var So=Jm(!0),Zm=Jm(!1),Du=Es(null),ju=null,bo=null,lh=null;function uh(){lh=bo=ju=null}function ch(r){var i=Du.current;nt(Du),r._currentValue=i}function dh(r,i,a){for(;r!==null;){var d=r.alternate;if((r.childLanes&i)!==i?(r.childLanes|=i,d!==null&&(d.childLanes|=i)):d!==null&&(d.childLanes&i)!==i&&(d.childLanes|=i),r===a)break;r=r.return}}function ko(r,i){ju=r,lh=bo=null,r=r.dependencies,r!==null&&r.firstContext!==null&&((r.lanes&i)!==0&&(nn=!0),r.firstContext=null)}function Sn(r){var i=r._currentValue;if(lh!==r)if(r={context:r,memoizedValue:i,next:null},bo===null){if(ju===null)throw Error(t(308));bo=r,ju.dependencies={lanes:0,firstContext:r}}else bo=bo.next=r;return i}var Ti=null;function hh(r){Ti===null?Ti=[r]:Ti.push(r)}function eg(r,i,a,d){var f=i.interleaved;return f===null?(a.next=a,hh(i)):(a.next=f.next,f.next=a),i.interleaved=a,Or(r,d)}function Or(r,i){r.lanes|=i;var a=r.alternate;for(a!==null&&(a.lanes|=i),a=r,r=r.return;r!==null;)r.childLanes|=i,a=r.alternate,a!==null&&(a.childLanes|=i),a=r,r=r.return;return a.tag===3?a.stateNode:null}var Ss=!1;function fh(r){r.updateQueue={baseState:r.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tg(r,i){r=r.updateQueue,i.updateQueue===r&&(i.updateQueue={baseState:r.baseState,firstBaseUpdate:r.firstBaseUpdate,lastBaseUpdate:r.lastBaseUpdate,shared:r.shared,effects:r.effects})}function Fr(r,i){return{eventTime:r,lane:i,tag:0,payload:null,callback:null,next:null}}function bs(r,i,a){var d=r.updateQueue;if(d===null)return null;if(d=d.shared,(He&2)!==0){var f=d.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),d.pending=i,Or(r,a)}return f=d.interleaved,f===null?(i.next=i,hh(d)):(i.next=f.next,f.next=i),d.interleaved=i,Or(r,a)}function Vu(r,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194240)!==0)){var d=i.lanes;d&=r.pendingLanes,a|=d,i.lanes=a,Ia(r,a)}}function ng(r,i){var a=r.updateQueue,d=r.alternate;if(d!==null&&(d=d.updateQueue,a===d)){var f=null,g=null;if(a=a.firstBaseUpdate,a!==null){do{var x={eventTime:a.eventTime,lane:a.lane,tag:a.tag,payload:a.payload,callback:a.callback,next:null};g===null?f=g=x:g=g.next=x,a=a.next}while(a!==null);g===null?f=g=i:g=g.next=i}else f=g=i;a={baseState:d.baseState,firstBaseUpdate:f,lastBaseUpdate:g,shared:d.shared,effects:d.effects},r.updateQueue=a;return}r=a.lastBaseUpdate,r===null?a.firstBaseUpdate=i:r.next=i,a.lastBaseUpdate=i}function Lu(r,i,a,d){var f=r.updateQueue;Ss=!1;var g=f.firstBaseUpdate,x=f.lastBaseUpdate,A=f.shared.pending;if(A!==null){f.shared.pending=null;var L=A,q=L.next;L.next=null,x===null?g=q:x.next=q,x=L;var te=r.alternate;te!==null&&(te=te.updateQueue,A=te.lastBaseUpdate,A!==x&&(A===null?te.firstBaseUpdate=q:A.next=q,te.lastBaseUpdate=L))}if(g!==null){var ne=f.baseState;x=0,te=q=L=null,A=g;do{var ee=A.lane,ue=A.eventTime;if((d&ee)===ee){te!==null&&(te=te.next={eventTime:ue,lane:0,tag:A.tag,payload:A.payload,callback:A.callback,next:null});e:{var pe=r,ye=A;switch(ee=i,ue=a,ye.tag){case 1:if(pe=ye.payload,typeof pe=="function"){ne=pe.call(ue,ne,ee);break e}ne=pe;break e;case 3:pe.flags=pe.flags&-65537|128;case 0:if(pe=ye.payload,ee=typeof pe=="function"?pe.call(ue,ne,ee):pe,ee==null)break e;ne=le({},ne,ee);break e;case 2:Ss=!0}}A.callback!==null&&A.lane!==0&&(r.flags|=64,ee=f.effects,ee===null?f.effects=[A]:ee.push(A))}else ue={eventTime:ue,lane:ee,tag:A.tag,payload:A.payload,callback:A.callback,next:null},te===null?(q=te=ue,L=ne):te=te.next=ue,x|=ee;if(A=A.next,A===null){if(A=f.shared.pending,A===null)break;ee=A,A=ee.next,ee.next=null,f.lastBaseUpdate=ee,f.shared.pending=null}}while(!0);if(te===null&&(L=ne),f.baseState=L,f.firstBaseUpdate=q,f.lastBaseUpdate=te,i=f.shared.interleaved,i!==null){f=i;do x|=f.lane,f=f.next;while(f!==i)}else g===null&&(f.shared.lanes=0);bi|=x,r.lanes=x,r.memoizedState=ne}}function rg(r,i,a){if(r=i.effects,i.effects=null,r!==null)for(i=0;i<r.length;i++){var d=r[i],f=d.callback;if(f!==null){if(d.callback=null,d=a,typeof f!="function")throw Error(t(191,f));f.call(d)}}}var Ha={},fr=Es(Ha),Wa=Es(Ha),qa=Es(Ha);function Ii(r){if(r===Ha)throw Error(t(174));return r}function ph(r,i){switch(Je(qa,i),Je(Wa,r),Je(fr,Ha),r=i.nodeType,r){case 9:case 11:i=(i=i.documentElement)?i.namespaceURI:Ki(null,"");break;default:r=r===8?i.parentNode:i,i=r.namespaceURI||null,r=r.tagName,i=Ki(i,r)}nt(fr),Je(fr,i)}function Co(){nt(fr),nt(Wa),nt(qa)}function sg(r){Ii(qa.current);var i=Ii(fr.current),a=Ki(i,r.type);i!==a&&(Je(Wa,r),Je(fr,a))}function mh(r){Wa.current===r&&(nt(fr),nt(Wa))}var at=Es(0);function Mu(r){for(var i=r;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||a.data==="$?"||a.data==="$!"))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var gh=[];function yh(){for(var r=0;r<gh.length;r++)gh[r]._workInProgressVersionPrimary=null;gh.length=0}var Ou=ae.ReactCurrentDispatcher,vh=ae.ReactCurrentBatchConfig,Si=0,lt=null,St=null,Rt=null,Fu=!1,Ga=!1,Ka=0,iE=0;function $t(){throw Error(t(321))}function _h(r,i){if(i===null)return!1;for(var a=0;a<i.length&&a<r.length;a++)if(!Mn(r[a],i[a]))return!1;return!0}function wh(r,i,a,d,f,g){if(Si=g,lt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,Ou.current=r===null||r.memoizedState===null?uE:cE,r=a(d,f),Ga){g=0;do{if(Ga=!1,Ka=0,25<=g)throw Error(t(301));g+=1,Rt=St=null,i.updateQueue=null,Ou.current=dE,r=a(d,f)}while(Ga)}if(Ou.current=Bu,i=St!==null&&St.next!==null,Si=0,Rt=St=lt=null,Fu=!1,i)throw Error(t(300));return r}function xh(){var r=Ka!==0;return Ka=0,r}function pr(){var r={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Rt===null?lt.memoizedState=Rt=r:Rt=Rt.next=r,Rt}function bn(){if(St===null){var r=lt.alternate;r=r!==null?r.memoizedState:null}else r=St.next;var i=Rt===null?lt.memoizedState:Rt.next;if(i!==null)Rt=i,St=r;else{if(r===null)throw Error(t(310));St=r,r={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},Rt===null?lt.memoizedState=Rt=r:Rt=Rt.next=r}return Rt}function Qa(r,i){return typeof i=="function"?i(r):i}function Eh(r){var i=bn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=St,f=d.baseQueue,g=a.pending;if(g!==null){if(f!==null){var x=f.next;f.next=g.next,g.next=x}d.baseQueue=f=g,a.pending=null}if(f!==null){g=f.next,d=d.baseState;var A=x=null,L=null,q=g;do{var te=q.lane;if((Si&te)===te)L!==null&&(L=L.next={lane:0,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null}),d=q.hasEagerState?q.eagerState:r(d,q.action);else{var ne={lane:te,action:q.action,hasEagerState:q.hasEagerState,eagerState:q.eagerState,next:null};L===null?(A=L=ne,x=d):L=L.next=ne,lt.lanes|=te,bi|=te}q=q.next}while(q!==null&&q!==g);L===null?x=d:L.next=A,Mn(d,i.memoizedState)||(nn=!0),i.memoizedState=d,i.baseState=x,i.baseQueue=L,a.lastRenderedState=d}if(r=a.interleaved,r!==null){f=r;do g=f.lane,lt.lanes|=g,bi|=g,f=f.next;while(f!==r)}else f===null&&(a.lanes=0);return[i.memoizedState,a.dispatch]}function Th(r){var i=bn(),a=i.queue;if(a===null)throw Error(t(311));a.lastRenderedReducer=r;var d=a.dispatch,f=a.pending,g=i.memoizedState;if(f!==null){a.pending=null;var x=f=f.next;do g=r(g,x.action),x=x.next;while(x!==f);Mn(g,i.memoizedState)||(nn=!0),i.memoizedState=g,i.baseQueue===null&&(i.baseState=g),a.lastRenderedState=g}return[g,d]}function ig(){}function og(r,i){var a=lt,d=bn(),f=i(),g=!Mn(d.memoizedState,f);if(g&&(d.memoizedState=f,nn=!0),d=d.queue,Ih(ug.bind(null,a,d,r),[r]),d.getSnapshot!==i||g||Rt!==null&&Rt.memoizedState.tag&1){if(a.flags|=2048,Ya(9,lg.bind(null,a,d,f,i),void 0,null),Nt===null)throw Error(t(349));(Si&30)!==0||ag(a,i,f)}return f}function ag(r,i,a){r.flags|=16384,r={getSnapshot:i,value:a},i=lt.updateQueue,i===null?(i={lastEffect:null,stores:null},lt.updateQueue=i,i.stores=[r]):(a=i.stores,a===null?i.stores=[r]:a.push(r))}function lg(r,i,a,d){i.value=a,i.getSnapshot=d,cg(i)&&dg(r)}function ug(r,i,a){return a(function(){cg(i)&&dg(r)})}function cg(r){var i=r.getSnapshot;r=r.value;try{var a=i();return!Mn(r,a)}catch{return!0}}function dg(r){var i=Or(r,1);i!==null&&Bn(i,r,1,-1)}function hg(r){var i=pr();return typeof r=="function"&&(r=r()),i.memoizedState=i.baseState=r,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Qa,lastRenderedState:r},i.queue=r,r=r.dispatch=lE.bind(null,lt,r),[i.memoizedState,r]}function Ya(r,i,a,d){return r={tag:r,create:i,destroy:a,deps:d,next:null},i=lt.updateQueue,i===null?(i={lastEffect:null,stores:null},lt.updateQueue=i,i.lastEffect=r.next=r):(a=i.lastEffect,a===null?i.lastEffect=r.next=r:(d=a.next,a.next=r,r.next=d,i.lastEffect=r)),r}function fg(){return bn().memoizedState}function Uu(r,i,a,d){var f=pr();lt.flags|=r,f.memoizedState=Ya(1|i,a,void 0,d===void 0?null:d)}function zu(r,i,a,d){var f=bn();d=d===void 0?null:d;var g=void 0;if(St!==null){var x=St.memoizedState;if(g=x.destroy,d!==null&&_h(d,x.deps)){f.memoizedState=Ya(i,a,g,d);return}}lt.flags|=r,f.memoizedState=Ya(1|i,a,g,d)}function pg(r,i){return Uu(8390656,8,r,i)}function Ih(r,i){return zu(2048,8,r,i)}function mg(r,i){return zu(4,2,r,i)}function gg(r,i){return zu(4,4,r,i)}function yg(r,i){if(typeof i=="function")return r=r(),i(r),function(){i(null)};if(i!=null)return r=r(),i.current=r,function(){i.current=null}}function vg(r,i,a){return a=a!=null?a.concat([r]):null,zu(4,4,yg.bind(null,i,r),a)}function Sh(){}function _g(r,i){var a=bn();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&_h(i,d[1])?d[0]:(a.memoizedState=[r,i],r)}function wg(r,i){var a=bn();i=i===void 0?null:i;var d=a.memoizedState;return d!==null&&i!==null&&_h(i,d[1])?d[0]:(r=r(),a.memoizedState=[r,i],r)}function xg(r,i,a){return(Si&21)===0?(r.baseState&&(r.baseState=!1,nn=!0),r.memoizedState=a):(Mn(a,i)||(a=Ea(),lt.lanes|=a,bi|=a,r.baseState=!0),i)}function oE(r,i){var a=Be;Be=a!==0&&4>a?a:4,r(!0);var d=vh.transition;vh.transition={};try{r(!1),i()}finally{Be=a,vh.transition=d}}function Eg(){return bn().memoizedState}function aE(r,i,a){var d=Rs(r);if(a={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null},Tg(r))Ig(i,a);else if(a=eg(r,i,a,d),a!==null){var f=Xt();Bn(a,r,d,f),Sg(a,i,d)}}function lE(r,i,a){var d=Rs(r),f={lane:d,action:a,hasEagerState:!1,eagerState:null,next:null};if(Tg(r))Ig(i,f);else{var g=r.alternate;if(r.lanes===0&&(g===null||g.lanes===0)&&(g=i.lastRenderedReducer,g!==null))try{var x=i.lastRenderedState,A=g(x,a);if(f.hasEagerState=!0,f.eagerState=A,Mn(A,x)){var L=i.interleaved;L===null?(f.next=f,hh(i)):(f.next=L.next,L.next=f),i.interleaved=f;return}}catch{}finally{}a=eg(r,i,f,d),a!==null&&(f=Xt(),Bn(a,r,d,f),Sg(a,i,d))}}function Tg(r){var i=r.alternate;return r===lt||i!==null&&i===lt}function Ig(r,i){Ga=Fu=!0;var a=r.pending;a===null?i.next=i:(i.next=a.next,a.next=i),r.pending=i}function Sg(r,i,a){if((a&4194240)!==0){var d=i.lanes;d&=r.pendingLanes,a|=d,i.lanes=a,Ia(r,a)}}var Bu={readContext:Sn,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},uE={readContext:Sn,useCallback:function(r,i){return pr().memoizedState=[r,i===void 0?null:i],r},useContext:Sn,useEffect:pg,useImperativeHandle:function(r,i,a){return a=a!=null?a.concat([r]):null,Uu(4194308,4,yg.bind(null,i,r),a)},useLayoutEffect:function(r,i){return Uu(4194308,4,r,i)},useInsertionEffect:function(r,i){return Uu(4,2,r,i)},useMemo:function(r,i){var a=pr();return i=i===void 0?null:i,r=r(),a.memoizedState=[r,i],r},useReducer:function(r,i,a){var d=pr();return i=a!==void 0?a(i):i,d.memoizedState=d.baseState=i,r={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:r,lastRenderedState:i},d.queue=r,r=r.dispatch=aE.bind(null,lt,r),[d.memoizedState,r]},useRef:function(r){var i=pr();return r={current:r},i.memoizedState=r},useState:hg,useDebugValue:Sh,useDeferredValue:function(r){return pr().memoizedState=r},useTransition:function(){var r=hg(!1),i=r[0];return r=oE.bind(null,r[1]),pr().memoizedState=r,[i,r]},useMutableSource:function(){},useSyncExternalStore:function(r,i,a){var d=lt,f=pr();if(it){if(a===void 0)throw Error(t(407));a=a()}else{if(a=i(),Nt===null)throw Error(t(349));(Si&30)!==0||ag(d,i,a)}f.memoizedState=a;var g={value:a,getSnapshot:i};return f.queue=g,pg(ug.bind(null,d,g,r),[r]),d.flags|=2048,Ya(9,lg.bind(null,d,g,a,i),void 0,null),a},useId:function(){var r=pr(),i=Nt.identifierPrefix;if(it){var a=Mr,d=Lr;a=(d&~(1<<32-hn(d)-1)).toString(32)+a,i=":"+i+"R"+a,a=Ka++,0<a&&(i+="H"+a.toString(32)),i+=":"}else a=iE++,i=":"+i+"r"+a.toString(32)+":";return r.memoizedState=i},unstable_isNewReconciler:!1},cE={readContext:Sn,useCallback:_g,useContext:Sn,useEffect:Ih,useImperativeHandle:vg,useInsertionEffect:mg,useLayoutEffect:gg,useMemo:wg,useReducer:Eh,useRef:fg,useState:function(){return Eh(Qa)},useDebugValue:Sh,useDeferredValue:function(r){var i=bn();return xg(i,St.memoizedState,r)},useTransition:function(){var r=Eh(Qa)[0],i=bn().memoizedState;return[r,i]},useMutableSource:ig,useSyncExternalStore:og,useId:Eg,unstable_isNewReconciler:!1},dE={readContext:Sn,useCallback:_g,useContext:Sn,useEffect:Ih,useImperativeHandle:vg,useInsertionEffect:mg,useLayoutEffect:gg,useMemo:wg,useReducer:Th,useRef:fg,useState:function(){return Th(Qa)},useDebugValue:Sh,useDeferredValue:function(r){var i=bn();return St===null?i.memoizedState=r:xg(i,St.memoizedState,r)},useTransition:function(){var r=Th(Qa)[0],i=bn().memoizedState;return[r,i]},useMutableSource:ig,useSyncExternalStore:og,useId:Eg,unstable_isNewReconciler:!1};function Fn(r,i){if(r&&r.defaultProps){i=le({},i),r=r.defaultProps;for(var a in r)i[a]===void 0&&(i[a]=r[a]);return i}return i}function bh(r,i,a,d){i=r.memoizedState,a=a(d,i),a=a==null?i:le({},i,a),r.memoizedState=a,r.lanes===0&&(r.updateQueue.baseState=a)}var $u={isMounted:function(r){return(r=r._reactInternals)?Vn(r)===r:!1},enqueueSetState:function(r,i,a){r=r._reactInternals;var d=Xt(),f=Rs(r),g=Fr(d,f);g.payload=i,a!=null&&(g.callback=a),i=bs(r,g,f),i!==null&&(Bn(i,r,f,d),Vu(i,r,f))},enqueueReplaceState:function(r,i,a){r=r._reactInternals;var d=Xt(),f=Rs(r),g=Fr(d,f);g.tag=1,g.payload=i,a!=null&&(g.callback=a),i=bs(r,g,f),i!==null&&(Bn(i,r,f,d),Vu(i,r,f))},enqueueForceUpdate:function(r,i){r=r._reactInternals;var a=Xt(),d=Rs(r),f=Fr(a,d);f.tag=2,i!=null&&(f.callback=i),i=bs(r,f,d),i!==null&&(Bn(i,r,d,a),Vu(i,r,d))}};function bg(r,i,a,d,f,g,x){return r=r.stateNode,typeof r.shouldComponentUpdate=="function"?r.shouldComponentUpdate(d,g,x):i.prototype&&i.prototype.isPureReactComponent?!La(a,d)||!La(f,g):!0}function kg(r,i,a){var d=!1,f=Ts,g=i.contextType;return typeof g=="object"&&g!==null?g=Sn(g):(f=tn(i)?wi:Bt.current,d=i.contextTypes,g=(d=d!=null)?xo(r,f):Ts),i=new i(a,g),r.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,i.updater=$u,r.stateNode=i,i._reactInternals=r,d&&(r=r.stateNode,r.__reactInternalMemoizedUnmaskedChildContext=f,r.__reactInternalMemoizedMaskedChildContext=g),i}function Cg(r,i,a,d){r=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,d),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,d),i.state!==r&&$u.enqueueReplaceState(i,i.state,null)}function kh(r,i,a,d){var f=r.stateNode;f.props=a,f.state=r.memoizedState,f.refs={},fh(r);var g=i.contextType;typeof g=="object"&&g!==null?f.context=Sn(g):(g=tn(i)?wi:Bt.current,f.context=xo(r,g)),f.state=r.memoizedState,g=i.getDerivedStateFromProps,typeof g=="function"&&(bh(r,i,g,a),f.state=r.memoizedState),typeof i.getDerivedStateFromProps=="function"||typeof f.getSnapshotBeforeUpdate=="function"||typeof f.UNSAFE_componentWillMount!="function"&&typeof f.componentWillMount!="function"||(i=f.state,typeof f.componentWillMount=="function"&&f.componentWillMount(),typeof f.UNSAFE_componentWillMount=="function"&&f.UNSAFE_componentWillMount(),i!==f.state&&$u.enqueueReplaceState(f,f.state,null),Lu(r,a,f,d),f.state=r.memoizedState),typeof f.componentDidMount=="function"&&(r.flags|=4194308)}function Ao(r,i){try{var a="",d=i;do a+=je(d),d=d.return;while(d);var f=a}catch(g){f=`
Error generating stack: `+g.message+`
`+g.stack}return{value:r,source:i,stack:f,digest:null}}function Ch(r,i,a){return{value:r,source:null,stack:a??null,digest:i??null}}function Ah(r,i){try{console.error(i.value)}catch(a){setTimeout(function(){throw a})}}var hE=typeof WeakMap=="function"?WeakMap:Map;function Ag(r,i,a){a=Fr(-1,a),a.tag=3,a.payload={element:null};var d=i.value;return a.callback=function(){Yu||(Yu=!0,Hh=d),Ah(r,i)},a}function Rg(r,i,a){a=Fr(-1,a),a.tag=3;var d=r.type.getDerivedStateFromError;if(typeof d=="function"){var f=i.value;a.payload=function(){return d(f)},a.callback=function(){Ah(r,i)}}var g=r.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(a.callback=function(){Ah(r,i),typeof d!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var x=i.stack;this.componentDidCatch(i.value,{componentStack:x!==null?x:""})}),a}function Ng(r,i,a){var d=r.pingCache;if(d===null){d=r.pingCache=new hE;var f=new Set;d.set(i,f)}else f=d.get(i),f===void 0&&(f=new Set,d.set(i,f));f.has(a)||(f.add(a),r=bE.bind(null,r,i,a),i.then(r,r))}function Pg(r){do{var i;if((i=r.tag===13)&&(i=r.memoizedState,i=i!==null?i.dehydrated!==null:!0),i)return r;r=r.return}while(r!==null);return null}function Dg(r,i,a,d,f){return(r.mode&1)===0?(r===i?r.flags|=65536:(r.flags|=128,a.flags|=131072,a.flags&=-52805,a.tag===1&&(a.alternate===null?a.tag=17:(i=Fr(-1,1),i.tag=2,bs(a,i,1))),a.lanes|=1),r):(r.flags|=65536,r.lanes=f,r)}var fE=ae.ReactCurrentOwner,nn=!1;function Yt(r,i,a,d){i.child=r===null?Zm(i,null,a,d):So(i,r.child,a,d)}function jg(r,i,a,d,f){a=a.render;var g=i.ref;return ko(i,f),d=wh(r,i,a,d,g,f),a=xh(),r!==null&&!nn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~f,Ur(r,i,f)):(it&&a&&rh(i),i.flags|=1,Yt(r,i,d,f),i.child)}function Vg(r,i,a,d,f){if(r===null){var g=a.type;return typeof g=="function"&&!Xh(g)&&g.defaultProps===void 0&&a.compare===null&&a.defaultProps===void 0?(i.tag=15,i.type=g,Lg(r,i,g,d,f)):(r=nc(a.type,null,d,i,i.mode,f),r.ref=i.ref,r.return=i,i.child=r)}if(g=r.child,(r.lanes&f)===0){var x=g.memoizedProps;if(a=a.compare,a=a!==null?a:La,a(x,d)&&r.ref===i.ref)return Ur(r,i,f)}return i.flags|=1,r=Ps(g,d),r.ref=i.ref,r.return=i,i.child=r}function Lg(r,i,a,d,f){if(r!==null){var g=r.memoizedProps;if(La(g,d)&&r.ref===i.ref)if(nn=!1,i.pendingProps=d=g,(r.lanes&f)!==0)(r.flags&131072)!==0&&(nn=!0);else return i.lanes=r.lanes,Ur(r,i,f)}return Rh(r,i,a,d,f)}function Mg(r,i,a){var d=i.pendingProps,f=d.children,g=r!==null?r.memoizedState:null;if(d.mode==="hidden")if((i.mode&1)===0)i.memoizedState={baseLanes:0,cachePool:null,transitions:null},Je(No,_n),_n|=a;else{if((a&1073741824)===0)return r=g!==null?g.baseLanes|a:a,i.lanes=i.childLanes=1073741824,i.memoizedState={baseLanes:r,cachePool:null,transitions:null},i.updateQueue=null,Je(No,_n),_n|=r,null;i.memoizedState={baseLanes:0,cachePool:null,transitions:null},d=g!==null?g.baseLanes:a,Je(No,_n),_n|=d}else g!==null?(d=g.baseLanes|a,i.memoizedState=null):d=a,Je(No,_n),_n|=d;return Yt(r,i,f,a),i.child}function Og(r,i){var a=i.ref;(r===null&&a!==null||r!==null&&r.ref!==a)&&(i.flags|=512,i.flags|=2097152)}function Rh(r,i,a,d,f){var g=tn(a)?wi:Bt.current;return g=xo(i,g),ko(i,f),a=wh(r,i,a,d,g,f),d=xh(),r!==null&&!nn?(i.updateQueue=r.updateQueue,i.flags&=-2053,r.lanes&=~f,Ur(r,i,f)):(it&&d&&rh(i),i.flags|=1,Yt(r,i,a,f),i.child)}function Fg(r,i,a,d,f){if(tn(a)){var g=!0;ku(i)}else g=!1;if(ko(i,f),i.stateNode===null)Wu(r,i),kg(i,a,d),kh(i,a,d,f),d=!0;else if(r===null){var x=i.stateNode,A=i.memoizedProps;x.props=A;var L=x.context,q=a.contextType;typeof q=="object"&&q!==null?q=Sn(q):(q=tn(a)?wi:Bt.current,q=xo(i,q));var te=a.getDerivedStateFromProps,ne=typeof te=="function"||typeof x.getSnapshotBeforeUpdate=="function";ne||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==d||L!==q)&&Cg(i,x,d,q),Ss=!1;var ee=i.memoizedState;x.state=ee,Lu(i,d,x,f),L=i.memoizedState,A!==d||ee!==L||en.current||Ss?(typeof te=="function"&&(bh(i,a,te,d),L=i.memoizedState),(A=Ss||bg(i,a,A,d,ee,L,q))?(ne||typeof x.UNSAFE_componentWillMount!="function"&&typeof x.componentWillMount!="function"||(typeof x.componentWillMount=="function"&&x.componentWillMount(),typeof x.UNSAFE_componentWillMount=="function"&&x.UNSAFE_componentWillMount()),typeof x.componentDidMount=="function"&&(i.flags|=4194308)):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=d,i.memoizedState=L),x.props=d,x.state=L,x.context=q,d=A):(typeof x.componentDidMount=="function"&&(i.flags|=4194308),d=!1)}else{x=i.stateNode,tg(r,i),A=i.memoizedProps,q=i.type===i.elementType?A:Fn(i.type,A),x.props=q,ne=i.pendingProps,ee=x.context,L=a.contextType,typeof L=="object"&&L!==null?L=Sn(L):(L=tn(a)?wi:Bt.current,L=xo(i,L));var ue=a.getDerivedStateFromProps;(te=typeof ue=="function"||typeof x.getSnapshotBeforeUpdate=="function")||typeof x.UNSAFE_componentWillReceiveProps!="function"&&typeof x.componentWillReceiveProps!="function"||(A!==ne||ee!==L)&&Cg(i,x,d,L),Ss=!1,ee=i.memoizedState,x.state=ee,Lu(i,d,x,f);var pe=i.memoizedState;A!==ne||ee!==pe||en.current||Ss?(typeof ue=="function"&&(bh(i,a,ue,d),pe=i.memoizedState),(q=Ss||bg(i,a,q,d,ee,pe,L)||!1)?(te||typeof x.UNSAFE_componentWillUpdate!="function"&&typeof x.componentWillUpdate!="function"||(typeof x.componentWillUpdate=="function"&&x.componentWillUpdate(d,pe,L),typeof x.UNSAFE_componentWillUpdate=="function"&&x.UNSAFE_componentWillUpdate(d,pe,L)),typeof x.componentDidUpdate=="function"&&(i.flags|=4),typeof x.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof x.componentDidUpdate!="function"||A===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),i.memoizedProps=d,i.memoizedState=pe),x.props=d,x.state=pe,x.context=L,d=q):(typeof x.componentDidUpdate!="function"||A===r.memoizedProps&&ee===r.memoizedState||(i.flags|=4),typeof x.getSnapshotBeforeUpdate!="function"||A===r.memoizedProps&&ee===r.memoizedState||(i.flags|=1024),d=!1)}return Nh(r,i,a,d,g,f)}function Nh(r,i,a,d,f,g){Og(r,i);var x=(i.flags&128)!==0;if(!d&&!x)return f&&Hm(i,a,!1),Ur(r,i,g);d=i.stateNode,fE.current=i;var A=x&&typeof a.getDerivedStateFromError!="function"?null:d.render();return i.flags|=1,r!==null&&x?(i.child=So(i,r.child,null,g),i.child=So(i,null,A,g)):Yt(r,i,A,g),i.memoizedState=d.state,f&&Hm(i,a,!0),i.child}function Ug(r){var i=r.stateNode;i.pendingContext?Bm(r,i.pendingContext,i.pendingContext!==i.context):i.context&&Bm(r,i.context,!1),ph(r,i.containerInfo)}function zg(r,i,a,d,f){return Io(),ah(f),i.flags|=256,Yt(r,i,a,d),i.child}var Ph={dehydrated:null,treeContext:null,retryLane:0};function Dh(r){return{baseLanes:r,cachePool:null,transitions:null}}function Bg(r,i,a){var d=i.pendingProps,f=at.current,g=!1,x=(i.flags&128)!==0,A;if((A=x)||(A=r!==null&&r.memoizedState===null?!1:(f&2)!==0),A?(g=!0,i.flags&=-129):(r===null||r.memoizedState!==null)&&(f|=1),Je(at,f&1),r===null)return oh(i),r=i.memoizedState,r!==null&&(r=r.dehydrated,r!==null)?((i.mode&1)===0?i.lanes=1:r.data==="$!"?i.lanes=8:i.lanes=1073741824,null):(x=d.children,r=d.fallback,g?(d=i.mode,g=i.child,x={mode:"hidden",children:x},(d&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=x):g=rc(x,d,0,null),r=Ri(r,d,a,null),g.return=i,r.return=i,g.sibling=r,i.child=g,i.child.memoizedState=Dh(a),i.memoizedState=Ph,r):jh(i,x));if(f=r.memoizedState,f!==null&&(A=f.dehydrated,A!==null))return pE(r,i,x,d,A,f,a);if(g){g=d.fallback,x=i.mode,f=r.child,A=f.sibling;var L={mode:"hidden",children:d.children};return(x&1)===0&&i.child!==f?(d=i.child,d.childLanes=0,d.pendingProps=L,i.deletions=null):(d=Ps(f,L),d.subtreeFlags=f.subtreeFlags&14680064),A!==null?g=Ps(A,g):(g=Ri(g,x,a,null),g.flags|=2),g.return=i,d.return=i,d.sibling=g,i.child=d,d=g,g=i.child,x=r.child.memoizedState,x=x===null?Dh(a):{baseLanes:x.baseLanes|a,cachePool:null,transitions:x.transitions},g.memoizedState=x,g.childLanes=r.childLanes&~a,i.memoizedState=Ph,d}return g=r.child,r=g.sibling,d=Ps(g,{mode:"visible",children:d.children}),(i.mode&1)===0&&(d.lanes=a),d.return=i,d.sibling=null,r!==null&&(a=i.deletions,a===null?(i.deletions=[r],i.flags|=16):a.push(r)),i.child=d,i.memoizedState=null,d}function jh(r,i){return i=rc({mode:"visible",children:i},r.mode,0,null),i.return=r,r.child=i}function Hu(r,i,a,d){return d!==null&&ah(d),So(i,r.child,null,a),r=jh(i,i.pendingProps.children),r.flags|=2,i.memoizedState=null,r}function pE(r,i,a,d,f,g,x){if(a)return i.flags&256?(i.flags&=-257,d=Ch(Error(t(422))),Hu(r,i,x,d)):i.memoizedState!==null?(i.child=r.child,i.flags|=128,null):(g=d.fallback,f=i.mode,d=rc({mode:"visible",children:d.children},f,0,null),g=Ri(g,f,x,null),g.flags|=2,d.return=i,g.return=i,d.sibling=g,i.child=d,(i.mode&1)!==0&&So(i,r.child,null,x),i.child.memoizedState=Dh(x),i.memoizedState=Ph,g);if((i.mode&1)===0)return Hu(r,i,x,null);if(f.data==="$!"){if(d=f.nextSibling&&f.nextSibling.dataset,d)var A=d.dgst;return d=A,g=Error(t(419)),d=Ch(g,d,void 0),Hu(r,i,x,d)}if(A=(x&r.childLanes)!==0,nn||A){if(d=Nt,d!==null){switch(x&-x){case 4:f=2;break;case 16:f=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:f=32;break;case 536870912:f=268435456;break;default:f=0}f=(f&(d.suspendedLanes|x))!==0?0:f,f!==0&&f!==g.retryLane&&(g.retryLane=f,Or(r,f),Bn(d,r,f,-1))}return Yh(),d=Ch(Error(t(421))),Hu(r,i,x,d)}return f.data==="$?"?(i.flags|=128,i.child=r.child,i=kE.bind(null,r),f._reactRetry=i,null):(r=g.treeContext,vn=xs(f.nextSibling),yn=i,it=!0,On=null,r!==null&&(Tn[In++]=Lr,Tn[In++]=Mr,Tn[In++]=xi,Lr=r.id,Mr=r.overflow,xi=i),i=jh(i,d.children),i.flags|=4096,i)}function $g(r,i,a){r.lanes|=i;var d=r.alternate;d!==null&&(d.lanes|=i),dh(r.return,i,a)}function Vh(r,i,a,d,f){var g=r.memoizedState;g===null?r.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:d,tail:a,tailMode:f}:(g.isBackwards=i,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=a,g.tailMode=f)}function Hg(r,i,a){var d=i.pendingProps,f=d.revealOrder,g=d.tail;if(Yt(r,i,d.children,a),d=at.current,(d&2)!==0)d=d&1|2,i.flags|=128;else{if(r!==null&&(r.flags&128)!==0)e:for(r=i.child;r!==null;){if(r.tag===13)r.memoizedState!==null&&$g(r,a,i);else if(r.tag===19)$g(r,a,i);else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===i)break e;for(;r.sibling===null;){if(r.return===null||r.return===i)break e;r=r.return}r.sibling.return=r.return,r=r.sibling}d&=1}if(Je(at,d),(i.mode&1)===0)i.memoizedState=null;else switch(f){case"forwards":for(a=i.child,f=null;a!==null;)r=a.alternate,r!==null&&Mu(r)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Vh(i,!1,f,a,g);break;case"backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(r=f.alternate,r!==null&&Mu(r)===null){i.child=f;break}r=f.sibling,f.sibling=a,a=f,f=r}Vh(i,!0,a,null,g);break;case"together":Vh(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function Wu(r,i){(i.mode&1)===0&&r!==null&&(r.alternate=null,i.alternate=null,i.flags|=2)}function Ur(r,i,a){if(r!==null&&(i.dependencies=r.dependencies),bi|=i.lanes,(a&i.childLanes)===0)return null;if(r!==null&&i.child!==r.child)throw Error(t(153));if(i.child!==null){for(r=i.child,a=Ps(r,r.pendingProps),i.child=a,a.return=i;r.sibling!==null;)r=r.sibling,a=a.sibling=Ps(r,r.pendingProps),a.return=i;a.sibling=null}return i.child}function mE(r,i,a){switch(i.tag){case 3:Ug(i),Io();break;case 5:sg(i);break;case 1:tn(i.type)&&ku(i);break;case 4:ph(i,i.stateNode.containerInfo);break;case 10:var d=i.type._context,f=i.memoizedProps.value;Je(Du,d._currentValue),d._currentValue=f;break;case 13:if(d=i.memoizedState,d!==null)return d.dehydrated!==null?(Je(at,at.current&1),i.flags|=128,null):(a&i.child.childLanes)!==0?Bg(r,i,a):(Je(at,at.current&1),r=Ur(r,i,a),r!==null?r.sibling:null);Je(at,at.current&1);break;case 19:if(d=(a&i.childLanes)!==0,(r.flags&128)!==0){if(d)return Hg(r,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),Je(at,at.current),d)break;return null;case 22:case 23:return i.lanes=0,Mg(r,i,a)}return Ur(r,i,a)}var Wg,Lh,qg,Gg;Wg=function(r,i){for(var a=i.child;a!==null;){if(a.tag===5||a.tag===6)r.appendChild(a.stateNode);else if(a.tag!==4&&a.child!==null){a.child.return=a,a=a.child;continue}if(a===i)break;for(;a.sibling===null;){if(a.return===null||a.return===i)return;a=a.return}a.sibling.return=a.return,a=a.sibling}},Lh=function(){},qg=function(r,i,a,d){var f=r.memoizedProps;if(f!==d){r=i.stateNode,Ii(fr.current);var g=null;switch(a){case"input":f=qi(r,f),d=qi(r,d),g=[];break;case"select":f=le({},f,{value:void 0}),d=le({},d,{value:void 0}),g=[];break;case"textarea":f=da(r,f),d=da(r,d),g=[];break;default:typeof f.onClick!="function"&&typeof d.onClick=="function"&&(r.onclick=Iu)}jn(a,d);var x;a=null;for(q in f)if(!d.hasOwnProperty(q)&&f.hasOwnProperty(q)&&f[q]!=null)if(q==="style"){var A=f[q];for(x in A)A.hasOwnProperty(x)&&(a||(a={}),a[x]="")}else q!=="dangerouslySetInnerHTML"&&q!=="children"&&q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&q!=="autoFocus"&&(o.hasOwnProperty(q)?g||(g=[]):(g=g||[]).push(q,null));for(q in d){var L=d[q];if(A=f?.[q],d.hasOwnProperty(q)&&L!==A&&(L!=null||A!=null))if(q==="style")if(A){for(x in A)!A.hasOwnProperty(x)||L&&L.hasOwnProperty(x)||(a||(a={}),a[x]="");for(x in L)L.hasOwnProperty(x)&&A[x]!==L[x]&&(a||(a={}),a[x]=L[x])}else a||(g||(g=[]),g.push(q,a)),a=L;else q==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,A=A?A.__html:void 0,L!=null&&A!==L&&(g=g||[]).push(q,L)):q==="children"?typeof L!="string"&&typeof L!="number"||(g=g||[]).push(q,""+L):q!=="suppressContentEditableWarning"&&q!=="suppressHydrationWarning"&&(o.hasOwnProperty(q)?(L!=null&&q==="onScroll"&&tt("scroll",r),g||A===L||(g=[])):(g=g||[]).push(q,L))}a&&(g=g||[]).push("style",a);var q=g;(i.updateQueue=q)&&(i.flags|=4)}},Gg=function(r,i,a,d){a!==d&&(i.flags|=4)};function Xa(r,i){if(!it)switch(r.tailMode){case"hidden":i=r.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?r.tail=null:a.sibling=null;break;case"collapsed":a=r.tail;for(var d=null;a!==null;)a.alternate!==null&&(d=a),a=a.sibling;d===null?i||r.tail===null?r.tail=null:r.tail.sibling=null:d.sibling=null}}function Ht(r){var i=r.alternate!==null&&r.alternate.child===r.child,a=0,d=0;if(i)for(var f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags&14680064,d|=f.flags&14680064,f.return=r,f=f.sibling;else for(f=r.child;f!==null;)a|=f.lanes|f.childLanes,d|=f.subtreeFlags,d|=f.flags,f.return=r,f=f.sibling;return r.subtreeFlags|=d,r.childLanes=a,i}function gE(r,i,a){var d=i.pendingProps;switch(sh(i),i.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ht(i),null;case 1:return tn(i.type)&&bu(),Ht(i),null;case 3:return d=i.stateNode,Co(),nt(en),nt(Bt),yh(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(r===null||r.child===null)&&(Nu(i)?i.flags|=4:r===null||r.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,On!==null&&(Gh(On),On=null))),Lh(r,i),Ht(i),null;case 5:mh(i);var f=Ii(qa.current);if(a=i.type,r!==null&&i.stateNode!=null)qg(r,i,a,d,f),r.ref!==i.ref&&(i.flags|=512,i.flags|=2097152);else{if(!d){if(i.stateNode===null)throw Error(t(166));return Ht(i),null}if(r=Ii(fr.current),Nu(i)){d=i.stateNode,a=i.type;var g=i.memoizedProps;switch(d[hr]=i,d[za]=g,r=(i.mode&1)!==0,a){case"dialog":tt("cancel",d),tt("close",d);break;case"iframe":case"object":case"embed":tt("load",d);break;case"video":case"audio":for(f=0;f<Oa.length;f++)tt(Oa[f],d);break;case"source":tt("error",d);break;case"img":case"image":case"link":tt("error",d),tt("load",d);break;case"details":tt("toggle",d);break;case"input":Ql(d,g),tt("invalid",d);break;case"select":d._wrapperState={wasMultiple:!!g.multiple},tt("invalid",d);break;case"textarea":ha(d,g),tt("invalid",d)}jn(a,g),f=null;for(var x in g)if(g.hasOwnProperty(x)){var A=g[x];x==="children"?typeof A=="string"?d.textContent!==A&&(g.suppressHydrationWarning!==!0&&Tu(d.textContent,A,r),f=["children",A]):typeof A=="number"&&d.textContent!==""+A&&(g.suppressHydrationWarning!==!0&&Tu(d.textContent,A,r),f=["children",""+A]):o.hasOwnProperty(x)&&A!=null&&x==="onScroll"&&tt("scroll",d)}switch(a){case"input":Yn(d),ca(d,g,!0);break;case"textarea":Yn(d),is(d);break;case"select":case"option":break;default:typeof g.onClick=="function"&&(d.onclick=Iu)}d=f,i.updateQueue=d,d!==null&&(i.flags|=4)}else{x=f.nodeType===9?f:f.ownerDocument,r==="http://www.w3.org/1999/xhtml"&&(r=fa(a)),r==="http://www.w3.org/1999/xhtml"?a==="script"?(r=x.createElement("div"),r.innerHTML="<script><\/script>",r=r.removeChild(r.firstChild)):typeof d.is=="string"?r=x.createElement(a,{is:d.is}):(r=x.createElement(a),a==="select"&&(x=r,d.multiple?x.multiple=!0:d.size&&(x.size=d.size))):r=x.createElementNS(r,a),r[hr]=i,r[za]=d,Wg(r,i,!1,!1),i.stateNode=r;e:{switch(x=Yi(a,d),a){case"dialog":tt("cancel",r),tt("close",r),f=d;break;case"iframe":case"object":case"embed":tt("load",r),f=d;break;case"video":case"audio":for(f=0;f<Oa.length;f++)tt(Oa[f],r);f=d;break;case"source":tt("error",r),f=d;break;case"img":case"image":case"link":tt("error",r),tt("load",r),f=d;break;case"details":tt("toggle",r),f=d;break;case"input":Ql(r,d),f=qi(r,d),tt("invalid",r);break;case"option":f=d;break;case"select":r._wrapperState={wasMultiple:!!d.multiple},f=le({},d,{value:void 0}),tt("invalid",r);break;case"textarea":ha(r,d),f=da(r,d),tt("invalid",r);break;default:f=d}jn(a,f),A=f;for(g in A)if(A.hasOwnProperty(g)){var L=A[g];g==="style"?Qi(r,L):g==="dangerouslySetInnerHTML"?(L=L?L.__html:void 0,L!=null&&Xl(r,L)):g==="children"?typeof L=="string"?(a!=="textarea"||L!=="")&&ii(r,L):typeof L=="number"&&ii(r,""+L):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(o.hasOwnProperty(g)?L!=null&&g==="onScroll"&&tt("scroll",r):L!=null&&Y(r,g,L,x))}switch(a){case"input":Yn(r),ca(r,d,!1);break;case"textarea":Yn(r),is(r);break;case"option":d.value!=null&&r.setAttribute("value",""+Oe(d.value));break;case"select":r.multiple=!!d.multiple,g=d.value,g!=null?Dn(r,!!d.multiple,g,!1):d.defaultValue!=null&&Dn(r,!!d.multiple,d.defaultValue,!0);break;default:typeof f.onClick=="function"&&(r.onclick=Iu)}switch(a){case"button":case"input":case"select":case"textarea":d=!!d.autoFocus;break e;case"img":d=!0;break e;default:d=!1}}d&&(i.flags|=4)}i.ref!==null&&(i.flags|=512,i.flags|=2097152)}return Ht(i),null;case 6:if(r&&i.stateNode!=null)Gg(r,i,r.memoizedProps,d);else{if(typeof d!="string"&&i.stateNode===null)throw Error(t(166));if(a=Ii(qa.current),Ii(fr.current),Nu(i)){if(d=i.stateNode,a=i.memoizedProps,d[hr]=i,(g=d.nodeValue!==a)&&(r=yn,r!==null))switch(r.tag){case 3:Tu(d.nodeValue,a,(r.mode&1)!==0);break;case 5:r.memoizedProps.suppressHydrationWarning!==!0&&Tu(d.nodeValue,a,(r.mode&1)!==0)}g&&(i.flags|=4)}else d=(a.nodeType===9?a:a.ownerDocument).createTextNode(d),d[hr]=i,i.stateNode=d}return Ht(i),null;case 13:if(nt(at),d=i.memoizedState,r===null||r.memoizedState!==null&&r.memoizedState.dehydrated!==null){if(it&&vn!==null&&(i.mode&1)!==0&&(i.flags&128)===0)Ym(),Io(),i.flags|=98560,g=!1;else if(g=Nu(i),d!==null&&d.dehydrated!==null){if(r===null){if(!g)throw Error(t(318));if(g=i.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(t(317));g[hr]=i}else Io(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;Ht(i),g=!1}else On!==null&&(Gh(On),On=null),g=!0;if(!g)return i.flags&65536?i:null}return(i.flags&128)!==0?(i.lanes=a,i):(d=d!==null,d!==(r!==null&&r.memoizedState!==null)&&d&&(i.child.flags|=8192,(i.mode&1)!==0&&(r===null||(at.current&1)!==0?bt===0&&(bt=3):Yh())),i.updateQueue!==null&&(i.flags|=4),Ht(i),null);case 4:return Co(),Lh(r,i),r===null&&Fa(i.stateNode.containerInfo),Ht(i),null;case 10:return ch(i.type._context),Ht(i),null;case 17:return tn(i.type)&&bu(),Ht(i),null;case 19:if(nt(at),g=i.memoizedState,g===null)return Ht(i),null;if(d=(i.flags&128)!==0,x=g.rendering,x===null)if(d)Xa(g,!1);else{if(bt!==0||r!==null&&(r.flags&128)!==0)for(r=i.child;r!==null;){if(x=Mu(r),x!==null){for(i.flags|=128,Xa(g,!1),d=x.updateQueue,d!==null&&(i.updateQueue=d,i.flags|=4),i.subtreeFlags=0,d=a,a=i.child;a!==null;)g=a,r=d,g.flags&=14680066,x=g.alternate,x===null?(g.childLanes=0,g.lanes=r,g.child=null,g.subtreeFlags=0,g.memoizedProps=null,g.memoizedState=null,g.updateQueue=null,g.dependencies=null,g.stateNode=null):(g.childLanes=x.childLanes,g.lanes=x.lanes,g.child=x.child,g.subtreeFlags=0,g.deletions=null,g.memoizedProps=x.memoizedProps,g.memoizedState=x.memoizedState,g.updateQueue=x.updateQueue,g.type=x.type,r=x.dependencies,g.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext}),a=a.sibling;return Je(at,at.current&1|2),i.child}r=r.sibling}g.tail!==null&&et()>Po&&(i.flags|=128,d=!0,Xa(g,!1),i.lanes=4194304)}else{if(!d)if(r=Mu(x),r!==null){if(i.flags|=128,d=!0,a=r.updateQueue,a!==null&&(i.updateQueue=a,i.flags|=4),Xa(g,!0),g.tail===null&&g.tailMode==="hidden"&&!x.alternate&&!it)return Ht(i),null}else 2*et()-g.renderingStartTime>Po&&a!==1073741824&&(i.flags|=128,d=!0,Xa(g,!1),i.lanes=4194304);g.isBackwards?(x.sibling=i.child,i.child=x):(a=g.last,a!==null?a.sibling=x:i.child=x,g.last=x)}return g.tail!==null?(i=g.tail,g.rendering=i,g.tail=i.sibling,g.renderingStartTime=et(),i.sibling=null,a=at.current,Je(at,d?a&1|2:a&1),i):(Ht(i),null);case 22:case 23:return Qh(),d=i.memoizedState!==null,r!==null&&r.memoizedState!==null!==d&&(i.flags|=8192),d&&(i.mode&1)!==0?(_n&1073741824)!==0&&(Ht(i),i.subtreeFlags&6&&(i.flags|=8192)):Ht(i),null;case 24:return null;case 25:return null}throw Error(t(156,i.tag))}function yE(r,i){switch(sh(i),i.tag){case 1:return tn(i.type)&&bu(),r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 3:return Co(),nt(en),nt(Bt),yh(),r=i.flags,(r&65536)!==0&&(r&128)===0?(i.flags=r&-65537|128,i):null;case 5:return mh(i),null;case 13:if(nt(at),r=i.memoizedState,r!==null&&r.dehydrated!==null){if(i.alternate===null)throw Error(t(340));Io()}return r=i.flags,r&65536?(i.flags=r&-65537|128,i):null;case 19:return nt(at),null;case 4:return Co(),null;case 10:return ch(i.type._context),null;case 22:case 23:return Qh(),null;case 24:return null;default:return null}}var qu=!1,Wt=!1,vE=typeof WeakSet=="function"?WeakSet:Set,de=null;function Ro(r,i){var a=r.ref;if(a!==null)if(typeof a=="function")try{a(null)}catch(d){dt(r,i,d)}else a.current=null}function Mh(r,i,a){try{a()}catch(d){dt(r,i,d)}}var Kg=!1;function _E(r,i){if(Qd=Nr,r=bm(),zd(r)){if("selectionStart"in r)var a={start:r.selectionStart,end:r.selectionEnd};else e:{a=(a=r.ownerDocument)&&a.defaultView||window;var d=a.getSelection&&a.getSelection();if(d&&d.rangeCount!==0){a=d.anchorNode;var f=d.anchorOffset,g=d.focusNode;d=d.focusOffset;try{a.nodeType,g.nodeType}catch{a=null;break e}var x=0,A=-1,L=-1,q=0,te=0,ne=r,ee=null;t:for(;;){for(var ue;ne!==a||f!==0&&ne.nodeType!==3||(A=x+f),ne!==g||d!==0&&ne.nodeType!==3||(L=x+d),ne.nodeType===3&&(x+=ne.nodeValue.length),(ue=ne.firstChild)!==null;)ee=ne,ne=ue;for(;;){if(ne===r)break t;if(ee===a&&++q===f&&(A=x),ee===g&&++te===d&&(L=x),(ue=ne.nextSibling)!==null)break;ne=ee,ee=ne.parentNode}ne=ue}a=A===-1||L===-1?null:{start:A,end:L}}else a=null}a=a||{start:0,end:0}}else a=null;for(Yd={focusedElem:r,selectionRange:a},Nr=!1,de=i;de!==null;)if(i=de,r=i.child,(i.subtreeFlags&1028)!==0&&r!==null)r.return=i,de=r;else for(;de!==null;){i=de;try{var pe=i.alternate;if((i.flags&1024)!==0)switch(i.tag){case 0:case 11:case 15:break;case 1:if(pe!==null){var ye=pe.memoizedProps,gt=pe.memoizedState,B=i.stateNode,M=B.getSnapshotBeforeUpdate(i.elementType===i.type?ye:Fn(i.type,ye),gt);B.__reactInternalSnapshotBeforeUpdate=M}break;case 3:var W=i.stateNode.containerInfo;W.nodeType===1?W.textContent="":W.nodeType===9&&W.documentElement&&W.removeChild(W.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){dt(i,i.return,re)}if(r=i.sibling,r!==null){r.return=i.return,de=r;break}de=i.return}return pe=Kg,Kg=!1,pe}function Ja(r,i,a){var d=i.updateQueue;if(d=d!==null?d.lastEffect:null,d!==null){var f=d=d.next;do{if((f.tag&r)===r){var g=f.destroy;f.destroy=void 0,g!==void 0&&Mh(i,a,g)}f=f.next}while(f!==d)}}function Gu(r,i){if(i=i.updateQueue,i=i!==null?i.lastEffect:null,i!==null){var a=i=i.next;do{if((a.tag&r)===r){var d=a.create;a.destroy=d()}a=a.next}while(a!==i)}}function Oh(r){var i=r.ref;if(i!==null){var a=r.stateNode;switch(r.tag){case 5:r=a;break;default:r=a}typeof i=="function"?i(r):i.current=r}}function Qg(r){var i=r.alternate;i!==null&&(r.alternate=null,Qg(i)),r.child=null,r.deletions=null,r.sibling=null,r.tag===5&&(i=r.stateNode,i!==null&&(delete i[hr],delete i[za],delete i[eh],delete i[tE],delete i[nE])),r.stateNode=null,r.return=null,r.dependencies=null,r.memoizedProps=null,r.memoizedState=null,r.pendingProps=null,r.stateNode=null,r.updateQueue=null}function Yg(r){return r.tag===5||r.tag===3||r.tag===4}function Xg(r){e:for(;;){for(;r.sibling===null;){if(r.return===null||Yg(r.return))return null;r=r.return}for(r.sibling.return=r.return,r=r.sibling;r.tag!==5&&r.tag!==6&&r.tag!==18;){if(r.flags&2||r.child===null||r.tag===4)continue e;r.child.return=r,r=r.child}if(!(r.flags&2))return r.stateNode}}function Fh(r,i,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?a.nodeType===8?a.parentNode.insertBefore(r,i):a.insertBefore(r,i):(a.nodeType===8?(i=a.parentNode,i.insertBefore(r,a)):(i=a,i.appendChild(r)),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=Iu));else if(d!==4&&(r=r.child,r!==null))for(Fh(r,i,a),r=r.sibling;r!==null;)Fh(r,i,a),r=r.sibling}function Uh(r,i,a){var d=r.tag;if(d===5||d===6)r=r.stateNode,i?a.insertBefore(r,i):a.appendChild(r);else if(d!==4&&(r=r.child,r!==null))for(Uh(r,i,a),r=r.sibling;r!==null;)Uh(r,i,a),r=r.sibling}var Lt=null,Un=!1;function ks(r,i,a){for(a=a.child;a!==null;)Jg(r,i,a),a=a.sibling}function Jg(r,i,a){if(dn&&typeof dn.onCommitFiberUnmount=="function")try{dn.onCommitFiberUnmount(ci,a)}catch{}switch(a.tag){case 5:Wt||Ro(a,i);case 6:var d=Lt,f=Un;Lt=null,ks(r,i,a),Lt=d,Un=f,Lt!==null&&(Un?(r=Lt,a=a.stateNode,r.nodeType===8?r.parentNode.removeChild(a):r.removeChild(a)):Lt.removeChild(a.stateNode));break;case 18:Lt!==null&&(Un?(r=Lt,a=a.stateNode,r.nodeType===8?Zd(r.parentNode,a):r.nodeType===1&&Zd(r,a),ys(r)):Zd(Lt,a.stateNode));break;case 4:d=Lt,f=Un,Lt=a.stateNode.containerInfo,Un=!0,ks(r,i,a),Lt=d,Un=f;break;case 0:case 11:case 14:case 15:if(!Wt&&(d=a.updateQueue,d!==null&&(d=d.lastEffect,d!==null))){f=d=d.next;do{var g=f,x=g.destroy;g=g.tag,x!==void 0&&((g&2)!==0||(g&4)!==0)&&Mh(a,i,x),f=f.next}while(f!==d)}ks(r,i,a);break;case 1:if(!Wt&&(Ro(a,i),d=a.stateNode,typeof d.componentWillUnmount=="function"))try{d.props=a.memoizedProps,d.state=a.memoizedState,d.componentWillUnmount()}catch(A){dt(a,i,A)}ks(r,i,a);break;case 21:ks(r,i,a);break;case 22:a.mode&1?(Wt=(d=Wt)||a.memoizedState!==null,ks(r,i,a),Wt=d):ks(r,i,a);break;default:ks(r,i,a)}}function Zg(r){var i=r.updateQueue;if(i!==null){r.updateQueue=null;var a=r.stateNode;a===null&&(a=r.stateNode=new vE),i.forEach(function(d){var f=CE.bind(null,r,d);a.has(d)||(a.add(d),d.then(f,f))})}}function zn(r,i){var a=i.deletions;if(a!==null)for(var d=0;d<a.length;d++){var f=a[d];try{var g=r,x=i,A=x;e:for(;A!==null;){switch(A.tag){case 5:Lt=A.stateNode,Un=!1;break e;case 3:Lt=A.stateNode.containerInfo,Un=!0;break e;case 4:Lt=A.stateNode.containerInfo,Un=!0;break e}A=A.return}if(Lt===null)throw Error(t(160));Jg(g,x,f),Lt=null,Un=!1;var L=f.alternate;L!==null&&(L.return=null),f.return=null}catch(q){dt(f,i,q)}}if(i.subtreeFlags&12854)for(i=i.child;i!==null;)ey(i,r),i=i.sibling}function ey(r,i){var a=r.alternate,d=r.flags;switch(r.tag){case 0:case 11:case 14:case 15:if(zn(i,r),mr(r),d&4){try{Ja(3,r,r.return),Gu(3,r)}catch(ye){dt(r,r.return,ye)}try{Ja(5,r,r.return)}catch(ye){dt(r,r.return,ye)}}break;case 1:zn(i,r),mr(r),d&512&&a!==null&&Ro(a,a.return);break;case 5:if(zn(i,r),mr(r),d&512&&a!==null&&Ro(a,a.return),r.flags&32){var f=r.stateNode;try{ii(f,"")}catch(ye){dt(r,r.return,ye)}}if(d&4&&(f=r.stateNode,f!=null)){var g=r.memoizedProps,x=a!==null?a.memoizedProps:g,A=r.type,L=r.updateQueue;if(r.updateQueue=null,L!==null)try{A==="input"&&g.type==="radio"&&g.name!=null&&Gi(f,g),Yi(A,x);var q=Yi(A,g);for(x=0;x<L.length;x+=2){var te=L[x],ne=L[x+1];te==="style"?Qi(f,ne):te==="dangerouslySetInnerHTML"?Xl(f,ne):te==="children"?ii(f,ne):Y(f,te,ne,q)}switch(A){case"input":si(f,g);break;case"textarea":Yl(f,g);break;case"select":var ee=f._wrapperState.wasMultiple;f._wrapperState.wasMultiple=!!g.multiple;var ue=g.value;ue!=null?Dn(f,!!g.multiple,ue,!1):ee!==!!g.multiple&&(g.defaultValue!=null?Dn(f,!!g.multiple,g.defaultValue,!0):Dn(f,!!g.multiple,g.multiple?[]:"",!1))}f[za]=g}catch(ye){dt(r,r.return,ye)}}break;case 6:if(zn(i,r),mr(r),d&4){if(r.stateNode===null)throw Error(t(162));f=r.stateNode,g=r.memoizedProps;try{f.nodeValue=g}catch(ye){dt(r,r.return,ye)}}break;case 3:if(zn(i,r),mr(r),d&4&&a!==null&&a.memoizedState.isDehydrated)try{ys(i.containerInfo)}catch(ye){dt(r,r.return,ye)}break;case 4:zn(i,r),mr(r);break;case 13:zn(i,r),mr(r),f=r.child,f.flags&8192&&(g=f.memoizedState!==null,f.stateNode.isHidden=g,!g||f.alternate!==null&&f.alternate.memoizedState!==null||($h=et())),d&4&&Zg(r);break;case 22:if(te=a!==null&&a.memoizedState!==null,r.mode&1?(Wt=(q=Wt)||te,zn(i,r),Wt=q):zn(i,r),mr(r),d&8192){if(q=r.memoizedState!==null,(r.stateNode.isHidden=q)&&!te&&(r.mode&1)!==0)for(de=r,te=r.child;te!==null;){for(ne=de=te;de!==null;){switch(ee=de,ue=ee.child,ee.tag){case 0:case 11:case 14:case 15:Ja(4,ee,ee.return);break;case 1:Ro(ee,ee.return);var pe=ee.stateNode;if(typeof pe.componentWillUnmount=="function"){d=ee,a=ee.return;try{i=d,pe.props=i.memoizedProps,pe.state=i.memoizedState,pe.componentWillUnmount()}catch(ye){dt(d,a,ye)}}break;case 5:Ro(ee,ee.return);break;case 22:if(ee.memoizedState!==null){ry(ne);continue}}ue!==null?(ue.return=ee,de=ue):ry(ne)}te=te.sibling}e:for(te=null,ne=r;;){if(ne.tag===5){if(te===null){te=ne;try{f=ne.stateNode,q?(g=f.style,typeof g.setProperty=="function"?g.setProperty("display","none","important"):g.display="none"):(A=ne.stateNode,L=ne.memoizedProps.style,x=L!=null&&L.hasOwnProperty("display")?L.display:null,A.style.display=ls("display",x))}catch(ye){dt(r,r.return,ye)}}}else if(ne.tag===6){if(te===null)try{ne.stateNode.nodeValue=q?"":ne.memoizedProps}catch(ye){dt(r,r.return,ye)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===r)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===r)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===r)break e;te===ne&&(te=null),ne=ne.return}te===ne&&(te=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:zn(i,r),mr(r),d&4&&Zg(r);break;case 21:break;default:zn(i,r),mr(r)}}function mr(r){var i=r.flags;if(i&2){try{e:{for(var a=r.return;a!==null;){if(Yg(a)){var d=a;break e}a=a.return}throw Error(t(160))}switch(d.tag){case 5:var f=d.stateNode;d.flags&32&&(ii(f,""),d.flags&=-33);var g=Xg(r);Uh(r,g,f);break;case 3:case 4:var x=d.stateNode.containerInfo,A=Xg(r);Fh(r,A,x);break;default:throw Error(t(161))}}catch(L){dt(r,r.return,L)}r.flags&=-3}i&4096&&(r.flags&=-4097)}function wE(r,i,a){de=r,ty(r)}function ty(r,i,a){for(var d=(r.mode&1)!==0;de!==null;){var f=de,g=f.child;if(f.tag===22&&d){var x=f.memoizedState!==null||qu;if(!x){var A=f.alternate,L=A!==null&&A.memoizedState!==null||Wt;A=qu;var q=Wt;if(qu=x,(Wt=L)&&!q)for(de=f;de!==null;)x=de,L=x.child,x.tag===22&&x.memoizedState!==null?sy(f):L!==null?(L.return=x,de=L):sy(f);for(;g!==null;)de=g,ty(g),g=g.sibling;de=f,qu=A,Wt=q}ny(r)}else(f.subtreeFlags&8772)!==0&&g!==null?(g.return=f,de=g):ny(r)}}function ny(r){for(;de!==null;){var i=de;if((i.flags&8772)!==0){var a=i.alternate;try{if((i.flags&8772)!==0)switch(i.tag){case 0:case 11:case 15:Wt||Gu(5,i);break;case 1:var d=i.stateNode;if(i.flags&4&&!Wt)if(a===null)d.componentDidMount();else{var f=i.elementType===i.type?a.memoizedProps:Fn(i.type,a.memoizedProps);d.componentDidUpdate(f,a.memoizedState,d.__reactInternalSnapshotBeforeUpdate)}var g=i.updateQueue;g!==null&&rg(i,g,d);break;case 3:var x=i.updateQueue;if(x!==null){if(a=null,i.child!==null)switch(i.child.tag){case 5:a=i.child.stateNode;break;case 1:a=i.child.stateNode}rg(i,x,a)}break;case 5:var A=i.stateNode;if(a===null&&i.flags&4){a=A;var L=i.memoizedProps;switch(i.type){case"button":case"input":case"select":case"textarea":L.autoFocus&&a.focus();break;case"img":L.src&&(a.src=L.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(i.memoizedState===null){var q=i.alternate;if(q!==null){var te=q.memoizedState;if(te!==null){var ne=te.dehydrated;ne!==null&&ys(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Wt||i.flags&512&&Oh(i)}catch(ee){dt(i,i.return,ee)}}if(i===r){de=null;break}if(a=i.sibling,a!==null){a.return=i.return,de=a;break}de=i.return}}function ry(r){for(;de!==null;){var i=de;if(i===r){de=null;break}var a=i.sibling;if(a!==null){a.return=i.return,de=a;break}de=i.return}}function sy(r){for(;de!==null;){var i=de;try{switch(i.tag){case 0:case 11:case 15:var a=i.return;try{Gu(4,i)}catch(L){dt(i,a,L)}break;case 1:var d=i.stateNode;if(typeof d.componentDidMount=="function"){var f=i.return;try{d.componentDidMount()}catch(L){dt(i,f,L)}}var g=i.return;try{Oh(i)}catch(L){dt(i,g,L)}break;case 5:var x=i.return;try{Oh(i)}catch(L){dt(i,x,L)}}}catch(L){dt(i,i.return,L)}if(i===r){de=null;break}var A=i.sibling;if(A!==null){A.return=i.return,de=A;break}de=i.return}}var xE=Math.ceil,Ku=ae.ReactCurrentDispatcher,zh=ae.ReactCurrentOwner,kn=ae.ReactCurrentBatchConfig,He=0,Nt=null,xt=null,Mt=0,_n=0,No=Es(0),bt=0,Za=null,bi=0,Qu=0,Bh=0,el=null,rn=null,$h=0,Po=1/0,zr=null,Yu=!1,Hh=null,Cs=null,Xu=!1,As=null,Ju=0,tl=0,Wh=null,Zu=-1,ec=0;function Xt(){return(He&6)!==0?et():Zu!==-1?Zu:Zu=et()}function Rs(r){return(r.mode&1)===0?1:(He&2)!==0&&Mt!==0?Mt&-Mt:sE.transition!==null?(ec===0&&(ec=Ea()),ec):(r=Be,r!==0||(r=window.event,r=r===void 0?16:oo(r.type)),r)}function Bn(r,i,a,d){if(50<tl)throw tl=0,Wh=null,Error(t(185));pi(r,a,d),((He&2)===0||r!==Nt)&&(r===Nt&&((He&2)===0&&(Qu|=a),bt===4&&Ns(r,Mt)),sn(r,d),a===1&&He===0&&(i.mode&1)===0&&(Po=et()+500,Cu&&Is()))}function sn(r,i){var a=r.callbackNode;fi(r,i);var d=Cr(r,r===Nt?Mt:0);if(d===0)a!==null&&Zi(a),r.callbackNode=null,r.callbackPriority=0;else if(i=d&-d,r.callbackPriority!==i){if(a!=null&&Zi(a),i===1)r.tag===0?rE(oy.bind(null,r)):Wm(oy.bind(null,r)),Zx(function(){(He&6)===0&&Is()}),a=null;else{switch(nr(d)){case 1:a=eo;break;case 4:a=_a;break;case 16:a=ui;break;case 536870912:a=to;break;default:a=ui}a=py(a,iy.bind(null,r))}r.callbackPriority=i,r.callbackNode=a}}function iy(r,i){if(Zu=-1,ec=0,(He&6)!==0)throw Error(t(327));var a=r.callbackNode;if(Do()&&r.callbackNode!==a)return null;var d=Cr(r,r===Nt?Mt:0);if(d===0)return null;if((d&30)!==0||(d&r.expiredLanes)!==0||i)i=tc(r,d);else{i=d;var f=He;He|=2;var g=ly();(Nt!==r||Mt!==i)&&(zr=null,Po=et()+500,Ci(r,i));do try{IE();break}catch(A){ay(r,A)}while(!0);uh(),Ku.current=g,He=f,xt!==null?i=0:(Nt=null,Mt=0,i=bt)}if(i!==0){if(i===2&&(f=xa(r),f!==0&&(d=f,i=qh(r,f))),i===1)throw a=Za,Ci(r,0),Ns(r,d),sn(r,et()),a;if(i===6)Ns(r,d);else{if(f=r.current.alternate,(d&30)===0&&!EE(f)&&(i=tc(r,d),i===2&&(g=xa(r),g!==0&&(d=g,i=qh(r,g))),i===1))throw a=Za,Ci(r,0),Ns(r,d),sn(r,et()),a;switch(r.finishedWork=f,r.finishedLanes=d,i){case 0:case 1:throw Error(t(345));case 2:Ai(r,rn,zr);break;case 3:if(Ns(r,d),(d&130023424)===d&&(i=$h+500-et(),10<i)){if(Cr(r,0)!==0)break;if(f=r.suspendedLanes,(f&d)!==d){Xt(),r.pingedLanes|=r.suspendedLanes&f;break}r.timeoutHandle=Jd(Ai.bind(null,r,rn,zr),i);break}Ai(r,rn,zr);break;case 4:if(Ns(r,d),(d&4194240)===d)break;for(i=r.eventTimes,f=-1;0<d;){var x=31-hn(d);g=1<<x,x=i[x],x>f&&(f=x),d&=~g}if(d=f,d=et()-d,d=(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3e3>d?3e3:4320>d?4320:1960*xE(d/1960))-d,10<d){r.timeoutHandle=Jd(Ai.bind(null,r,rn,zr),d);break}Ai(r,rn,zr);break;case 5:Ai(r,rn,zr);break;default:throw Error(t(329))}}}return sn(r,et()),r.callbackNode===a?iy.bind(null,r):null}function qh(r,i){var a=el;return r.current.memoizedState.isDehydrated&&(Ci(r,i).flags|=256),r=tc(r,i),r!==2&&(i=rn,rn=a,i!==null&&Gh(i)),r}function Gh(r){rn===null?rn=r:rn.push.apply(rn,r)}function EE(r){for(var i=r;;){if(i.flags&16384){var a=i.updateQueue;if(a!==null&&(a=a.stores,a!==null))for(var d=0;d<a.length;d++){var f=a[d],g=f.getSnapshot;f=f.value;try{if(!Mn(g(),f))return!1}catch{return!1}}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Ns(r,i){for(i&=~Bh,i&=~Qu,r.suspendedLanes|=i,r.pingedLanes&=~i,r=r.expirationTimes;0<i;){var a=31-hn(i),d=1<<a;r[a]=-1,i&=~d}}function oy(r){if((He&6)!==0)throw Error(t(327));Do();var i=Cr(r,0);if((i&1)===0)return sn(r,et()),null;var a=tc(r,i);if(r.tag!==0&&a===2){var d=xa(r);d!==0&&(i=d,a=qh(r,d))}if(a===1)throw a=Za,Ci(r,0),Ns(r,i),sn(r,et()),a;if(a===6)throw Error(t(345));return r.finishedWork=r.current.alternate,r.finishedLanes=i,Ai(r,rn,zr),sn(r,et()),null}function Kh(r,i){var a=He;He|=1;try{return r(i)}finally{He=a,He===0&&(Po=et()+500,Cu&&Is())}}function ki(r){As!==null&&As.tag===0&&(He&6)===0&&Do();var i=He;He|=1;var a=kn.transition,d=Be;try{if(kn.transition=null,Be=1,r)return r()}finally{Be=d,kn.transition=a,He=i,(He&6)===0&&Is()}}function Qh(){_n=No.current,nt(No)}function Ci(r,i){r.finishedWork=null,r.finishedLanes=0;var a=r.timeoutHandle;if(a!==-1&&(r.timeoutHandle=-1,Jx(a)),xt!==null)for(a=xt.return;a!==null;){var d=a;switch(sh(d),d.tag){case 1:d=d.type.childContextTypes,d!=null&&bu();break;case 3:Co(),nt(en),nt(Bt),yh();break;case 5:mh(d);break;case 4:Co();break;case 13:nt(at);break;case 19:nt(at);break;case 10:ch(d.type._context);break;case 22:case 23:Qh()}a=a.return}if(Nt=r,xt=r=Ps(r.current,null),Mt=_n=i,bt=0,Za=null,Bh=Qu=bi=0,rn=el=null,Ti!==null){for(i=0;i<Ti.length;i++)if(a=Ti[i],d=a.interleaved,d!==null){a.interleaved=null;var f=d.next,g=a.pending;if(g!==null){var x=g.next;g.next=f,d.next=x}a.pending=d}Ti=null}return r}function ay(r,i){do{var a=xt;try{if(uh(),Ou.current=Bu,Fu){for(var d=lt.memoizedState;d!==null;){var f=d.queue;f!==null&&(f.pending=null),d=d.next}Fu=!1}if(Si=0,Rt=St=lt=null,Ga=!1,Ka=0,zh.current=null,a===null||a.return===null){bt=1,Za=i,xt=null;break}e:{var g=r,x=a.return,A=a,L=i;if(i=Mt,A.flags|=32768,L!==null&&typeof L=="object"&&typeof L.then=="function"){var q=L,te=A,ne=te.tag;if((te.mode&1)===0&&(ne===0||ne===11||ne===15)){var ee=te.alternate;ee?(te.updateQueue=ee.updateQueue,te.memoizedState=ee.memoizedState,te.lanes=ee.lanes):(te.updateQueue=null,te.memoizedState=null)}var ue=Pg(x);if(ue!==null){ue.flags&=-257,Dg(ue,x,A,g,i),ue.mode&1&&Ng(g,q,i),i=ue,L=q;var pe=i.updateQueue;if(pe===null){var ye=new Set;ye.add(L),i.updateQueue=ye}else pe.add(L);break e}else{if((i&1)===0){Ng(g,q,i),Yh();break e}L=Error(t(426))}}else if(it&&A.mode&1){var gt=Pg(x);if(gt!==null){(gt.flags&65536)===0&&(gt.flags|=256),Dg(gt,x,A,g,i),ah(Ao(L,A));break e}}g=L=Ao(L,A),bt!==4&&(bt=2),el===null?el=[g]:el.push(g),g=x;do{switch(g.tag){case 3:g.flags|=65536,i&=-i,g.lanes|=i;var B=Ag(g,L,i);ng(g,B);break e;case 1:A=L;var M=g.type,W=g.stateNode;if((g.flags&128)===0&&(typeof M.getDerivedStateFromError=="function"||W!==null&&typeof W.componentDidCatch=="function"&&(Cs===null||!Cs.has(W)))){g.flags|=65536,i&=-i,g.lanes|=i;var re=Rg(g,A,i);ng(g,re);break e}}g=g.return}while(g!==null)}cy(a)}catch(ve){i=ve,xt===a&&a!==null&&(xt=a=a.return);continue}break}while(!0)}function ly(){var r=Ku.current;return Ku.current=Bu,r===null?Bu:r}function Yh(){(bt===0||bt===3||bt===2)&&(bt=4),Nt===null||(bi&268435455)===0&&(Qu&268435455)===0||Ns(Nt,Mt)}function tc(r,i){var a=He;He|=2;var d=ly();(Nt!==r||Mt!==i)&&(zr=null,Ci(r,i));do try{TE();break}catch(f){ay(r,f)}while(!0);if(uh(),He=a,Ku.current=d,xt!==null)throw Error(t(261));return Nt=null,Mt=0,bt}function TE(){for(;xt!==null;)uy(xt)}function IE(){for(;xt!==null&&!li();)uy(xt)}function uy(r){var i=fy(r.alternate,r,_n);r.memoizedProps=r.pendingProps,i===null?cy(r):xt=i,zh.current=null}function cy(r){var i=r;do{var a=i.alternate;if(r=i.return,(i.flags&32768)===0){if(a=gE(a,i,_n),a!==null){xt=a;return}}else{if(a=yE(a,i),a!==null){a.flags&=32767,xt=a;return}if(r!==null)r.flags|=32768,r.subtreeFlags=0,r.deletions=null;else{bt=6,xt=null;return}}if(i=i.sibling,i!==null){xt=i;return}xt=i=r}while(i!==null);bt===0&&(bt=5)}function Ai(r,i,a){var d=Be,f=kn.transition;try{kn.transition=null,Be=1,SE(r,i,a,d)}finally{kn.transition=f,Be=d}return null}function SE(r,i,a,d){do Do();while(As!==null);if((He&6)!==0)throw Error(t(327));a=r.finishedWork;var f=r.finishedLanes;if(a===null)return null;if(r.finishedWork=null,r.finishedLanes=0,a===r.current)throw Error(t(177));r.callbackNode=null,r.callbackPriority=0;var g=a.lanes|a.childLanes;if(Ld(r,g),r===Nt&&(xt=Nt=null,Mt=0),(a.subtreeFlags&2064)===0&&(a.flags&2064)===0||Xu||(Xu=!0,py(ui,function(){return Do(),null})),g=(a.flags&15990)!==0,(a.subtreeFlags&15990)!==0||g){g=kn.transition,kn.transition=null;var x=Be;Be=1;var A=He;He|=4,zh.current=null,_E(r,a),ey(a,r),Wx(Yd),Nr=!!Qd,Yd=Qd=null,r.current=a,wE(a),kr(),He=A,Be=x,kn.transition=g}else r.current=a;if(Xu&&(Xu=!1,As=r,Ju=f),g=r.pendingLanes,g===0&&(Cs=null),lu(a.stateNode),sn(r,et()),i!==null)for(d=r.onRecoverableError,a=0;a<i.length;a++)f=i[a],d(f.value,{componentStack:f.stack,digest:f.digest});if(Yu)throw Yu=!1,r=Hh,Hh=null,r;return(Ju&1)!==0&&r.tag!==0&&Do(),g=r.pendingLanes,(g&1)!==0?r===Wh?tl++:(tl=0,Wh=r):tl=0,Is(),null}function Do(){if(As!==null){var r=nr(Ju),i=kn.transition,a=Be;try{if(kn.transition=null,Be=16>r?16:r,As===null)var d=!1;else{if(r=As,As=null,Ju=0,(He&6)!==0)throw Error(t(331));var f=He;for(He|=4,de=r.current;de!==null;){var g=de,x=g.child;if((de.flags&16)!==0){var A=g.deletions;if(A!==null){for(var L=0;L<A.length;L++){var q=A[L];for(de=q;de!==null;){var te=de;switch(te.tag){case 0:case 11:case 15:Ja(8,te,g)}var ne=te.child;if(ne!==null)ne.return=te,de=ne;else for(;de!==null;){te=de;var ee=te.sibling,ue=te.return;if(Qg(te),te===q){de=null;break}if(ee!==null){ee.return=ue,de=ee;break}de=ue}}}var pe=g.alternate;if(pe!==null){var ye=pe.child;if(ye!==null){pe.child=null;do{var gt=ye.sibling;ye.sibling=null,ye=gt}while(ye!==null)}}de=g}}if((g.subtreeFlags&2064)!==0&&x!==null)x.return=g,de=x;else e:for(;de!==null;){if(g=de,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:Ja(9,g,g.return)}var B=g.sibling;if(B!==null){B.return=g.return,de=B;break e}de=g.return}}var M=r.current;for(de=M;de!==null;){x=de;var W=x.child;if((x.subtreeFlags&2064)!==0&&W!==null)W.return=x,de=W;else e:for(x=M;de!==null;){if(A=de,(A.flags&2048)!==0)try{switch(A.tag){case 0:case 11:case 15:Gu(9,A)}}catch(ve){dt(A,A.return,ve)}if(A===x){de=null;break e}var re=A.sibling;if(re!==null){re.return=A.return,de=re;break e}de=A.return}}if(He=f,Is(),dn&&typeof dn.onPostCommitFiberRoot=="function")try{dn.onPostCommitFiberRoot(ci,r)}catch{}d=!0}return d}finally{Be=a,kn.transition=i}}return!1}function dy(r,i,a){i=Ao(a,i),i=Ag(r,i,1),r=bs(r,i,1),i=Xt(),r!==null&&(pi(r,1,i),sn(r,i))}function dt(r,i,a){if(r.tag===3)dy(r,r,a);else for(;i!==null;){if(i.tag===3){dy(i,r,a);break}else if(i.tag===1){var d=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof d.componentDidCatch=="function"&&(Cs===null||!Cs.has(d))){r=Ao(a,r),r=Rg(i,r,1),i=bs(i,r,1),r=Xt(),i!==null&&(pi(i,1,r),sn(i,r));break}}i=i.return}}function bE(r,i,a){var d=r.pingCache;d!==null&&d.delete(i),i=Xt(),r.pingedLanes|=r.suspendedLanes&a,Nt===r&&(Mt&a)===a&&(bt===4||bt===3&&(Mt&130023424)===Mt&&500>et()-$h?Ci(r,0):Bh|=a),sn(r,i)}function hy(r,i){i===0&&((r.mode&1)===0?i=1:(i=ps,ps<<=1,(ps&130023424)===0&&(ps=4194304)));var a=Xt();r=Or(r,i),r!==null&&(pi(r,i,a),sn(r,a))}function kE(r){var i=r.memoizedState,a=0;i!==null&&(a=i.retryLane),hy(r,a)}function CE(r,i){var a=0;switch(r.tag){case 13:var d=r.stateNode,f=r.memoizedState;f!==null&&(a=f.retryLane);break;case 19:d=r.stateNode;break;default:throw Error(t(314))}d!==null&&d.delete(i),hy(r,a)}var fy;fy=function(r,i,a){if(r!==null)if(r.memoizedProps!==i.pendingProps||en.current)nn=!0;else{if((r.lanes&a)===0&&(i.flags&128)===0)return nn=!1,mE(r,i,a);nn=(r.flags&131072)!==0}else nn=!1,it&&(i.flags&1048576)!==0&&qm(i,Ru,i.index);switch(i.lanes=0,i.tag){case 2:var d=i.type;Wu(r,i),r=i.pendingProps;var f=xo(i,Bt.current);ko(i,a),f=wh(null,i,d,r,f,a);var g=xh();return i.flags|=1,typeof f=="object"&&f!==null&&typeof f.render=="function"&&f.$$typeof===void 0?(i.tag=1,i.memoizedState=null,i.updateQueue=null,tn(d)?(g=!0,ku(i)):g=!1,i.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,fh(i),f.updater=$u,i.stateNode=f,f._reactInternals=i,kh(i,d,r,a),i=Nh(null,i,d,!0,g,a)):(i.tag=0,it&&g&&rh(i),Yt(null,i,f,a),i=i.child),i;case 16:d=i.elementType;e:{switch(Wu(r,i),r=i.pendingProps,f=d._init,d=f(d._payload),i.type=d,f=i.tag=RE(d),r=Fn(d,r),f){case 0:i=Rh(null,i,d,r,a);break e;case 1:i=Fg(null,i,d,r,a);break e;case 11:i=jg(null,i,d,r,a);break e;case 14:i=Vg(null,i,d,Fn(d.type,r),a);break e}throw Error(t(306,d,""))}return i;case 0:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:Fn(d,f),Rh(r,i,d,f,a);case 1:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:Fn(d,f),Fg(r,i,d,f,a);case 3:e:{if(Ug(i),r===null)throw Error(t(387));d=i.pendingProps,g=i.memoizedState,f=g.element,tg(r,i),Lu(i,d,null,a);var x=i.memoizedState;if(d=x.element,g.isDehydrated)if(g={element:d,isDehydrated:!1,cache:x.cache,pendingSuspenseBoundaries:x.pendingSuspenseBoundaries,transitions:x.transitions},i.updateQueue.baseState=g,i.memoizedState=g,i.flags&256){f=Ao(Error(t(423)),i),i=zg(r,i,d,a,f);break e}else if(d!==f){f=Ao(Error(t(424)),i),i=zg(r,i,d,a,f);break e}else for(vn=xs(i.stateNode.containerInfo.firstChild),yn=i,it=!0,On=null,a=Zm(i,null,d,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling;else{if(Io(),d===f){i=Ur(r,i,a);break e}Yt(r,i,d,a)}i=i.child}return i;case 5:return sg(i),r===null&&oh(i),d=i.type,f=i.pendingProps,g=r!==null?r.memoizedProps:null,x=f.children,Xd(d,f)?x=null:g!==null&&Xd(d,g)&&(i.flags|=32),Og(r,i),Yt(r,i,x,a),i.child;case 6:return r===null&&oh(i),null;case 13:return Bg(r,i,a);case 4:return ph(i,i.stateNode.containerInfo),d=i.pendingProps,r===null?i.child=So(i,null,d,a):Yt(r,i,d,a),i.child;case 11:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:Fn(d,f),jg(r,i,d,f,a);case 7:return Yt(r,i,i.pendingProps,a),i.child;case 8:return Yt(r,i,i.pendingProps.children,a),i.child;case 12:return Yt(r,i,i.pendingProps.children,a),i.child;case 10:e:{if(d=i.type._context,f=i.pendingProps,g=i.memoizedProps,x=f.value,Je(Du,d._currentValue),d._currentValue=x,g!==null)if(Mn(g.value,x)){if(g.children===f.children&&!en.current){i=Ur(r,i,a);break e}}else for(g=i.child,g!==null&&(g.return=i);g!==null;){var A=g.dependencies;if(A!==null){x=g.child;for(var L=A.firstContext;L!==null;){if(L.context===d){if(g.tag===1){L=Fr(-1,a&-a),L.tag=2;var q=g.updateQueue;if(q!==null){q=q.shared;var te=q.pending;te===null?L.next=L:(L.next=te.next,te.next=L),q.pending=L}}g.lanes|=a,L=g.alternate,L!==null&&(L.lanes|=a),dh(g.return,a,i),A.lanes|=a;break}L=L.next}}else if(g.tag===10)x=g.type===i.type?null:g.child;else if(g.tag===18){if(x=g.return,x===null)throw Error(t(341));x.lanes|=a,A=x.alternate,A!==null&&(A.lanes|=a),dh(x,a,i),x=g.sibling}else x=g.child;if(x!==null)x.return=g;else for(x=g;x!==null;){if(x===i){x=null;break}if(g=x.sibling,g!==null){g.return=x.return,x=g;break}x=x.return}g=x}Yt(r,i,f.children,a),i=i.child}return i;case 9:return f=i.type,d=i.pendingProps.children,ko(i,a),f=Sn(f),d=d(f),i.flags|=1,Yt(r,i,d,a),i.child;case 14:return d=i.type,f=Fn(d,i.pendingProps),f=Fn(d.type,f),Vg(r,i,d,f,a);case 15:return Lg(r,i,i.type,i.pendingProps,a);case 17:return d=i.type,f=i.pendingProps,f=i.elementType===d?f:Fn(d,f),Wu(r,i),i.tag=1,tn(d)?(r=!0,ku(i)):r=!1,ko(i,a),kg(i,d,f),kh(i,d,f,a),Nh(null,i,d,!0,r,a);case 19:return Hg(r,i,a);case 22:return Mg(r,i,a)}throw Error(t(156,i.tag))};function py(r,i){return va(r,i)}function AE(r,i,a,d){this.tag=r,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=d,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Cn(r,i,a,d){return new AE(r,i,a,d)}function Xh(r){return r=r.prototype,!(!r||!r.isReactComponent)}function RE(r){if(typeof r=="function")return Xh(r)?1:0;if(r!=null){if(r=r.$$typeof,r===D)return 11;if(r===ie)return 14}return 2}function Ps(r,i){var a=r.alternate;return a===null?(a=Cn(r.tag,i,r.key,r.mode),a.elementType=r.elementType,a.type=r.type,a.stateNode=r.stateNode,a.alternate=r,r.alternate=a):(a.pendingProps=i,a.type=r.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=r.flags&14680064,a.childLanes=r.childLanes,a.lanes=r.lanes,a.child=r.child,a.memoizedProps=r.memoizedProps,a.memoizedState=r.memoizedState,a.updateQueue=r.updateQueue,i=r.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=r.sibling,a.index=r.index,a.ref=r.ref,a}function nc(r,i,a,d,f,g){var x=2;if(d=r,typeof r=="function")Xh(r)&&(x=1);else if(typeof r=="string")x=5;else e:switch(r){case P:return Ri(a.children,f,g,i);case T:x=8,f|=8;break;case b:return r=Cn(12,a,i,f|2),r.elementType=b,r.lanes=g,r;case C:return r=Cn(13,a,i,f),r.elementType=C,r.lanes=g,r;case O:return r=Cn(19,a,i,f),r.elementType=O,r.lanes=g,r;case De:return rc(a,f,g,i);default:if(typeof r=="object"&&r!==null)switch(r.$$typeof){case V:x=10;break e;case j:x=9;break e;case D:x=11;break e;case ie:x=14;break e;case Te:x=16,d=null;break e}throw Error(t(130,r==null?r:typeof r,""))}return i=Cn(x,a,i,f),i.elementType=r,i.type=d,i.lanes=g,i}function Ri(r,i,a,d){return r=Cn(7,r,d,i),r.lanes=a,r}function rc(r,i,a,d){return r=Cn(22,r,d,i),r.elementType=De,r.lanes=a,r.stateNode={isHidden:!1},r}function Jh(r,i,a){return r=Cn(6,r,null,i),r.lanes=a,r}function Zh(r,i,a){return i=Cn(4,r.children!==null?r.children:[],r.key,i),i.lanes=a,i.stateNode={containerInfo:r.containerInfo,pendingChildren:null,implementation:r.implementation},i}function NE(r,i,a,d,f){this.tag=i,this.containerInfo=r,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ta(0),this.expirationTimes=Ta(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ta(0),this.identifierPrefix=d,this.onRecoverableError=f,this.mutableSourceEagerHydrationData=null}function ef(r,i,a,d,f,g,x,A,L){return r=new NE(r,i,a,A,L),i===1?(i=1,g===!0&&(i|=8)):i=0,g=Cn(3,null,null,i),r.current=g,g.stateNode=r,g.memoizedState={element:d,isDehydrated:a,cache:null,transitions:null,pendingSuspenseBoundaries:null},fh(g),r}function PE(r,i,a){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:he,key:d==null?null:""+d,children:r,containerInfo:i,implementation:a}}function my(r){if(!r)return Ts;r=r._reactInternals;e:{if(Vn(r)!==r||r.tag!==1)throw Error(t(170));var i=r;do{switch(i.tag){case 3:i=i.stateNode.context;break e;case 1:if(tn(i.type)){i=i.stateNode.__reactInternalMemoizedMergedChildContext;break e}}i=i.return}while(i!==null);throw Error(t(171))}if(r.tag===1){var a=r.type;if(tn(a))return $m(r,a,i)}return i}function gy(r,i,a,d,f,g,x,A,L){return r=ef(a,d,!0,r,f,g,x,A,L),r.context=my(null),a=r.current,d=Xt(),f=Rs(a),g=Fr(d,f),g.callback=i??null,bs(a,g,f),r.current.lanes=f,pi(r,f,d),sn(r,d),r}function sc(r,i,a,d){var f=i.current,g=Xt(),x=Rs(f);return a=my(a),i.context===null?i.context=a:i.pendingContext=a,i=Fr(g,x),i.payload={element:r},d=d===void 0?null:d,d!==null&&(i.callback=d),r=bs(f,i,x),r!==null&&(Bn(r,f,x,g),Vu(r,f,x)),x}function ic(r){if(r=r.current,!r.child)return null;switch(r.child.tag){case 5:return r.child.stateNode;default:return r.child.stateNode}}function yy(r,i){if(r=r.memoizedState,r!==null&&r.dehydrated!==null){var a=r.retryLane;r.retryLane=a!==0&&a<i?a:i}}function tf(r,i){yy(r,i),(r=r.alternate)&&yy(r,i)}function DE(){return null}var vy=typeof reportError=="function"?reportError:function(r){console.error(r)};function nf(r){this._internalRoot=r}oc.prototype.render=nf.prototype.render=function(r){var i=this._internalRoot;if(i===null)throw Error(t(409));sc(r,i,null,null)},oc.prototype.unmount=nf.prototype.unmount=function(){var r=this._internalRoot;if(r!==null){this._internalRoot=null;var i=r.containerInfo;ki(function(){sc(null,r,null,null)}),i[jr]=null}};function oc(r){this._internalRoot=r}oc.prototype.unstable_scheduleHydration=function(r){if(r){var i=ka();r={blockedOn:null,target:r,priority:i};for(var a=0;a<fn.length&&i!==0&&i<fn[a].priority;a++);fn.splice(a,0,r),a===0&&so(r)}};function rf(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11)}function ac(r){return!(!r||r.nodeType!==1&&r.nodeType!==9&&r.nodeType!==11&&(r.nodeType!==8||r.nodeValue!==" react-mount-point-unstable "))}function _y(){}function jE(r,i,a,d,f){if(f){if(typeof d=="function"){var g=d;d=function(){var q=ic(x);g.call(q)}}var x=gy(i,d,r,0,null,!1,!1,"",_y);return r._reactRootContainer=x,r[jr]=x.current,Fa(r.nodeType===8?r.parentNode:r),ki(),x}for(;f=r.lastChild;)r.removeChild(f);if(typeof d=="function"){var A=d;d=function(){var q=ic(L);A.call(q)}}var L=ef(r,0,!1,null,null,!1,!1,"",_y);return r._reactRootContainer=L,r[jr]=L.current,Fa(r.nodeType===8?r.parentNode:r),ki(function(){sc(i,L,a,d)}),L}function lc(r,i,a,d,f){var g=a._reactRootContainer;if(g){var x=g;if(typeof f=="function"){var A=f;f=function(){var L=ic(x);A.call(L)}}sc(i,x,r,f)}else x=jE(a,i,r,f,d);return ic(x)}Sa=function(r){switch(r.tag){case 3:var i=r.stateNode;if(i.current.memoizedState.isDehydrated){var a=Ge(i.pendingLanes);a!==0&&(Ia(i,a|1),sn(i,et()),(He&6)===0&&(Po=et()+500,Is()))}break;case 13:ki(function(){var d=Or(r,1);if(d!==null){var f=Xt();Bn(d,r,1,f)}}),tf(r,1)}},no=function(r){if(r.tag===13){var i=Or(r,134217728);if(i!==null){var a=Xt();Bn(i,r,134217728,a)}tf(r,134217728)}},ba=function(r){if(r.tag===13){var i=Rs(r),a=Or(r,i);if(a!==null){var d=Xt();Bn(a,r,i,d)}tf(r,i)}},ka=function(){return Be},Ca=function(r,i){var a=Be;try{return Be=r,i()}finally{Be=a}},Ir=function(r,i,a){switch(i){case"input":if(si(r,a),i=a.name,a.type==="radio"&&i!=null){for(a=r;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll("input[name="+JSON.stringify(""+i)+'][type="radio"]'),i=0;i<a.length;i++){var d=a[i];if(d!==r&&d.form===r.form){var f=Su(d);if(!f)throw Error(t(90));Xn(d),si(d,f)}}}break;case"textarea":Yl(r,a);break;case"select":i=a.value,i!=null&&Dn(r,!!a.multiple,i,!1)}},Zl=Kh,eu=ki;var VE={usingClientEntryPoint:!1,Events:[Ba,_o,Su,cs,ds,Kh]},nl={findFiberByHostInstance:_i,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},LE={bundleType:nl.bundleType,version:nl.version,rendererPackageName:nl.rendererPackageName,rendererConfig:nl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ae.ReactCurrentDispatcher,findHostInstanceByFiber:function(r){return r=au(r),r===null?null:r.stateNode},findFiberByHostInstance:nl.findFiberByHostInstance||DE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var uc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!uc.isDisabled&&uc.supportsFiber)try{ci=uc.inject(LE),dn=uc}catch{}}return on.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VE,on.createPortal=function(r,i){var a=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!rf(i))throw Error(t(200));return PE(r,i,null,a)},on.createRoot=function(r,i){if(!rf(r))throw Error(t(299));var a=!1,d="",f=vy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(d=i.identifierPrefix),i.onRecoverableError!==void 0&&(f=i.onRecoverableError)),i=ef(r,1,!1,null,null,a,!1,d,f),r[jr]=i.current,Fa(r.nodeType===8?r.parentNode:r),new nf(i)},on.findDOMNode=function(r){if(r==null)return null;if(r.nodeType===1)return r;var i=r._reactInternals;if(i===void 0)throw typeof r.render=="function"?Error(t(188)):(r=Object.keys(r).join(","),Error(t(268,r)));return r=au(i),r=r===null?null:r.stateNode,r},on.flushSync=function(r){return ki(r)},on.hydrate=function(r,i,a){if(!ac(i))throw Error(t(200));return lc(null,r,i,!0,a)},on.hydrateRoot=function(r,i,a){if(!rf(r))throw Error(t(405));var d=a!=null&&a.hydratedSources||null,f=!1,g="",x=vy;if(a!=null&&(a.unstable_strictMode===!0&&(f=!0),a.identifierPrefix!==void 0&&(g=a.identifierPrefix),a.onRecoverableError!==void 0&&(x=a.onRecoverableError)),i=gy(i,null,r,1,a??null,f,!1,g,x),r[jr]=i.current,Fa(r),d)for(r=0;r<d.length;r++)a=d[r],f=a._getVersion,f=f(a._source),i.mutableSourceEagerHydrationData==null?i.mutableSourceEagerHydrationData=[a,f]:i.mutableSourceEagerHydrationData.push(a,f);return new oc(i)},on.render=function(r,i,a){if(!ac(i))throw Error(t(200));return lc(null,r,i,!1,a)},on.unmountComponentAtNode=function(r){if(!ac(r))throw Error(t(40));return r._reactRootContainer?(ki(function(){lc(null,null,r,!1,function(){r._reactRootContainer=null,r[jr]=null})}),!0):!1},on.unstable_batchedUpdates=Kh,on.unstable_renderSubtreeIntoContainer=function(r,i,a,d){if(!ac(a))throw Error(t(200));if(r==null||r._reactInternals===void 0)throw Error(t(38));return lc(r,i,a,!1,d)},on.version="18.3.1-next-f1338f8080-20240426",on}var ky;function qE(){if(ky)return af.exports;ky=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),af.exports=WE(),af.exports}var Cy;function GE(){if(Cy)return cc;Cy=1;var n=qE();return cc.createRoot=n.createRoot,cc.hydrateRoot=n.hydrateRoot,cc}var KE=GE();const QE=E0(KE);/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var Ay="popstate";function YE(n={}){function e(s,o){let{pathname:l,search:c,hash:h}=s.location;return kf("",{pathname:l,search:c,hash:h},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function t(s,o){return typeof o=="string"?o:vl(o)}return JE(e,t,null,n)}function ot(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function Pn(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function XE(){return Math.random().toString(36).substring(2,10)}function Ry(n,e){return{usr:n.state,key:n.key,idx:e}}function kf(n,e,t=null,s){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof e=="string"?Xo(e):e,state:t,key:e&&e.key||s||XE()}}function vl({pathname:n="/",search:e="",hash:t=""}){return e&&e!=="?"&&(n+=e.charAt(0)==="?"?e:"?"+e),t&&t!=="#"&&(n+=t.charAt(0)==="#"?t:"#"+t),n}function Xo(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substring(t),n=n.substring(0,t));let s=n.indexOf("?");s>=0&&(e.search=n.substring(s),n=n.substring(0,s)),n&&(e.pathname=n)}return e}function JE(n,e,t,s={}){let{window:o=document.defaultView,v5Compat:l=!1}=s,c=o.history,h="POP",p=null,y=w();y==null&&(y=0,c.replaceState({...c.state,idx:y},""));function w(){return(c.state||{idx:null}).idx}function E(){h="POP";let k=w(),H=k==null?null:k-y;y=k,p&&p({action:h,location:z.location,delta:H})}function S(k,H){h="PUSH";let K=kf(z.location,k,H);y=w()+1;let Y=Ry(K,y),ae=z.createHref(K);try{c.pushState(Y,"",ae)}catch(fe){if(fe instanceof DOMException&&fe.name==="DataCloneError")throw fe;o.location.assign(ae)}l&&p&&p({action:h,location:z.location,delta:1})}function N(k,H){h="REPLACE";let K=kf(z.location,k,H);y=w();let Y=Ry(K,y),ae=z.createHref(K);c.replaceState(Y,"",ae),l&&p&&p({action:h,location:z.location,delta:0})}function U(k){return ZE(k)}let z={get action(){return h},get location(){return n(o,c)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(Ay,E),p=k,()=>{o.removeEventListener(Ay,E),p=null}},createHref(k){return e(o,k)},createURL:U,encodeLocation(k){let H=U(k);return{pathname:H.pathname,search:H.search,hash:H.hash}},push:S,replace:N,go(k){return c.go(k)}};return z}function ZE(n,e=!1){let t="http://localhost";typeof window<"u"&&(t=window.location.origin!=="null"?window.location.origin:window.location.href),ot(t,"No window.location.(origin|href) available to create URL");let s=typeof n=="string"?n:vl(n);return s=s.replace(/ $/,"%20"),!e&&s.startsWith("//")&&(s=t+s),new URL(s,t)}function I0(n,e,t="/"){return e1(n,e,t,!1)}function e1(n,e,t,s){let o=typeof e=="string"?Xo(e):e,l=Qr(o.pathname||"/",t);if(l==null)return null;let c=S0(n);t1(c);let h=null;for(let p=0;h==null&&p<c.length;++p){let y=h1(l);h=c1(c[p],y,s)}return h}function S0(n,e=[],t=[],s="",o=!1){let l=(c,h,p=o,y)=>{let w={relativePath:y===void 0?c.path||"":y,caseSensitive:c.caseSensitive===!0,childrenIndex:h,route:c};if(w.relativePath.startsWith("/")){if(!w.relativePath.startsWith(s)&&p)return;ot(w.relativePath.startsWith(s),`Absolute route path "${w.relativePath}" nested under path "${s}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),w.relativePath=w.relativePath.slice(s.length)}let E=Wr([s,w.relativePath]),S=t.concat(w);c.children&&c.children.length>0&&(ot(c.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${E}".`),S0(c.children,e,S,E,p)),!(c.path==null&&!c.index)&&e.push({path:E,score:l1(E,c.index),routesMeta:S})};return n.forEach((c,h)=>{if(c.path===""||!c.path?.includes("?"))l(c,h);else for(let p of b0(c.path))l(c,h,!0,p)}),e}function b0(n){let e=n.split("/");if(e.length===0)return[];let[t,...s]=e,o=t.endsWith("?"),l=t.replace(/\?$/,"");if(s.length===0)return o?[l,""]:[l];let c=b0(s.join("/")),h=[];return h.push(...c.map(p=>p===""?l:[l,p].join("/"))),o&&h.push(...c),h.map(p=>n.startsWith("/")&&p===""?"/":p)}function t1(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:u1(e.routesMeta.map(s=>s.childrenIndex),t.routesMeta.map(s=>s.childrenIndex)))}var n1=/^:[\w-]+$/,r1=3,s1=2,i1=1,o1=10,a1=-2,Ny=n=>n==="*";function l1(n,e){let t=n.split("/"),s=t.length;return t.some(Ny)&&(s+=a1),e&&(s+=s1),t.filter(o=>!Ny(o)).reduce((o,l)=>o+(n1.test(l)?r1:l===""?i1:o1),s)}function u1(n,e){return n.length===e.length&&n.slice(0,-1).every((s,o)=>s===e[o])?n[n.length-1]-e[e.length-1]:0}function c1(n,e,t=!1){let{routesMeta:s}=n,o={},l="/",c=[];for(let h=0;h<s.length;++h){let p=s[h],y=h===s.length-1,w=l==="/"?e:e.slice(l.length)||"/",E=Pc({path:p.relativePath,caseSensitive:p.caseSensitive,end:y},w),S=p.route;if(!E&&y&&t&&!s[s.length-1].route.index&&(E=Pc({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},w)),!E)return null;Object.assign(o,E.params),c.push({params:o,pathname:Wr([l,E.pathname]),pathnameBase:y1(Wr([l,E.pathnameBase])),route:S}),E.pathnameBase!=="/"&&(l=Wr([l,E.pathnameBase]))}return c}function Pc(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,s]=d1(n.path,n.caseSensitive,n.end),o=e.match(t);if(!o)return null;let l=o[0],c=l.replace(/(.)\/+$/,"$1"),h=o.slice(1);return{params:s.reduce((y,{paramName:w,isOptional:E},S)=>{if(w==="*"){let U=h[S]||"";c=l.slice(0,l.length-U.length).replace(/(.)\/+$/,"$1")}const N=h[S];return E&&!N?y[w]=void 0:y[w]=(N||"").replace(/%2F/g,"/"),y},{}),pathname:l,pathnameBase:c,pattern:n}}function d1(n,e=!1,t=!0){Pn(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let s=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,h,p)=>(s.push({paramName:h,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(s.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,e?void 0:"i"),s]}function h1(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Pn(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),n}}function Qr(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,s=n.charAt(t);return s&&s!=="/"?null:n.slice(t)||"/"}var f1=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,p1=n=>f1.test(n);function m1(n,e="/"){let{pathname:t,search:s="",hash:o=""}=typeof n=="string"?Xo(n):n,l;if(t)if(p1(t))l=t;else{if(t.includes("//")){let c=t;t=t.replace(/\/\/+/g,"/"),Pn(!1,`Pathnames cannot have embedded double slashes - normalizing ${c} -> ${t}`)}t.startsWith("/")?l=Py(t.substring(1),"/"):l=Py(t,e)}else l=e;return{pathname:l,search:v1(s),hash:_1(o)}}function Py(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?t.length>1&&t.pop():o!=="."&&t.push(o)}),t.length>1?t.join("/"):"/"}function cf(n,e,t,s){return`Cannot include a '${n}' character in a manually specified \`to.${e}\` field [${JSON.stringify(s)}].  Please separate it out to the \`to.${t}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function g1(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function ip(n){let e=g1(n);return e.map((t,s)=>s===e.length-1?t.pathname:t.pathnameBase)}function op(n,e,t,s=!1){let o;typeof n=="string"?o=Xo(n):(o={...n},ot(!o.pathname||!o.pathname.includes("?"),cf("?","pathname","search",o)),ot(!o.pathname||!o.pathname.includes("#"),cf("#","pathname","hash",o)),ot(!o.search||!o.search.includes("#"),cf("#","search","hash",o)));let l=n===""||o.pathname==="",c=l?"/":o.pathname,h;if(c==null)h=t;else{let E=e.length-1;if(!s&&c.startsWith("..")){let S=c.split("/");for(;S[0]==="..";)S.shift(),E-=1;o.pathname=S.join("/")}h=E>=0?e[E]:"/"}let p=m1(o,h),y=c&&c!=="/"&&c.endsWith("/"),w=(l||c===".")&&t.endsWith("/");return!p.pathname.endsWith("/")&&(y||w)&&(p.pathname+="/"),p}var Wr=n=>n.join("/").replace(/\/\/+/g,"/"),y1=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),v1=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,_1=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function w1(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var k0=["POST","PUT","PATCH","DELETE"];new Set(k0);var x1=["GET",...k0];new Set(x1);var Jo=R.createContext(null);Jo.displayName="DataRouter";var nd=R.createContext(null);nd.displayName="DataRouterState";R.createContext(!1);var C0=R.createContext({isTransitioning:!1});C0.displayName="ViewTransition";var E1=R.createContext(new Map);E1.displayName="Fetchers";var T1=R.createContext(null);T1.displayName="Await";var Gn=R.createContext(null);Gn.displayName="Navigation";var Nl=R.createContext(null);Nl.displayName="Location";var Kn=R.createContext({outlet:null,matches:[],isDataRoute:!1});Kn.displayName="Route";var ap=R.createContext(null);ap.displayName="RouteError";function I1(n,{relative:e}={}){ot(Zo(),"useHref() may be used only in the context of a <Router> component.");let{basename:t,navigator:s}=R.useContext(Gn),{hash:o,pathname:l,search:c}=Dl(n,{relative:e}),h=l;return t!=="/"&&(h=l==="/"?t:Wr([t,l])),s.createHref({pathname:h,search:c,hash:o})}function Zo(){return R.useContext(Nl)!=null}function Qn(){return ot(Zo(),"useLocation() may be used only in the context of a <Router> component."),R.useContext(Nl).location}var A0="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function R0(n){R.useContext(Gn).static||R.useLayoutEffect(n)}function Pl(){let{isDataRoute:n}=R.useContext(Kn);return n?F1():S1()}function S1(){ot(Zo(),"useNavigate() may be used only in the context of a <Router> component.");let n=R.useContext(Jo),{basename:e,navigator:t}=R.useContext(Gn),{matches:s}=R.useContext(Kn),{pathname:o}=Qn(),l=JSON.stringify(ip(s)),c=R.useRef(!1);return R0(()=>{c.current=!0}),R.useCallback((p,y={})=>{if(Pn(c.current,A0),!c.current)return;if(typeof p=="number"){t.go(p);return}let w=op(p,JSON.parse(l),o,y.relative==="path");n==null&&e!=="/"&&(w.pathname=w.pathname==="/"?e:Wr([e,w.pathname])),(y.replace?t.replace:t.push)(w,y.state,y)},[e,t,l,o,n])}var b1=R.createContext(null);function k1(n){let e=R.useContext(Kn).outlet;return R.useMemo(()=>e&&R.createElement(b1.Provider,{value:n},e),[e,n])}function Dl(n,{relative:e}={}){let{matches:t}=R.useContext(Kn),{pathname:s}=Qn(),o=JSON.stringify(ip(t));return R.useMemo(()=>op(n,JSON.parse(o),s,e==="path"),[n,o,s,e])}function C1(n,e){return N0(n,e)}function N0(n,e,t,s,o){ot(Zo(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=R.useContext(Gn),{matches:c}=R.useContext(Kn),h=c[c.length-1],p=h?h.params:{},y=h?h.pathname:"/",w=h?h.pathnameBase:"/",E=h&&h.route;{let K=E&&E.path||"";P0(y,!E||K.endsWith("*")||K.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${y}" (under <Route path="${K}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${K}"> to <Route path="${K==="/"?"*":`${K}/*`}">.`)}let S=Qn(),N;if(e){let K=typeof e=="string"?Xo(e):e;ot(w==="/"||K.pathname?.startsWith(w),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${w}" but pathname "${K.pathname}" was given in the \`location\` prop.`),N=K}else N=S;let U=N.pathname||"/",z=U;if(w!=="/"){let K=w.replace(/^\//,"").split("/");z="/"+U.replace(/^\//,"").split("/").slice(K.length).join("/")}let k=I0(n,{pathname:z});Pn(E||k!=null,`No routes matched location "${N.pathname}${N.search}${N.hash}" `),Pn(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${N.pathname}${N.search}${N.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let H=D1(k&&k.map(K=>Object.assign({},K,{params:Object.assign({},p,K.params),pathname:Wr([w,l.encodeLocation?l.encodeLocation(K.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathname]),pathnameBase:K.pathnameBase==="/"?w:Wr([w,l.encodeLocation?l.encodeLocation(K.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:K.pathnameBase])})),c,t,s,o);return e&&H?R.createElement(Nl.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...N},navigationType:"POP"}},H):H}function A1(){let n=O1(),e=w1(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,s="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:s},l={padding:"2px 4px",backgroundColor:s},c=null;return console.error("Error handled by React Router default ErrorBoundary:",n),c=R.createElement(R.Fragment,null,R.createElement("p",null," Hey developer "),R.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",R.createElement("code",{style:l},"ErrorBoundary")," or"," ",R.createElement("code",{style:l},"errorElement")," prop on your route.")),R.createElement(R.Fragment,null,R.createElement("h2",null,"Unexpected Application Error!"),R.createElement("h3",{style:{fontStyle:"italic"}},e),t?R.createElement("pre",{style:o},t):null,c)}var R1=R.createElement(A1,null),N1=class extends R.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,e){return e.location!==n.location||e.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:e.error,location:e.location,revalidation:n.revalidation||e.revalidation}}componentDidCatch(n,e){this.props.onError?this.props.onError(n,e):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?R.createElement(Kn.Provider,{value:this.props.routeContext},R.createElement(ap.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function P1({routeContext:n,match:e,children:t}){let s=R.useContext(Jo);return s&&s.static&&s.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=e.route.id),R.createElement(Kn.Provider,{value:n},t)}function D1(n,e=[],t=null,s=null,o=null){if(n==null){if(!t)return null;if(t.errors)n=t.matches;else if(e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let l=n,c=t?.errors;if(c!=null){let w=l.findIndex(E=>E.route.id&&c?.[E.route.id]!==void 0);ot(w>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(c).join(",")}`),l=l.slice(0,Math.min(l.length,w+1))}let h=!1,p=-1;if(t)for(let w=0;w<l.length;w++){let E=l[w];if((E.route.HydrateFallback||E.route.hydrateFallbackElement)&&(p=w),E.route.id){let{loaderData:S,errors:N}=t,U=E.route.loader&&!S.hasOwnProperty(E.route.id)&&(!N||N[E.route.id]===void 0);if(E.route.lazy||U){h=!0,p>=0?l=l.slice(0,p+1):l=[l[0]];break}}}let y=t&&s?(w,E)=>{s(w,{location:t.location,params:t.matches?.[0]?.params??{},errorInfo:E})}:void 0;return l.reduceRight((w,E,S)=>{let N,U=!1,z=null,k=null;t&&(N=c&&E.route.id?c[E.route.id]:void 0,z=E.route.errorElement||R1,h&&(p<0&&S===0?(P0("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),U=!0,k=null):p===S&&(U=!0,k=E.route.hydrateFallbackElement||null)));let H=e.concat(l.slice(0,S+1)),K=()=>{let Y;return N?Y=z:U?Y=k:E.route.Component?Y=R.createElement(E.route.Component,null):E.route.element?Y=E.route.element:Y=w,R.createElement(P1,{match:E,routeContext:{outlet:w,matches:H,isDataRoute:t!=null},children:Y})};return t&&(E.route.ErrorBoundary||E.route.errorElement||S===0)?R.createElement(N1,{location:t.location,revalidation:t.revalidation,component:z,error:N,children:K(),routeContext:{outlet:null,matches:H,isDataRoute:!0},onError:y}):K()},null)}function lp(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function j1(n){let e=R.useContext(Jo);return ot(e,lp(n)),e}function V1(n){let e=R.useContext(nd);return ot(e,lp(n)),e}function L1(n){let e=R.useContext(Kn);return ot(e,lp(n)),e}function up(n){let e=L1(n),t=e.matches[e.matches.length-1];return ot(t.route.id,`${n} can only be used on routes that contain a unique "id"`),t.route.id}function M1(){return up("useRouteId")}function O1(){let n=R.useContext(ap),e=V1("useRouteError"),t=up("useRouteError");return n!==void 0?n:e.errors?.[t]}function F1(){let{router:n}=j1("useNavigate"),e=up("useNavigate"),t=R.useRef(!1);return R0(()=>{t.current=!0}),R.useCallback(async(o,l={})=>{Pn(t.current,A0),t.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:e,...l}))},[n,e])}var Dy={};function P0(n,e,t){!e&&!Dy[n]&&(Dy[n]=!0,Pn(!1,t))}R.memo(U1);function U1({routes:n,future:e,state:t,unstable_onError:s}){return N0(n,void 0,t,s,e)}function jy({to:n,replace:e,state:t,relative:s}){ot(Zo(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=R.useContext(Gn);Pn(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=R.useContext(Kn),{pathname:c}=Qn(),h=Pl(),p=op(n,ip(l),c,s==="path"),y=JSON.stringify(p);return R.useEffect(()=>{h(JSON.parse(y),{replace:e,state:t,relative:s})},[h,y,s,e,t]),null}function D0(n){return k1(n.context)}function Jt(n){ot(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function z1({basename:n="/",children:e=null,location:t,navigationType:s="POP",navigator:o,static:l=!1}){ot(!Zo(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let c=n.replace(/^\/*/,"/"),h=R.useMemo(()=>({basename:c,navigator:o,static:l,future:{}}),[c,o,l]);typeof t=="string"&&(t=Xo(t));let{pathname:p="/",search:y="",hash:w="",state:E=null,key:S="default"}=t,N=R.useMemo(()=>{let U=Qr(p,c);return U==null?null:{location:{pathname:U,search:y,hash:w,state:E,key:S},navigationType:s}},[c,p,y,w,E,S,s]);return Pn(N!=null,`<Router basename="${c}"> is not able to match the URL "${p}${y}${w}" because it does not start with the basename, so the <Router> won't render anything.`),N==null?null:R.createElement(Gn.Provider,{value:h},R.createElement(Nl.Provider,{children:e,value:N}))}function B1({children:n,location:e}){return C1(Cf(n),e)}function Cf(n,e=[]){let t=[];return R.Children.forEach(n,(s,o)=>{if(!R.isValidElement(s))return;let l=[...e,o];if(s.type===R.Fragment){t.push.apply(t,Cf(s.props.children,l));return}ot(s.type===Jt,`[${typeof s.type=="string"?s.type:s.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ot(!s.props.index||!s.props.children,"An index route cannot have child routes.");let c={id:s.props.id||l.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,middleware:s.props.middleware,loader:s.props.loader,action:s.props.action,hydrateFallbackElement:s.props.hydrateFallbackElement,HydrateFallback:s.props.HydrateFallback,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.hasErrorBoundary===!0||s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(c.children=Cf(s.props.children,l)),t.push(c)}),t}var wc="get",xc="application/x-www-form-urlencoded";function rd(n){return n!=null&&typeof n.tagName=="string"}function $1(n){return rd(n)&&n.tagName.toLowerCase()==="button"}function H1(n){return rd(n)&&n.tagName.toLowerCase()==="form"}function W1(n){return rd(n)&&n.tagName.toLowerCase()==="input"}function q1(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function G1(n,e){return n.button===0&&(!e||e==="_self")&&!q1(n)}var dc=null;function K1(){if(dc===null)try{new FormData(document.createElement("form"),0),dc=!1}catch{dc=!0}return dc}var Q1=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function df(n){return n!=null&&!Q1.has(n)?(Pn(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${xc}"`),null):n}function Y1(n,e){let t,s,o,l,c;if(H1(n)){let h=n.getAttribute("action");s=h?Qr(h,e):null,t=n.getAttribute("method")||wc,o=df(n.getAttribute("enctype"))||xc,l=new FormData(n)}else if($1(n)||W1(n)&&(n.type==="submit"||n.type==="image")){let h=n.form;if(h==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=n.getAttribute("formaction")||h.getAttribute("action");if(s=p?Qr(p,e):null,t=n.getAttribute("formmethod")||h.getAttribute("method")||wc,o=df(n.getAttribute("formenctype"))||df(h.getAttribute("enctype"))||xc,l=new FormData(h,n),!K1()){let{name:y,type:w,value:E}=n;if(w==="image"){let S=y?`${y}.`:"";l.append(`${S}x`,"0"),l.append(`${S}y`,"0")}else y&&l.append(y,E)}}else{if(rd(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');t=wc,s=null,o=xc,c=n}return l&&o==="text/plain"&&(c=l,l=void 0),{action:s,method:t.toLowerCase(),encType:o,formData:l,body:c}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function cp(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function X1(n,e,t){let s=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return s.pathname==="/"?s.pathname=`_root.${t}`:e&&Qr(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.${t}`:s.pathname=`${s.pathname.replace(/\/$/,"")}.${t}`,s}async function J1(n,e){if(n.id in e)return e[n.id];try{let t=await import(n.module);return e[n.id]=t,t}catch(t){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(t),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Z1(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function eT(n,e,t){let s=await Promise.all(n.map(async o=>{let l=e.routes[o.route.id];if(l){let c=await J1(l,t);return c.links?c.links():[]}return[]}));return sT(s.flat(1).filter(Z1).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function Vy(n,e,t,s,o,l){let c=(p,y)=>t[y]?p.route.id!==t[y].route.id:!0,h=(p,y)=>t[y].pathname!==p.pathname||t[y].route.path?.endsWith("*")&&t[y].params["*"]!==p.params["*"];return l==="assets"?e.filter((p,y)=>c(p,y)||h(p,y)):l==="data"?e.filter((p,y)=>{let w=s.routes[p.route.id];if(!w||!w.hasLoader)return!1;if(c(p,y)||h(p,y))return!0;if(p.route.shouldRevalidate){let E=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:t[0]?.params||{},nextUrl:new URL(n,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof E=="boolean")return E}return!0}):[]}function tT(n,e,{includeHydrateFallback:t}={}){return nT(n.map(s=>{let o=e.routes[s.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),t&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function nT(n){return[...new Set(n)]}function rT(n){let e={},t=Object.keys(n).sort();for(let s of t)e[s]=n[s];return e}function sT(n,e){let t=new Set;return new Set(e),n.reduce((s,o)=>{let l=JSON.stringify(rT(o));return t.has(l)||(t.add(l),s.push({key:l,link:o})),s},[])}function j0(){let n=R.useContext(Jo);return cp(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function iT(){let n=R.useContext(nd);return cp(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var dp=R.createContext(void 0);dp.displayName="FrameworkContext";function V0(){let n=R.useContext(dp);return cp(n,"You must render this element inside a <HydratedRouter> element"),n}function oT(n,e){let t=R.useContext(dp),[s,o]=R.useState(!1),[l,c]=R.useState(!1),{onFocus:h,onBlur:p,onMouseEnter:y,onMouseLeave:w,onTouchStart:E}=e,S=R.useRef(null);R.useEffect(()=>{if(n==="render"&&c(!0),n==="viewport"){let z=H=>{H.forEach(K=>{c(K.isIntersecting)})},k=new IntersectionObserver(z,{threshold:.5});return S.current&&k.observe(S.current),()=>{k.disconnect()}}},[n]),R.useEffect(()=>{if(s){let z=setTimeout(()=>{c(!0)},100);return()=>{clearTimeout(z)}}},[s]);let N=()=>{o(!0)},U=()=>{o(!1),c(!1)};return t?n!=="intent"?[l,S,{}]:[l,S,{onFocus:sl(h,N),onBlur:sl(p,U),onMouseEnter:sl(y,N),onMouseLeave:sl(w,U),onTouchStart:sl(E,N)}]:[!1,S,{}]}function sl(n,e){return t=>{n&&n(t),t.defaultPrevented||e(t)}}function aT({page:n,...e}){let{router:t}=j0(),s=R.useMemo(()=>I0(t.routes,n,t.basename),[t.routes,n,t.basename]);return s?R.createElement(uT,{page:n,matches:s,...e}):null}function lT(n){let{manifest:e,routeModules:t}=V0(),[s,o]=R.useState([]);return R.useEffect(()=>{let l=!1;return eT(n,e,t).then(c=>{l||o(c)}),()=>{l=!0}},[n,e,t]),s}function uT({page:n,matches:e,...t}){let s=Qn(),{manifest:o,routeModules:l}=V0(),{basename:c}=j0(),{loaderData:h,matches:p}=iT(),y=R.useMemo(()=>Vy(n,e,p,o,s,"data"),[n,e,p,o,s]),w=R.useMemo(()=>Vy(n,e,p,o,s,"assets"),[n,e,p,o,s]),E=R.useMemo(()=>{if(n===s.pathname+s.search+s.hash)return[];let U=new Set,z=!1;if(e.forEach(H=>{let K=o.routes[H.route.id];!K||!K.hasLoader||(!y.some(Y=>Y.route.id===H.route.id)&&H.route.id in h&&l[H.route.id]?.shouldRevalidate||K.hasClientLoader?z=!0:U.add(H.route.id))}),U.size===0)return[];let k=X1(n,c,"data");return z&&U.size>0&&k.searchParams.set("_routes",e.filter(H=>U.has(H.route.id)).map(H=>H.route.id).join(",")),[k.pathname+k.search]},[c,h,s,o,y,e,n,l]),S=R.useMemo(()=>tT(w,o),[w,o]),N=lT(w);return R.createElement(R.Fragment,null,E.map(U=>R.createElement("link",{key:U,rel:"prefetch",as:"fetch",href:U,...t})),S.map(U=>R.createElement("link",{key:U,rel:"modulepreload",href:U,...t})),N.map(({key:U,link:z})=>R.createElement("link",{key:U,nonce:t.nonce,...z})))}function cT(...n){return e=>{n.forEach(t=>{typeof t=="function"?t(e):t!=null&&(t.current=e)})}}var L0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{L0&&(window.__reactRouterVersion="7.9.6")}catch{}function dT({basename:n,children:e,window:t}){let s=R.useRef();s.current==null&&(s.current=YE({window:t,v5Compat:!0}));let o=s.current,[l,c]=R.useState({action:o.action,location:o.location}),h=R.useCallback(p=>{R.startTransition(()=>c(p))},[c]);return R.useLayoutEffect(()=>o.listen(h),[o,h]),R.createElement(z1,{basename:n,children:e,location:l.location,navigationType:l.action,navigator:o})}var M0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,O0=R.forwardRef(function({onClick:e,discover:t="render",prefetch:s="none",relative:o,reloadDocument:l,replace:c,state:h,target:p,to:y,preventScrollReset:w,viewTransition:E,...S},N){let{basename:U}=R.useContext(Gn),z=typeof y=="string"&&M0.test(y),k,H=!1;if(typeof y=="string"&&z&&(k=y,L0))try{let b=new URL(window.location.href),V=y.startsWith("//")?new URL(b.protocol+y):new URL(y),j=Qr(V.pathname,U);V.origin===b.origin&&j!=null?y=j+V.search+V.hash:H=!0}catch{Pn(!1,`<Link to="${y}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let K=I1(y,{relative:o}),[Y,ae,fe]=oT(s,S),he=mT(y,{replace:c,state:h,target:p,preventScrollReset:w,relative:o,viewTransition:E});function P(b){e&&e(b),b.defaultPrevented||he(b)}let T=R.createElement("a",{...S,...fe,href:k||K,onClick:H||l?e:P,ref:cT(N,ae),target:p,"data-discover":!z&&t==="render"?"true":void 0});return Y&&!z?R.createElement(R.Fragment,null,T,R.createElement(aT,{page:K})):T});O0.displayName="Link";var hT=R.forwardRef(function({"aria-current":e="page",caseSensitive:t=!1,className:s="",end:o=!1,style:l,to:c,viewTransition:h,children:p,...y},w){let E=Dl(c,{relative:y.relative}),S=Qn(),N=R.useContext(nd),{navigator:U,basename:z}=R.useContext(Gn),k=N!=null&&wT(E)&&h===!0,H=U.encodeLocation?U.encodeLocation(E).pathname:E.pathname,K=S.pathname,Y=N&&N.navigation&&N.navigation.location?N.navigation.location.pathname:null;t||(K=K.toLowerCase(),Y=Y?Y.toLowerCase():null,H=H.toLowerCase()),Y&&z&&(Y=Qr(Y,z)||Y);const ae=H!=="/"&&H.endsWith("/")?H.length-1:H.length;let fe=K===H||!o&&K.startsWith(H)&&K.charAt(ae)==="/",he=Y!=null&&(Y===H||!o&&Y.startsWith(H)&&Y.charAt(H.length)==="/"),P={isActive:fe,isPending:he,isTransitioning:k},T=fe?e:void 0,b;typeof s=="function"?b=s(P):b=[s,fe?"active":null,he?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let V=typeof l=="function"?l(P):l;return R.createElement(O0,{...y,"aria-current":T,className:b,ref:w,style:V,to:c,viewTransition:h},typeof p=="function"?p(P):p)});hT.displayName="NavLink";var fT=R.forwardRef(({discover:n="render",fetcherKey:e,navigate:t,reloadDocument:s,replace:o,state:l,method:c=wc,action:h,onSubmit:p,relative:y,preventScrollReset:w,viewTransition:E,...S},N)=>{let U=vT(),z=_T(h,{relative:y}),k=c.toLowerCase()==="get"?"get":"post",H=typeof h=="string"&&M0.test(h),K=Y=>{if(p&&p(Y),Y.defaultPrevented)return;Y.preventDefault();let ae=Y.nativeEvent.submitter,fe=ae?.getAttribute("formmethod")||c;U(ae||Y.currentTarget,{fetcherKey:e,method:fe,navigate:t,replace:o,state:l,relative:y,preventScrollReset:w,viewTransition:E})};return R.createElement("form",{ref:N,method:k,action:z,onSubmit:s?p:K,...S,"data-discover":!H&&n==="render"?"true":void 0})});fT.displayName="Form";function pT(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function F0(n){let e=R.useContext(Jo);return ot(e,pT(n)),e}function mT(n,{target:e,replace:t,state:s,preventScrollReset:o,relative:l,viewTransition:c}={}){let h=Pl(),p=Qn(),y=Dl(n,{relative:l});return R.useCallback(w=>{if(G1(w,e)){w.preventDefault();let E=t!==void 0?t:vl(p)===vl(y);h(n,{replace:E,state:s,preventScrollReset:o,relative:l,viewTransition:c})}},[p,h,y,t,s,e,n,o,l,c])}var gT=0,yT=()=>`__${String(++gT)}__`;function vT(){let{router:n}=F0("useSubmit"),{basename:e}=R.useContext(Gn),t=M1();return R.useCallback(async(s,o={})=>{let{action:l,method:c,encType:h,formData:p,body:y}=Y1(s,e);if(o.navigate===!1){let w=o.fetcherKey||yT();await n.fetch(w,t,o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||c,formEncType:o.encType||h,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:p,body:y,formMethod:o.method||c,formEncType:o.encType||h,replace:o.replace,state:o.state,fromRouteId:t,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,e,t])}function _T(n,{relative:e}={}){let{basename:t}=R.useContext(Gn),s=R.useContext(Kn);ot(s,"useFormAction must be used inside a RouteContext");let[o]=s.matches.slice(-1),l={...Dl(n||".",{relative:e})},c=Qn();if(n==null){l.search=c.search;let h=new URLSearchParams(l.search),p=h.getAll("index");if(p.some(w=>w==="")){h.delete("index"),p.filter(E=>E).forEach(E=>h.append("index",E));let w=h.toString();l.search=w?`?${w}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),t!=="/"&&(l.pathname=l.pathname==="/"?t:Wr([t,l.pathname])),vl(l)}function wT(n,{relative:e}={}){let t=R.useContext(C0);ot(t!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:s}=F0("useViewTransitionState"),o=Dl(n,{relative:e});if(!t.isTransitioning)return!1;let l=Qr(t.currentLocation.pathname,s)||t.currentLocation.pathname,c=Qr(t.nextLocation.pathname,s)||t.nextLocation.pathname;return Pc(o.pathname,c)!=null||Pc(o.pathname,l)!=null}const xT=()=>{};var Ly={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U0=function(n){const e=[];let t=0;for(let s=0;s<n.length;s++){let o=n.charCodeAt(s);o<128?e[t++]=o:o<2048?(e[t++]=o>>6|192,e[t++]=o&63|128):(o&64512)===55296&&s+1<n.length&&(n.charCodeAt(s+1)&64512)===56320?(o=65536+((o&1023)<<10)+(n.charCodeAt(++s)&1023),e[t++]=o>>18|240,e[t++]=o>>12&63|128,e[t++]=o>>6&63|128,e[t++]=o&63|128):(e[t++]=o>>12|224,e[t++]=o>>6&63|128,e[t++]=o&63|128)}return e},ET=function(n){const e=[];let t=0,s=0;for(;t<n.length;){const o=n[t++];if(o<128)e[s++]=String.fromCharCode(o);else if(o>191&&o<224){const l=n[t++];e[s++]=String.fromCharCode((o&31)<<6|l&63)}else if(o>239&&o<365){const l=n[t++],c=n[t++],h=n[t++],p=((o&7)<<18|(l&63)<<12|(c&63)<<6|h&63)-65536;e[s++]=String.fromCharCode(55296+(p>>10)),e[s++]=String.fromCharCode(56320+(p&1023))}else{const l=n[t++],c=n[t++];e[s++]=String.fromCharCode((o&15)<<12|(l&63)<<6|c&63)}}return e.join("")},z0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,s=[];for(let o=0;o<n.length;o+=3){const l=n[o],c=o+1<n.length,h=c?n[o+1]:0,p=o+2<n.length,y=p?n[o+2]:0,w=l>>2,E=(l&3)<<4|h>>4;let S=(h&15)<<2|y>>6,N=y&63;p||(N=64,c||(S=64)),s.push(t[w],t[E],t[S],t[N])}return s.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(U0(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):ET(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,s=[];for(let o=0;o<n.length;){const l=t[n.charAt(o++)],h=o<n.length?t[n.charAt(o)]:0;++o;const y=o<n.length?t[n.charAt(o)]:64;++o;const E=o<n.length?t[n.charAt(o)]:64;if(++o,l==null||h==null||y==null||E==null)throw new TT;const S=l<<2|h>>4;if(s.push(S),y!==64){const N=h<<4&240|y>>2;if(s.push(N),E!==64){const U=y<<6&192|E;s.push(U)}}}return s},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class TT extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const IT=function(n){const e=U0(n);return z0.encodeByteArray(e,!0)},Dc=function(n){return IT(n).replace(/\./g,"")},B0=function(n){try{return z0.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ST(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bT=()=>ST().__FIREBASE_DEFAULTS__,kT=()=>{if(typeof process>"u"||typeof Ly>"u")return;const n=Ly.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},CT=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&B0(n[1]);return e&&JSON.parse(e)},sd=()=>{try{return xT()||bT()||kT()||CT()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},$0=n=>sd()?.emulatorHosts?.[n],AT=n=>{const e=$0(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const s=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),s]:[e.substring(0,t),s]},H0=()=>sd()?.config,W0=n=>sd()?.[`_${n}`];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RT{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,s)=>{t?this.reject(t):this.resolve(s),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,s))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ea(n){try{return(n.startsWith("http://")||n.startsWith("https://")?new URL(n).hostname:n).endsWith(".cloudworkstations.dev")}catch{return!1}}async function q0(n){return(await fetch(n,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function NT(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},s=e||"demo-project",o=n.iat||0,l=n.sub||n.user_id;if(!l)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const c={iss:`https://securetoken.google.com/${s}`,aud:s,iat:o,exp:o+3600,auth_time:o,sub:l,user_id:l,firebase:{sign_in_provider:"custom",identities:{}},...n};return[Dc(JSON.stringify(t)),Dc(JSON.stringify(c)),""].join(".")}const hl={};function PT(){const n={prod:[],emulator:[]};for(const e of Object.keys(hl))hl[e]?n.emulator.push(e):n.prod.push(e);return n}function DT(n){let e=document.getElementById(n),t=!1;return e||(e=document.createElement("div"),e.setAttribute("id",n),t=!0),{created:t,element:e}}let My=!1;function G0(n,e){if(typeof window>"u"||typeof document>"u"||!ea(window.location.host)||hl[n]===e||hl[n]||My)return;hl[n]=e;function t(S){return`__firebase__banner__${S}`}const s="__firebase__banner",l=PT().prod.length>0;function c(){const S=document.getElementById(s);S&&S.remove()}function h(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function p(S,N){S.setAttribute("width","24"),S.setAttribute("id",N),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{My=!0,c()},S}function w(S,N){S.setAttribute("id",N),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function E(){const S=DT(s),N=t("text"),U=document.getElementById(N)||document.createElement("span"),z=t("learnmore"),k=document.getElementById(z)||document.createElement("a"),H=t("preprendIcon"),K=document.getElementById(H)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const Y=S.element;h(Y),w(k,z);const ae=y();p(K,H),Y.append(K,U,k,ae),document.body.appendChild(Y)}l?(U.innerText="Preview backend disconnected.",K.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(K.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,U.innerText="Preview backend running in this workspace."),U.setAttribute("id",N)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",E):E()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Qt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function jT(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Qt())}function VT(){const n=sd()?.forceEnvironment;if(n==="node")return!0;if(n==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function LT(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function MT(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function OT(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function FT(){const n=Qt();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function UT(){return!VT()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function zT(){try{return typeof indexedDB=="object"}catch{return!1}}function BT(){return new Promise((n,e)=>{try{let t=!0;const s="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(s);o.onsuccess=()=>{o.result.close(),t||self.indexedDB.deleteDatabase(s),n(!0)},o.onupgradeneeded=()=>{t=!1},o.onerror=()=>{e(o.error?.message||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $T="FirebaseError";class ns extends Error{constructor(e,t,s){super(t),this.code=e,this.customData=s,this.name=$T,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,jl.prototype.create)}}class jl{constructor(e,t,s){this.service=e,this.serviceName=t,this.errors=s}create(e,...t){const s=t[0]||{},o=`${this.service}/${e}`,l=this.errors[e],c=l?HT(l,s):"Error",h=`${this.serviceName}: ${c} (${o}).`;return new ns(o,h,s)}}function HT(n,e){return n.replace(WT,(t,s)=>{const o=e[s];return o!=null?String(o):`<${s}?>`})}const WT=/\{\$([^}]+)}/g;function qT(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Li(n,e){if(n===e)return!0;const t=Object.keys(n),s=Object.keys(e);for(const o of t){if(!s.includes(o))return!1;const l=n[o],c=e[o];if(Oy(l)&&Oy(c)){if(!Li(l,c))return!1}else if(l!==c)return!1}for(const o of s)if(!t.includes(o))return!1;return!0}function Oy(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vl(n){const e=[];for(const[t,s]of Object.entries(n))Array.isArray(s)?s.forEach(o=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(o))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(s));return e.length?"&"+e.join("&"):""}function ol(n){const e={};return n.replace(/^\?/,"").split("&").forEach(s=>{if(s){const[o,l]=s.split("=");e[decodeURIComponent(o)]=decodeURIComponent(l)}}),e}function al(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function GT(n,e){const t=new KT(n,e);return t.subscribe.bind(t)}class KT{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(s=>{this.error(s)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,s){let o;if(e===void 0&&t===void 0&&s===void 0)throw new Error("Missing Observer.");QT(e,["next","error","complete"])?o=e:o={next:e,error:t,complete:s},o.next===void 0&&(o.next=hf),o.error===void 0&&(o.error=hf),o.complete===void 0&&(o.complete=hf);const l=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?o.error(this.finalError):o.complete()}catch{}}),this.observers.push(o),l}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(s){typeof console<"u"&&console.error&&console.error(s)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function QT(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function hf(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function At(n){return n&&n._delegate?n._delegate:n}class Mi{constructor(e,t,s){this.name=e,this.instanceFactory=t,this.type=s,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const s=new RT;if(this.instancesDeferred.set(t,s),this.isInitialized(t)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:t});o&&s.resolve(o)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){const t=this.normalizeInstanceIdentifier(e?.identifier),s=e?.optional??!1;if(this.isInitialized(t)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:t})}catch(o){if(s)return null;throw o}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(JT(e))try{this.getOrInitializeService({instanceIdentifier:Pi})}catch{}for(const[t,s]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(t);try{const l=this.getOrInitializeService({instanceIdentifier:o});s.resolve(l)}catch{}}}}clearInstance(e=Pi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Pi){return this.instances.has(e)}getOptions(e=Pi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,s=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(s))throw Error(`${this.name}(${s}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:s,options:t});for(const[l,c]of this.instancesDeferred.entries()){const h=this.normalizeInstanceIdentifier(l);s===h&&c.resolve(o)}return o}onInit(e,t){const s=this.normalizeInstanceIdentifier(t),o=this.onInitCallbacks.get(s)??new Set;o.add(e),this.onInitCallbacks.set(s,o);const l=this.instances.get(s);return l&&e(l,s),()=>{o.delete(e)}}invokeOnInitCallbacks(e,t){const s=this.onInitCallbacks.get(t);if(s)for(const o of s)try{o(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let s=this.instances.get(e);if(!s&&this.component&&(s=this.component.instanceFactory(this.container,{instanceIdentifier:XT(e),options:t}),this.instances.set(e,s),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(s,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,s)}catch{}return s||null}normalizeInstanceIdentifier(e=Pi){return this.component?this.component.multipleInstances?e:Pi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function XT(n){return n===Pi?void 0:n}function JT(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZT{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new YT(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Fe;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(Fe||(Fe={}));const eI={debug:Fe.DEBUG,verbose:Fe.VERBOSE,info:Fe.INFO,warn:Fe.WARN,error:Fe.ERROR,silent:Fe.SILENT},tI=Fe.INFO,nI={[Fe.DEBUG]:"log",[Fe.VERBOSE]:"log",[Fe.INFO]:"info",[Fe.WARN]:"warn",[Fe.ERROR]:"error"},rI=(n,e,...t)=>{if(e<n.logLevel)return;const s=new Date().toISOString(),o=nI[e];if(o)console[o](`[${s}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class hp{constructor(e){this.name=e,this._logLevel=tI,this._logHandler=rI,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Fe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?eI[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Fe.DEBUG,...e),this._logHandler(this,Fe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Fe.VERBOSE,...e),this._logHandler(this,Fe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Fe.INFO,...e),this._logHandler(this,Fe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Fe.WARN,...e),this._logHandler(this,Fe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Fe.ERROR,...e),this._logHandler(this,Fe.ERROR,...e)}}const sI=(n,e)=>e.some(t=>n instanceof t);let Fy,Uy;function iI(){return Fy||(Fy=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function oI(){return Uy||(Uy=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const K0=new WeakMap,Af=new WeakMap,Q0=new WeakMap,ff=new WeakMap,fp=new WeakMap;function aI(n){const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("success",l),n.removeEventListener("error",c)},l=()=>{t(zs(n.result)),o()},c=()=>{s(n.error),o()};n.addEventListener("success",l),n.addEventListener("error",c)});return e.then(t=>{t instanceof IDBCursor&&K0.set(t,n)}).catch(()=>{}),fp.set(e,n),e}function lI(n){if(Af.has(n))return;const e=new Promise((t,s)=>{const o=()=>{n.removeEventListener("complete",l),n.removeEventListener("error",c),n.removeEventListener("abort",c)},l=()=>{t(),o()},c=()=>{s(n.error||new DOMException("AbortError","AbortError")),o()};n.addEventListener("complete",l),n.addEventListener("error",c),n.addEventListener("abort",c)});Af.set(n,e)}let Rf={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return Af.get(n);if(e==="objectStoreNames")return n.objectStoreNames||Q0.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zs(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function uI(n){Rf=n(Rf)}function cI(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const s=n.call(pf(this),e,...t);return Q0.set(s,e.sort?e.sort():[e]),zs(s)}:oI().includes(n)?function(...e){return n.apply(pf(this),e),zs(K0.get(this))}:function(...e){return zs(n.apply(pf(this),e))}}function dI(n){return typeof n=="function"?cI(n):(n instanceof IDBTransaction&&lI(n),sI(n,iI())?new Proxy(n,Rf):n)}function zs(n){if(n instanceof IDBRequest)return aI(n);if(ff.has(n))return ff.get(n);const e=dI(n);return e!==n&&(ff.set(n,e),fp.set(e,n)),e}const pf=n=>fp.get(n);function hI(n,e,{blocked:t,upgrade:s,blocking:o,terminated:l}={}){const c=indexedDB.open(n,e),h=zs(c);return s&&c.addEventListener("upgradeneeded",p=>{s(zs(c.result),p.oldVersion,p.newVersion,zs(c.transaction),p)}),t&&c.addEventListener("blocked",p=>t(p.oldVersion,p.newVersion,p)),h.then(p=>{l&&p.addEventListener("close",()=>l()),o&&p.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),h}const fI=["get","getKey","getAll","getAllKeys","count"],pI=["put","add","delete","clear"],mf=new Map;function zy(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(mf.get(e))return mf.get(e);const t=e.replace(/FromIndex$/,""),s=e!==t,o=pI.includes(t);if(!(t in(s?IDBIndex:IDBObjectStore).prototype)||!(o||fI.includes(t)))return;const l=async function(c,...h){const p=this.transaction(c,o?"readwrite":"readonly");let y=p.store;return s&&(y=y.index(h.shift())),(await Promise.all([y[t](...h),o&&p.done]))[0]};return mf.set(e,l),l}uI(n=>({...n,get:(e,t,s)=>zy(e,t)||n.get(e,t,s),has:(e,t)=>!!zy(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mI{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(gI(t)){const s=t.getImmediate();return`${s.library}/${s.version}`}else return null}).filter(t=>t).join(" ")}}function gI(n){return n.getComponent()?.type==="VERSION"}const Nf="@firebase/app",By="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=new hp("@firebase/app"),yI="@firebase/app-compat",vI="@firebase/analytics-compat",_I="@firebase/analytics",wI="@firebase/app-check-compat",xI="@firebase/app-check",EI="@firebase/auth",TI="@firebase/auth-compat",II="@firebase/database",SI="@firebase/data-connect",bI="@firebase/database-compat",kI="@firebase/functions",CI="@firebase/functions-compat",AI="@firebase/installations",RI="@firebase/installations-compat",NI="@firebase/messaging",PI="@firebase/messaging-compat",DI="@firebase/performance",jI="@firebase/performance-compat",VI="@firebase/remote-config",LI="@firebase/remote-config-compat",MI="@firebase/storage",OI="@firebase/storage-compat",FI="@firebase/firestore",UI="@firebase/ai",zI="@firebase/firestore-compat",BI="firebase",$I="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pf="[DEFAULT]",HI={[Nf]:"fire-core",[yI]:"fire-core-compat",[_I]:"fire-analytics",[vI]:"fire-analytics-compat",[xI]:"fire-app-check",[wI]:"fire-app-check-compat",[EI]:"fire-auth",[TI]:"fire-auth-compat",[II]:"fire-rtdb",[SI]:"fire-data-connect",[bI]:"fire-rtdb-compat",[kI]:"fire-fn",[CI]:"fire-fn-compat",[AI]:"fire-iid",[RI]:"fire-iid-compat",[NI]:"fire-fcm",[PI]:"fire-fcm-compat",[DI]:"fire-perf",[jI]:"fire-perf-compat",[VI]:"fire-rc",[LI]:"fire-rc-compat",[MI]:"fire-gcs",[OI]:"fire-gcs-compat",[FI]:"fire-fst",[zI]:"fire-fst-compat",[UI]:"fire-vertex","fire-js":"fire-js",[BI]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,WI=new Map,Df=new Map;function $y(n,e){try{n.container.addComponent(e)}catch(t){Yr.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Ho(n){const e=n.name;if(Df.has(e))return Yr.debug(`There were multiple attempts to register component ${e}.`),!1;Df.set(e,n);for(const t of jc.values())$y(t,n);for(const t of WI.values())$y(t,n);return!0}function pp(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function An(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qI={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Bs=new jl("app","Firebase",qI);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(e,t,s){this._isDeleted=!1,this._options={...e},this._config={...t},this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=s,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Bs.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ta=$I;function Y0(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const s={name:Pf,automaticDataCollectionEnabled:!0,...e},o=s.name;if(typeof o!="string"||!o)throw Bs.create("bad-app-name",{appName:String(o)});if(t||(t=H0()),!t)throw Bs.create("no-options");const l=jc.get(o);if(l){if(Li(t,l.options)&&Li(s,l.config))return l;throw Bs.create("duplicate-app",{appName:o})}const c=new ZT(o);for(const p of Df.values())c.addComponent(p);const h=new GI(t,s,c);return jc.set(o,h),h}function X0(n=Pf){const e=jc.get(n);if(!e&&n===Pf&&H0())return Y0();if(!e)throw Bs.create("no-app",{appName:n});return e}function $s(n,e,t){let s=HI[n]??n;t&&(s+=`-${t}`);const o=s.match(/\s|\//),l=e.match(/\s|\//);if(o||l){const c=[`Unable to register library "${s}" with version "${e}":`];o&&c.push(`library name "${s}" contains illegal characters (whitespace or "/")`),o&&l&&c.push("and"),l&&c.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Yr.warn(c.join(" "));return}Ho(new Mi(`${s}-version`,()=>({library:s,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const KI="firebase-heartbeat-database",QI=1,_l="firebase-heartbeat-store";let gf=null;function J0(){return gf||(gf=hI(KI,QI,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(_l)}catch(t){console.warn(t)}}}}).catch(n=>{throw Bs.create("idb-open",{originalErrorMessage:n.message})})),gf}async function YI(n){try{const t=(await J0()).transaction(_l),s=await t.objectStore(_l).get(Z0(n));return await t.done,s}catch(e){if(e instanceof ns)Yr.warn(e.message);else{const t=Bs.create("idb-get",{originalErrorMessage:e?.message});Yr.warn(t.message)}}}async function Hy(n,e){try{const s=(await J0()).transaction(_l,"readwrite");await s.objectStore(_l).put(e,Z0(n)),await s.done}catch(t){if(t instanceof ns)Yr.warn(t.message);else{const s=Bs.create("idb-set",{originalErrorMessage:t?.message});Yr.warn(s.message)}}}function Z0(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XI=1024,JI=30;class ZI{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new tS(t),this._heartbeatsCachePromise=this._storage.read().then(s=>(this._heartbeatsCache=s,s))}async triggerHeartbeat(){try{const t=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Wy();if(this._heartbeatsCache?.heartbeats==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:t}),this._heartbeatsCache.heartbeats.length>JI){const o=nS(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(e){Yr.warn(e)}}async getHeartbeatsHeader(){try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache?.heartbeats==null||this._heartbeatsCache.heartbeats.length===0)return"";const e=Wy(),{heartbeatsToSend:t,unsentEntries:s}=eS(this._heartbeatsCache.heartbeats),o=Dc(JSON.stringify({version:2,heartbeats:t}));return this._heartbeatsCache.lastSentHeartbeatDate=e,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),o}catch(e){return Yr.warn(e),""}}}function Wy(){return new Date().toISOString().substring(0,10)}function eS(n,e=XI){const t=[];let s=n.slice();for(const o of n){const l=t.find(c=>c.agent===o.agent);if(l){if(l.dates.push(o.date),qy(t)>e){l.dates.pop();break}}else if(t.push({agent:o.agent,dates:[o.date]}),qy(t)>e){t.pop();break}s=s.slice(1)}return{heartbeatsToSend:t,unsentEntries:s}}class tS{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return zT()?BT().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await YI(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Hy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const s=await this.read();return Hy(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...e.heartbeats]})}else return}}function qy(n){return Dc(JSON.stringify({version:2,heartbeats:n})).length}function nS(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let s=1;s<n.length;s++)n[s].date<t&&(t=n[s].date,e=s);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rS(n){Ho(new Mi("platform-logger",e=>new mI(e),"PRIVATE")),Ho(new Mi("heartbeat",e=>new ZI(e),"PRIVATE")),$s(Nf,By,n),$s(Nf,By,"esm2020"),$s("fire-js","")}rS("");var sS="firebase",iS="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */$s(sS,iS,"app");function e_(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const oS=e_,t_=new jl("auth","Firebase",e_());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new hp("@firebase/auth");function aS(n,...e){Vc.logLevel<=Fe.WARN&&Vc.warn(`Auth (${ta}): ${n}`,...e)}function Ec(n,...e){Vc.logLevel<=Fe.ERROR&&Vc.error(`Auth (${ta}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hn(n,...e){throw mp(n,...e)}function yr(n,...e){return mp(n,...e)}function n_(n,e,t){const s={...oS(),[e]:t};return new jl("auth","Firebase",s).create(e,{appName:n.name})}function qr(n){return n_(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function mp(n,...e){if(typeof n!="string"){const t=e[0],s=[...e.slice(1)];return s[0]&&(s[0].appName=n.name),n._errorFactory.create(t,...s)}return t_.create(n,...e)}function ke(n,e,...t){if(!n)throw mp(e,...t)}function $r(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Ec(e),new Error(e)}function Xr(n,e){n||$r(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(){return typeof self<"u"&&self.location?.href||""}function lS(){return Gy()==="http:"||Gy()==="https:"}function Gy(){return typeof self<"u"&&self.location?.protocol||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uS(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(lS()||MT()||"connection"in navigator)?navigator.onLine:!0}function cS(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ll{constructor(e,t){this.shortDelay=e,this.longDelay=t,Xr(t>e,"Short delay should be less than long delay!"),this.isMobile=jT()||OT()}get(){return uS()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gp(n,e){Xr(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r_{static initialize(e,t,s){this.fetchImpl=e,t&&(this.headersImpl=t),s&&(this.responseImpl=s)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;$r("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;$r("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;$r("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dS={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hS=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],fS=new Ll(3e4,6e4);function Js(n,e){return n.tenantId&&!e.tenantId?{...e,tenantId:n.tenantId}:e}async function Zs(n,e,t,s,o={}){return s_(n,o,async()=>{let l={},c={};s&&(e==="GET"?c=s:l={body:JSON.stringify(s)});const h=Vl({key:n.config.apiKey,...c}).slice(1),p=await n._getAdditionalHeaders();p["Content-Type"]="application/json",n.languageCode&&(p["X-Firebase-Locale"]=n.languageCode);const y={method:e,headers:p,...l};return LT()||(y.referrerPolicy="no-referrer"),n.emulatorConfig&&ea(n.emulatorConfig.host)&&(y.credentials="include"),r_.fetch()(await i_(n,n.config.apiHost,t,h),y)})}async function s_(n,e,t){n._canInitEmulator=!1;const s={...dS,...e};try{const o=new mS(n),l=await Promise.race([t(),o.promise]);o.clearNetworkTimeout();const c=await l.json();if("needConfirmation"in c)throw hc(n,"account-exists-with-different-credential",c);if(l.ok&&!("errorMessage"in c))return c;{const h=l.ok?c.errorMessage:c.error.message,[p,y]=h.split(" : ");if(p==="FEDERATED_USER_ID_ALREADY_LINKED")throw hc(n,"credential-already-in-use",c);if(p==="EMAIL_EXISTS")throw hc(n,"email-already-in-use",c);if(p==="USER_DISABLED")throw hc(n,"user-disabled",c);const w=s[p]||p.toLowerCase().replace(/[_\s]+/g,"-");if(y)throw n_(n,w,y);Hn(n,w)}}catch(o){if(o instanceof ns)throw o;Hn(n,"network-request-failed",{message:String(o)})}}async function Ml(n,e,t,s,o={}){const l=await Zs(n,e,t,s,o);return"mfaPendingCredential"in l&&Hn(n,"multi-factor-auth-required",{_serverResponse:l}),l}async function i_(n,e,t,s){const o=`${e}${t}?${s}`,l=n,c=l.config.emulator?gp(n.config,o):`${n.config.apiScheme}://${o}`;return hS.includes(t)&&(await l._persistenceManagerAvailable,l._getPersistenceType()==="COOKIE")?l._getPersistence()._getFinalTarget(c).toString():c}function pS(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class mS{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,s)=>{this.timer=setTimeout(()=>s(yr(this.auth,"network-request-failed")),fS.get())})}}function hc(n,e,t){const s={appName:n.name};t.email&&(s.email=t.email),t.phoneNumber&&(s.phoneNumber=t.phoneNumber);const o=yr(n,e,s);return o.customData._tokenResponse=t,o}function Ky(n){return n!==void 0&&n.enterprise!==void 0}class gS{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return pS(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yS(n,e){return Zs(n,"GET","/v2/recaptchaConfig",Js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vS(n,e){return Zs(n,"POST","/v1/accounts:delete",e)}async function Lc(n,e){return Zs(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fl(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function _S(n,e=!1){const t=At(n),s=await t.getIdToken(e),o=yp(s);ke(o&&o.exp&&o.auth_time&&o.iat,t.auth,"internal-error");const l=typeof o.firebase=="object"?o.firebase:void 0,c=l?.sign_in_provider;return{claims:o,token:s,authTime:fl(yf(o.auth_time)),issuedAtTime:fl(yf(o.iat)),expirationTime:fl(yf(o.exp)),signInProvider:c||null,signInSecondFactor:l?.sign_in_second_factor||null}}function yf(n){return Number(n)*1e3}function yp(n){const[e,t,s]=n.split(".");if(e===void 0||t===void 0||s===void 0)return Ec("JWT malformed, contained fewer than 3 sections"),null;try{const o=B0(t);return o?JSON.parse(o):(Ec("Failed to decode base64 JWT payload"),null)}catch(o){return Ec("Caught error parsing JWT payload as JSON",o?.toString()),null}}function Qy(n){const e=yp(n);return ke(e,"internal-error"),ke(typeof e.exp<"u","internal-error"),ke(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wl(n,e,t=!1){if(t)return e;try{return await e}catch(s){throw s instanceof ns&&wS(s)&&n.auth.currentUser===n&&await n.auth.signOut(),s}}function wS({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xS{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const t=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),t}else{this.errorBackoff=3e4;const s=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,s)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=fl(this.lastLoginAt),this.creationTime=fl(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mc(n){const e=n.auth,t=await n.getIdToken(),s=await wl(n,Lc(e,{idToken:t}));ke(s?.users.length,e,"internal-error");const o=s.users[0];n._notifyReloadListener(o);const l=o.providerUserInfo?.length?o_(o.providerUserInfo):[],c=TS(n.providerData,l),h=n.isAnonymous,p=!(n.email&&o.passwordHash)&&!c?.length,y=h?p:!1,w={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:c,metadata:new Vf(o.createdAt,o.lastLoginAt),isAnonymous:y};Object.assign(n,w)}async function ES(n){const e=At(n);await Mc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function TS(n,e){return[...n.filter(s=>!e.some(o=>o.providerId===s.providerId)),...e]}function o_(n){return n.map(({providerId:e,...t})=>({providerId:e,uid:t.rawId||"",displayName:t.displayName||null,email:t.email||null,phoneNumber:t.phoneNumber||null,photoURL:t.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function IS(n,e){const t=await s_(n,{},async()=>{const s=Vl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:o,apiKey:l}=n.config,c=await i_(n,o,"/v1/token",`key=${l}`),h=await n._getAdditionalHeaders();h["Content-Type"]="application/x-www-form-urlencoded";const p={method:"POST",headers:h,body:s};return n.emulatorConfig&&ea(n.emulatorConfig.host)&&(p.credentials="include"),r_.fetch()(c,p)});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function SS(n,e){return Zs(n,"POST","/v2/accounts:revokeToken",Js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){ke(e.idToken,"internal-error"),ke(typeof e.idToken<"u","internal-error"),ke(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Qy(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){ke(e.length!==0,"internal-error");const t=Qy(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(ke(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:s,refreshToken:o,expiresIn:l}=await IS(e,t);this.updateTokensAndExpiration(s,o,Number(l))}updateTokensAndExpiration(e,t,s){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+s*1e3}static fromJSON(e,t){const{refreshToken:s,accessToken:o,expirationTime:l}=t,c=new Uo;return s&&(ke(typeof s=="string","internal-error",{appName:e}),c.refreshToken=s),o&&(ke(typeof o=="string","internal-error",{appName:e}),c.accessToken=o),l&&(ke(typeof l=="number","internal-error",{appName:e}),c.expirationTime=l),c}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Uo,this.toJSON())}_performRefresh(){return $r("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function js(n,e){ke(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class $n{constructor({uid:e,auth:t,stsTokenManager:s,...o}){this.providerId="firebase",this.proactiveRefresh=new xS(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=t,this.stsTokenManager=s,this.accessToken=s.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new Vf(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const t=await wl(this,this.stsTokenManager.getToken(this.auth,e));return ke(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return _S(this,e)}reload(){return ES(this)}_assign(e){this!==e&&(ke(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>({...t})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new $n({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return t.metadata._copy(this.metadata),t}_onReload(e){ke(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let s=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),s=!0),t&&await Mc(this),await this.auth._persistUserIfCurrent(this),s&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(An(this.auth.app))return Promise.reject(qr(this.auth));const e=await this.getIdToken();return await wl(this,vS(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){const s=t.displayName??void 0,o=t.email??void 0,l=t.phoneNumber??void 0,c=t.photoURL??void 0,h=t.tenantId??void 0,p=t._redirectEventId??void 0,y=t.createdAt??void 0,w=t.lastLoginAt??void 0,{uid:E,emailVerified:S,isAnonymous:N,providerData:U,stsTokenManager:z}=t;ke(E&&z,e,"internal-error");const k=Uo.fromJSON(this.name,z);ke(typeof E=="string",e,"internal-error"),js(s,e.name),js(o,e.name),ke(typeof S=="boolean",e,"internal-error"),ke(typeof N=="boolean",e,"internal-error"),js(l,e.name),js(c,e.name),js(h,e.name),js(p,e.name),js(y,e.name),js(w,e.name);const H=new $n({uid:E,auth:e,email:o,emailVerified:S,displayName:s,isAnonymous:N,photoURL:c,phoneNumber:l,tenantId:h,stsTokenManager:k,createdAt:y,lastLoginAt:w});return U&&Array.isArray(U)&&(H.providerData=U.map(K=>({...K}))),p&&(H._redirectEventId=p),H}static async _fromIdTokenResponse(e,t,s=!1){const o=new Uo;o.updateFromServerResponse(t);const l=new $n({uid:t.localId,auth:e,stsTokenManager:o,isAnonymous:s});return await Mc(l),l}static async _fromGetAccountInfoResponse(e,t,s){const o=t.users[0];ke(o.localId!==void 0,"internal-error");const l=o.providerUserInfo!==void 0?o_(o.providerUserInfo):[],c=!(o.email&&o.passwordHash)&&!l?.length,h=new Uo;h.updateFromIdToken(s);const p=new $n({uid:o.localId,auth:e,stsTokenManager:h,isAnonymous:c}),y={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new Vf(o.createdAt,o.lastLoginAt),isAnonymous:!(o.email&&o.passwordHash)&&!l?.length};return Object.assign(p,y),p}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yy=new Map;function Hr(n){Xr(n instanceof Function,"Expected a class definition");let e=Yy.get(n);return e?(Xr(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Yy.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a_{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}a_.type="NONE";const Xy=a_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tc(n,e,t){return`firebase:${n}:${e}:${t}`}class zo{constructor(e,t,s){this.persistence=e,this.auth=t,this.userKey=s;const{config:o,name:l}=this.auth;this.fullUserKey=Tc(this.userKey,o.apiKey,l),this.fullPersistenceKey=Tc("persistence",o.apiKey,l),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const t=await Lc(this.auth,{idToken:e}).catch(()=>{});return t?$n._fromGetAccountInfoResponse(this.auth,t,e):null}return $n._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,s="authUser"){if(!t.length)return new zo(Hr(Xy),e,s);const o=(await Promise.all(t.map(async y=>{if(await y._isAvailable())return y}))).filter(y=>y);let l=o[0]||Hr(Xy);const c=Tc(s,e.config.apiKey,e.name);let h=null;for(const y of t)try{const w=await y._get(c);if(w){let E;if(typeof w=="string"){const S=await Lc(e,{idToken:w}).catch(()=>{});if(!S)break;E=await $n._fromGetAccountInfoResponse(e,S,w)}else E=$n._fromJSON(e,w);y!==l&&(h=E),l=y;break}}catch{}const p=o.filter(y=>y._shouldAllowMigration);return!l._shouldAllowMigration||!p.length?new zo(l,e,s):(l=p[0],h&&await l._set(c,h.toJSON()),await Promise.all(t.map(async y=>{if(y!==l)try{await y._remove(c)}catch{}})),new zo(l,e,s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jy(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(d_(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(l_(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(f_(e))return"Blackberry";if(p_(e))return"Webos";if(u_(e))return"Safari";if((e.includes("chrome/")||c_(e))&&!e.includes("edge/"))return"Chrome";if(h_(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,s=n.match(t);if(s?.length===2)return s[1]}return"Other"}function l_(n=Qt()){return/firefox\//i.test(n)}function u_(n=Qt()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function c_(n=Qt()){return/crios\//i.test(n)}function d_(n=Qt()){return/iemobile/i.test(n)}function h_(n=Qt()){return/android/i.test(n)}function f_(n=Qt()){return/blackberry/i.test(n)}function p_(n=Qt()){return/webos/i.test(n)}function vp(n=Qt()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function bS(n=Qt()){return vp(n)&&!!window.navigator?.standalone}function kS(){return FT()&&document.documentMode===10}function m_(n=Qt()){return vp(n)||h_(n)||p_(n)||f_(n)||/windows phone/i.test(n)||d_(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g_(n,e=[]){let t;switch(n){case"Browser":t=Jy(Qt());break;case"Worker":t=`${Jy(Qt())}-${n}`;break;default:t=n}const s=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${ta}/${s}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CS{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const s=l=>new Promise((c,h)=>{try{const p=e(l);c(p)}catch(p){h(p)}});s.onAbort=t,this.queue.push(s);const o=this.queue.length-1;return()=>{this.queue[o]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const s of this.queue)await s(e),s.onAbort&&t.push(s.onAbort)}catch(s){t.reverse();for(const o of t)try{o()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:s?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AS(n,e={}){return Zs(n,"GET","/v2/passwordPolicy",Js(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RS=6;class NS{constructor(e){const t=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=t.minPasswordLength??RS,t.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=t.maxPasswordLength),t.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=t.containsLowercaseCharacter),t.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=t.containsUppercaseCharacter),t.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=t.containsNumericCharacter),t.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=t.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=e.allowedNonAlphanumericCharacters?.join("")??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const t={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,t),this.validatePasswordCharacterOptions(e,t),t.isValid&&(t.isValid=t.meetsMinPasswordLength??!0),t.isValid&&(t.isValid=t.meetsMaxPasswordLength??!0),t.isValid&&(t.isValid=t.containsLowercaseLetter??!0),t.isValid&&(t.isValid=t.containsUppercaseLetter??!0),t.isValid&&(t.isValid=t.containsNumericCharacter??!0),t.isValid&&(t.isValid=t.containsNonAlphanumericCharacter??!0),t}validatePasswordLengthOptions(e,t){const s=this.customStrengthOptions.minPasswordLength,o=this.customStrengthOptions.maxPasswordLength;s&&(t.meetsMinPasswordLength=e.length>=s),o&&(t.meetsMaxPasswordLength=e.length<=o)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let s;for(let o=0;o<e.length;o++)s=e.charAt(o),this.updatePasswordCharacterOptionsStatuses(t,s>="a"&&s<="z",s>="A"&&s<="Z",s>="0"&&s<="9",this.allowedNonAlphanumericCharacters.includes(s))}updatePasswordCharacterOptionsStatuses(e,t,s,o,l){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=s)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=o)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PS{constructor(e,t,s,o){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=s,this.config=o,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Zy(this),this.idTokenSubscription=new Zy(this),this.beforeStateQueue=new CS(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=t_,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=o.sdkClientVersion,this._persistenceManagerAvailable=new Promise(l=>this._resolvePersistenceManagerAvailable=l)}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Hr(t)),this._initializationPromise=this.queue(async()=>{if(!this._deleted&&(this.persistenceManager=await zo.create(this,e),this._resolvePersistenceManagerAvailable?.(),!this._deleted)){if(this._popupRedirectResolver?._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=this.currentUser?.uid||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await Lc(this,{idToken:e}),s=await $n._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(s)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){if(An(this.app)){const l=this.app.settings.authIdToken;return l?new Promise(c=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(l).then(c,c))}):this.directlySetCurrentUser(null)}const t=await this.assertedPersistence.getCurrentUser();let s=t,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const l=this.redirectUser?._redirectEventId,c=s?._redirectEventId,h=await this.tryRedirectSignIn(e);(!l||l===c)&&h?.user&&(s=h.user,o=!0)}if(!s)return this.directlySetCurrentUser(null);if(!s._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(s)}catch(l){s=t,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(l))}return s?this.reloadAndSetCurrentUserOrClear(s):this.directlySetCurrentUser(null)}return ke(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===s._redirectEventId?this.directlySetCurrentUser(s):this.reloadAndSetCurrentUserOrClear(s)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Mc(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=cS()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(An(this.app))return Promise.reject(qr(this));const t=e?At(e):null;return t&&ke(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&ke(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return An(this.app)?Promise.reject(qr(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return An(this.app)?Promise.reject(qr(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Hr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await AS(this),t=new NS(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new jl("auth","Firebase",e())}onAuthStateChanged(e,t,s){return this.registerStateListener(this.authStateSubscription,e,t,s)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,s){return this.registerStateListener(this.idTokenSubscription,e,t,s)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const s=this.onAuthStateChanged(()=>{s(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),s={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(s.tenantId=this.tenantId),await SS(this,s)}}toJSON(){return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:this._currentUser?.toJSON()}}async _setRedirectUser(e,t){const s=await this.getOrInitRedirectPersistenceManager(t);return e===null?s.removeCurrentUser():s.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Hr(e)||this._popupRedirectResolver;ke(t,this,"argument-error"),this.redirectPersistenceManager=await zo.create(this,[Hr(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){return this._isInitialized&&await this.queue(async()=>{}),this._currentUser?._redirectEventId===e?this._currentUser:this.redirectUser?._redirectEventId===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=this.currentUser?.uid??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,s,o){if(this._deleted)return()=>{};const l=typeof t=="function"?t:t.next.bind(t);let c=!1;const h=this._isInitialized?Promise.resolve():this._initializationPromise;if(ke(h,this,"internal-error"),h.then(()=>{c||l(this.currentUser)}),typeof t=="function"){const p=e.addObserver(t,s,o);return()=>{c=!0,p()}}else{const p=e.addObserver(t);return()=>{c=!0,p()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return ke(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=g_(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const t=await this.heartbeatServiceProvider.getImmediate({optional:!0})?.getHeartbeatsHeader();t&&(e["X-Firebase-Client"]=t);const s=await this._getAppCheckToken();return s&&(e["X-Firebase-AppCheck"]=s),e}async _getAppCheckToken(){if(An(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await this.appCheckServiceProvider.getImmediate({optional:!0})?.getToken();return e?.error&&aS(`Error while retrieving App Check token: ${e.error}`),e?.token}}function $i(n){return At(n)}class Zy{constructor(e){this.auth=e,this.observer=null,this.addObserver=GT(t=>this.observer=t)}get next(){return ke(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let id={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function DS(n){id=n}function y_(n){return id.loadJS(n)}function jS(){return id.recaptchaEnterpriseScript}function VS(){return id.gapiScript}function LS(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class MS{constructor(){this.enterprise=new OS}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class OS{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const FS="recaptcha-enterprise",v_="NO_RECAPTCHA";class US{constructor(e){this.type=FS,this.auth=$i(e)}async verify(e="verify",t=!1){async function s(l){if(!t){if(l.tenantId==null&&l._agentRecaptchaConfig!=null)return l._agentRecaptchaConfig.siteKey;if(l.tenantId!=null&&l._tenantRecaptchaConfigs[l.tenantId]!==void 0)return l._tenantRecaptchaConfigs[l.tenantId].siteKey}return new Promise(async(c,h)=>{yS(l,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(p=>{if(p.recaptchaKey===void 0)h(new Error("recaptcha Enterprise site key undefined"));else{const y=new gS(p);return l.tenantId==null?l._agentRecaptchaConfig=y:l._tenantRecaptchaConfigs[l.tenantId]=y,c(y.siteKey)}}).catch(p=>{h(p)})})}function o(l,c,h){const p=window.grecaptcha;Ky(p)?p.enterprise.ready(()=>{p.enterprise.execute(l,{action:e}).then(y=>{c(y)}).catch(()=>{c(v_)})}):h(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new MS().execute("siteKey",{action:"verify"}):new Promise((l,c)=>{s(this.auth).then(h=>{if(!t&&Ky(window.grecaptcha))o(h,l,c);else{if(typeof window>"u"){c(new Error("RecaptchaVerifier is only supported in browser"));return}let p=jS();p.length!==0&&(p+=h),y_(p).then(()=>{o(h,l,c)}).catch(y=>{c(y)})}}).catch(h=>{c(h)})})}}async function ev(n,e,t,s=!1,o=!1){const l=new US(n);let c;if(o)c=v_;else try{c=await l.verify(t)}catch{c=await l.verify(t,!0)}const h={...e};if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in h){const p=h.phoneEnrollmentInfo.phoneNumber,y=h.phoneEnrollmentInfo.recaptchaToken;Object.assign(h,{phoneEnrollmentInfo:{phoneNumber:p,recaptchaToken:y,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in h){const p=h.phoneSignInInfo.recaptchaToken;Object.assign(h,{phoneSignInInfo:{recaptchaToken:p,captchaResponse:c,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return h}return s?Object.assign(h,{captchaResp:c}):Object.assign(h,{captchaResponse:c}),Object.assign(h,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(h,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),h}async function Lf(n,e,t,s,o){if(n._getRecaptchaConfig()?.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await ev(n,e,t,t==="getOobCode");return s(n,l)}else return s(n,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const c=await ev(n,e,t,t==="getOobCode");return s(n,c)}else return Promise.reject(l)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zS(n,e){const t=pp(n,"auth");if(t.isInitialized()){const o=t.getImmediate(),l=t.getOptions();if(Li(l,e??{}))return o;Hn(o,"already-initialized")}return t.initialize({options:e})}function BS(n,e){const t=e?.persistence||[],s=(Array.isArray(t)?t:[t]).map(Hr);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(s,e?.popupRedirectResolver)}function $S(n,e,t){const s=$i(n);ke(/^https?:\/\//.test(e),s,"invalid-emulator-scheme");const o=!1,l=__(e),{host:c,port:h}=HS(e),p=h===null?"":`:${h}`,y={url:`${l}//${c}${p}/`},w=Object.freeze({host:c,port:h,protocol:l.replace(":",""),options:Object.freeze({disableWarnings:o})});if(!s._canInitEmulator){ke(s.config.emulator&&s.emulatorConfig,s,"emulator-config-failed"),ke(Li(y,s.config.emulator)&&Li(w,s.emulatorConfig),s,"emulator-config-failed");return}s.config.emulator=y,s.emulatorConfig=w,s.settings.appVerificationDisabledForTesting=!0,ea(c)?(q0(`${l}//${c}${p}`),G0("Auth",!0)):WS()}function __(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function HS(n){const e=__(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const s=t[2].split("@").pop()||"",o=/^(\[[^\]]+\])(:|$)/.exec(s);if(o){const l=o[1];return{host:l,port:tv(s.substr(l.length+1))}}else{const[l,c]=s.split(":");return{host:l,port:tv(c)}}}function tv(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function WS(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _p{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $r("not implemented")}_getIdTokenResponse(e){return $r("not implemented")}_linkToIdToken(e,t){return $r("not implemented")}_getReauthenticationResolver(e){return $r("not implemented")}}async function qS(n,e){return Zs(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GS(n,e){return Ml(n,"POST","/v1/accounts:signInWithPassword",Js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KS(n,e){return Ml(n,"POST","/v1/accounts:signInWithEmailLink",Js(n,e))}async function QS(n,e){return Ml(n,"POST","/v1/accounts:signInWithEmailLink",Js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xl extends _p{constructor(e,t,s,o=null){super("password",s),this._email=e,this._password=t,this._tenantId=o}static _fromEmailAndPassword(e,t){return new xl(e,t,"password")}static _fromEmailAndCode(e,t,s=null){return new xl(e,t,"emailLink",s)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lf(e,t,"signInWithPassword",GS);case"emailLink":return KS(e,{email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const s={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Lf(e,s,"signUpPassword",qS);case"emailLink":return QS(e,{idToken:t,email:this._email,oobCode:this._password});default:Hn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bo(n,e){return Ml(n,"POST","/v1/accounts:signInWithIdp",Js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YS="http://localhost";class Oi extends _p{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Oi(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Hn("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:s,signInMethod:o,...l}=t;if(!s||!o)return null;const c=new Oi(s,o);return c.idToken=l.idToken||void 0,c.accessToken=l.accessToken||void 0,c.secret=l.secret,c.nonce=l.nonce,c.pendingToken=l.pendingToken||null,c}_getIdTokenResponse(e){const t=this.buildRequest();return Bo(e,t)}_linkToIdToken(e,t){const s=this.buildRequest();return s.idToken=t,Bo(e,s)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Bo(e,t)}buildRequest(){const e={requestUri:YS,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Vl(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XS(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function JS(n){const e=ol(al(n)).link,t=e?ol(al(e)).deep_link_id:null,s=ol(al(n)).deep_link_id;return(s?ol(al(s)).link:null)||s||t||e||n}class wp{constructor(e){const t=ol(al(e)),s=t.apiKey??null,o=t.oobCode??null,l=XS(t.mode??null);ke(s&&o&&l,"argument-error"),this.apiKey=s,this.operation=l,this.code=o,this.continueUrl=t.continueUrl??null,this.languageCode=t.lang??null,this.tenantId=t.tenantId??null}static parseLink(e){const t=JS(e);try{return new wp(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class na{constructor(){this.providerId=na.PROVIDER_ID}static credential(e,t){return xl._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const s=wp.parseLink(t);return ke(s,"argument-error"),xl._fromEmailAndCode(e,s.code,s.tenantId)}}na.PROVIDER_ID="password";na.EMAIL_PASSWORD_SIGN_IN_METHOD="password";na.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w_{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends w_{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ls extends Ol{constructor(){super("facebook.com")}static credential(e){return Oi._fromParams({providerId:Ls.PROVIDER_ID,signInMethod:Ls.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ls.credentialFromTaggedObject(e)}static credentialFromError(e){return Ls.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ls.credential(e.oauthAccessToken)}catch{return null}}}Ls.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ls.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ms extends Ol{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Oi._fromParams({providerId:Ms.PROVIDER_ID,signInMethod:Ms.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ms.credentialFromTaggedObject(e)}static credentialFromError(e){return Ms.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:s}=e;if(!t&&!s)return null;try{return Ms.credential(t,s)}catch{return null}}}Ms.GOOGLE_SIGN_IN_METHOD="google.com";Ms.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Os extends Ol{constructor(){super("github.com")}static credential(e){return Oi._fromParams({providerId:Os.PROVIDER_ID,signInMethod:Os.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Os.credentialFromTaggedObject(e)}static credentialFromError(e){return Os.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Os.credential(e.oauthAccessToken)}catch{return null}}}Os.GITHUB_SIGN_IN_METHOD="github.com";Os.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs extends Ol{constructor(){super("twitter.com")}static credential(e,t){return Oi._fromParams({providerId:Fs.PROVIDER_ID,signInMethod:Fs.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fs.credentialFromTaggedObject(e)}static credentialFromError(e){return Fs.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:s}=e;if(!t||!s)return null;try{return Fs.credential(t,s)}catch{return null}}}Fs.TWITTER_SIGN_IN_METHOD="twitter.com";Fs.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZS(n,e){return Ml(n,"POST","/v1/accounts:signUp",Js(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,s,o=!1){const l=await $n._fromIdTokenResponse(e,s,o),c=nv(s);return new Fi({user:l,providerId:c,_tokenResponse:s,operationType:t})}static async _forOperation(e,t,s){await e._updateTokensIfNecessary(s,!0);const o=nv(s);return new Fi({user:e,providerId:o,_tokenResponse:s,operationType:t})}}function nv(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oc extends ns{constructor(e,t,s,o){super(t.code,t.message),this.operationType=s,this.user=o,Object.setPrototypeOf(this,Oc.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:t.customData._serverResponse,operationType:s}}static _fromErrorAndOperation(e,t,s,o){return new Oc(e,t,s,o)}}function x_(n,e,t,s){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(l=>{throw l.code==="auth/multi-factor-auth-required"?Oc._fromErrorAndOperation(n,l,e,s):l})}async function eb(n,e,t=!1){const s=await wl(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Fi._forOperation(n,"link",s)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tb(n,e,t=!1){const{auth:s}=n;if(An(s.app))return Promise.reject(qr(s));const o="reauthenticate";try{const l=await wl(n,x_(s,o,e,n),t);ke(l.idToken,s,"internal-error");const c=yp(l.idToken);ke(c,s,"internal-error");const{sub:h}=c;return ke(n.uid===h,s,"user-mismatch"),Fi._forOperation(n,o,l)}catch(l){throw l?.code==="auth/user-not-found"&&Hn(s,"user-mismatch"),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(n,e,t=!1){if(An(n.app))return Promise.reject(qr(n));const s="signIn",o=await x_(n,s,e),l=await Fi._fromIdTokenResponse(n,s,o);return t||await n._updateCurrentUser(l.user),l}async function nb(n,e){return E_($i(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function T_(n){const e=$i(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function rb(n,e,t){if(An(n.app))return Promise.reject(qr(n));const s=$i(n),c=await Lf(s,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",ZS).catch(p=>{throw p.code==="auth/password-does-not-meet-requirements"&&T_(n),p}),h=await Fi._fromIdTokenResponse(s,"signIn",c);return await s._updateCurrentUser(h.user),h}function sb(n,e,t){return An(n.app)?Promise.reject(qr(n)):nb(At(n),na.credential(e,t)).catch(async s=>{throw s.code==="auth/password-does-not-meet-requirements"&&T_(n),s})}function ib(n,e,t,s){return At(n).onIdTokenChanged(e,t,s)}function ob(n,e,t){return At(n).beforeAuthStateChanged(e,t)}function ab(n,e,t,s){return At(n).onAuthStateChanged(e,t,s)}function I_(n){return At(n).signOut()}const Fc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class S_{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Fc,"1"),this.storage.removeItem(Fc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lb=1e3,ub=10;class b_ extends S_{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=m_(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const s=this.storage.getItem(t),o=this.localCache[t];s!==o&&e(t,o,s)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((c,h,p)=>{this.notifyListeners(c,p)});return}const s=e.key;t?this.detachListener():this.stopPolling();const o=()=>{const c=this.storage.getItem(s);!t&&this.localCache[s]===c||this.notifyListeners(s,c)},l=this.storage.getItem(s);kS()&&l!==e.newValue&&e.newValue!==e.oldValue?setTimeout(o,ub):o()}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,s)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:s}),!0)})},lb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}b_.type="LOCAL";const cb=b_;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k_ extends S_{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}k_.type="SESSION";const C_=k_;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function db(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class od{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(o=>o.isListeningto(e));if(t)return t;const s=new od(e);return this.receivers.push(s),s}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:s,eventType:o,data:l}=t.data,c=this.handlersMap[o];if(!c?.size)return;t.ports[0].postMessage({status:"ack",eventId:s,eventType:o});const h=Array.from(c).map(async y=>y(t.origin,l)),p=await db(h);t.ports[0].postMessage({status:"done",eventId:s,eventType:o,response:p})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}od.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xp(n="",e=10){let t="";for(let s=0;s<e;s++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hb{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,s=50){const o=typeof MessageChannel<"u"?new MessageChannel:null;if(!o)throw new Error("connection_unavailable");let l,c;return new Promise((h,p)=>{const y=xp("",20);o.port1.start();const w=setTimeout(()=>{p(new Error("unsupported_event"))},s);c={messageChannel:o,onMessage(E){const S=E;if(S.data.eventId===y)switch(S.data.status){case"ack":clearTimeout(w),l=setTimeout(()=>{p(new Error("timeout"))},3e3);break;case"done":clearTimeout(l),h(S.data.response);break;default:clearTimeout(w),clearTimeout(l),p(new Error("invalid_response"));break}}},this.handlers.add(c),o.port1.addEventListener("message",c.onMessage),this.target.postMessage({eventType:e,eventId:y,data:t},[o.port2])}).finally(()=>{c&&this.removeMessageHandler(c)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(){return window}function fb(n){vr().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function A_(){return typeof vr().WorkerGlobalScope<"u"&&typeof vr().importScripts=="function"}async function pb(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function mb(){return navigator?.serviceWorker?.controller||null}function gb(){return A_()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R_="firebaseLocalStorageDb",yb=1,Uc="firebaseLocalStorage",N_="fbase_key";class Fl{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function ad(n,e){return n.transaction([Uc],e?"readwrite":"readonly").objectStore(Uc)}function vb(){const n=indexedDB.deleteDatabase(R_);return new Fl(n).toPromise()}function Mf(){const n=indexedDB.open(R_,yb);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const s=n.result;try{s.createObjectStore(Uc,{keyPath:N_})}catch(o){t(o)}}),n.addEventListener("success",async()=>{const s=n.result;s.objectStoreNames.contains(Uc)?e(s):(s.close(),await vb(),e(await Mf()))})})}async function rv(n,e,t){const s=ad(n,!0).put({[N_]:e,value:t});return new Fl(s).toPromise()}async function _b(n,e){const t=ad(n,!1).get(e),s=await new Fl(t).toPromise();return s===void 0?null:s.value}function sv(n,e){const t=ad(n,!0).delete(e);return new Fl(t).toPromise()}const wb=800,xb=3;class P_{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Mf(),this.db)}async _withRetries(e){let t=0;for(;;)try{const s=await this._openDb();return await e(s)}catch(s){if(t++>xb)throw s;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return A_()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=od._getInstance(gb()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){if(this.activeServiceWorker=await pb(),!this.activeServiceWorker)return;this.sender=new hb(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&e[0]?.fulfilled&&e[0]?.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||mb()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Mf();return await rv(e,Fc,"1"),await sv(e,Fc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(s=>rv(s,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(s=>_b(s,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sv(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(o=>{const l=ad(o,!1).getAll();return new Fl(l).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],s=new Set;if(e.length!==0)for(const{fbase_key:o,value:l}of e)s.add(o),JSON.stringify(this.localCache[o])!==JSON.stringify(l)&&(this.notifyListeners(o,l),t.push(o));for(const o of Object.keys(this.localCache))this.localCache[o]&&!s.has(o)&&(this.notifyListeners(o,null),t.push(o));return t}notifyListeners(e,t){this.localCache[e]=t;const s=this.listeners[e];if(s)for(const o of Array.from(s))o(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),wb)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}P_.type="LOCAL";const Eb=P_;new Ll(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(n,e){return e?Hr(e):(ke(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ep extends _p{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Bo(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Bo(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Bo(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ib(n){return E_(n.auth,new Ep(n),n.bypassAuthState)}function Sb(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),tb(t,new Ep(n),n.bypassAuthState)}async function bb(n){const{auth:e,user:t}=n;return ke(t,e,"internal-error"),eb(t,new Ep(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_{constructor(e,t,s,o,l=!1){this.auth=e,this.resolver=s,this.user=o,this.bypassAuthState=l,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(s){this.reject(s)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:s,postBody:o,tenantId:l,error:c,type:h}=e;if(c){this.reject(c);return}const p={auth:this.auth,requestUri:t,sessionId:s,tenantId:l||void 0,postBody:o||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(h)(p))}catch(y){this.reject(y)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ib;case"linkViaPopup":case"linkViaRedirect":return bb;case"reauthViaPopup":case"reauthViaRedirect":return Sb;default:Hn(this.auth,"internal-error")}}resolve(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Xr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb=new Ll(2e3,1e4);class Fo extends D_{constructor(e,t,s,o,l){super(e,t,o,l),this.provider=s,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return ke(e,this.auth,"internal-error"),e}async onExecution(){Xr(this.filter.length===1,"Popup operations only handle one event");const e=xp();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(yr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){return this.authWindow?.associatedEvent||null}cancel(){this.reject(yr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{if(this.authWindow?.window?.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(yr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,kb.get())};e()}}Fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb="pendingRedirect",Ic=new Map;class Ab extends D_{constructor(e,t,s=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,s),this.eventId=null}async execute(){let e=Ic.get(this.auth._key());if(!e){try{const s=await Rb(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(s)}catch(t){e=()=>Promise.reject(t)}Ic.set(this.auth._key(),e)}return this.bypassAuthState||Ic.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function Rb(n,e){const t=Db(e),s=Pb(n);if(!await s._isAvailable())return!1;const o=await s._get(t)==="true";return await s._remove(t),o}function Nb(n,e){Ic.set(n._key(),e)}function Pb(n){return Hr(n._redirectPersistence)}function Db(n){return Tc(Cb,n.config.apiKey,n.name)}async function jb(n,e,t=!1){if(An(n.app))return Promise.reject(qr(n));const s=$i(n),o=Tb(s,e),c=await new Ab(s,o,t).execute();return c&&!t&&(delete c.user._redirectEventId,await s._persistUserIfCurrent(c.user),await s._setRedirectUser(null,e)),c}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vb=600*1e3;class Lb{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(s=>{this.isEventForConsumer(e,s)&&(t=!0,this.sendToConsumer(e,s),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Mb(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){if(e.error&&!j_(e)){const s=e.error.code?.split("auth/")[1]||"internal-error";t.onError(yr(this.auth,s))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const s=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&s}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=Vb&&this.cachedEventUids.clear(),this.cachedEventUids.has(iv(e))}saveEventToCache(e){this.cachedEventUids.add(iv(e)),this.lastProcessedEventTime=Date.now()}}function iv(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function j_({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Mb(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return j_(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ob(n,e={}){return Zs(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Ub=/^https?/;async function zb(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Ob(n);for(const t of e)try{if(Bb(t))return}catch{}Hn(n,"unauthorized-domain")}function Bb(n){const e=jf(),{protocol:t,hostname:s}=new URL(e);if(n.startsWith("chrome-extension://")){const c=new URL(n);return c.hostname===""&&s===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&c.hostname===s}if(!Ub.test(t))return!1;if(Fb.test(n))return s===n;const o=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+o+"|"+o+")$","i").test(s)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $b=new Ll(3e4,6e4);function ov(){const n=vr().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function Hb(n){return new Promise((e,t)=>{function s(){ov(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{ov(),t(yr(n,"network-request-failed"))},timeout:$b.get()})}if(vr().gapi?.iframes?.Iframe)e(gapi.iframes.getContext());else if(vr().gapi?.load)s();else{const o=LS("iframefcb");return vr()[o]=()=>{gapi.load?s():t(yr(n,"network-request-failed"))},y_(`${VS()}?onload=${o}`).catch(l=>t(l))}}).catch(e=>{throw Sc=null,e})}let Sc=null;function Wb(n){return Sc=Sc||Hb(n),Sc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qb=new Ll(5e3,15e3),Gb="__/auth/iframe",Kb="emulator/auth/iframe",Qb={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Yb=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Xb(n){const e=n.config;ke(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?gp(e,Kb):`https://${n.config.authDomain}/${Gb}`,s={apiKey:e.apiKey,appName:n.name,v:ta},o=Yb.get(n.config.apiHost);o&&(s.eid=o);const l=n._getFrameworks();return l.length&&(s.fw=l.join(",")),`${t}?${Vl(s).slice(1)}`}async function Jb(n){const e=await Wb(n),t=vr().gapi;return ke(t,n,"internal-error"),e.open({where:document.body,url:Xb(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Qb,dontclear:!0},s=>new Promise(async(o,l)=>{await s.restyle({setHideOnLeave:!1});const c=yr(n,"network-request-failed"),h=vr().setTimeout(()=>{l(c)},qb.get());function p(){vr().clearTimeout(h),o(s)}s.ping(p).then(p,()=>{l(c)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zb={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},ek=500,tk=600,nk="_blank",rk="http://localhost";class av{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function sk(n,e,t,s=ek,o=tk){const l=Math.max((window.screen.availHeight-o)/2,0).toString(),c=Math.max((window.screen.availWidth-s)/2,0).toString();let h="";const p={...Zb,width:s.toString(),height:o.toString(),top:l,left:c},y=Qt().toLowerCase();t&&(h=c_(y)?nk:t),l_(y)&&(e=e||rk,p.scrollbars="yes");const w=Object.entries(p).reduce((S,[N,U])=>`${S}${N}=${U},`,"");if(bS(y)&&h!=="_self")return ik(e||"",h),new av(null);const E=window.open(e||"",h,w);ke(E,n,"popup-blocked");try{E.focus()}catch{}return new av(E)}function ik(n,e){const t=document.createElement("a");t.href=n,t.target=e;const s=document.createEvent("MouseEvent");s.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ok="__/auth/handler",ak="emulator/auth/handler",lk=encodeURIComponent("fac");async function lv(n,e,t,s,o,l){ke(n.config.authDomain,n,"auth-domain-config-required"),ke(n.config.apiKey,n,"invalid-api-key");const c={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:s,v:ta,eventId:o};if(e instanceof w_){e.setDefaultLanguage(n.languageCode),c.providerId=e.providerId||"",qT(e.getCustomParameters())||(c.customParameters=JSON.stringify(e.getCustomParameters()));for(const[w,E]of Object.entries({}))c[w]=E}if(e instanceof Ol){const w=e.getScopes().filter(E=>E!=="");w.length>0&&(c.scopes=w.join(","))}n.tenantId&&(c.tid=n.tenantId);const h=c;for(const w of Object.keys(h))h[w]===void 0&&delete h[w];const p=await n._getAppCheckToken(),y=p?`#${lk}=${encodeURIComponent(p)}`:"";return`${uk(n)}?${Vl(h).slice(1)}${y}`}function uk({config:n}){return n.emulator?gp(n,ak):`https://${n.authDomain}/${ok}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vf="webStorageSupport";class ck{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=C_,this._completeRedirectFn=jb,this._overrideRedirectResult=Nb}async _openPopup(e,t,s,o){Xr(this.eventManagers[e._key()]?.manager,"_initialize() not called before _openPopup()");const l=await lv(e,t,s,jf(),o);return sk(e,l,xp())}async _openRedirect(e,t,s,o){await this._originValidation(e);const l=await lv(e,t,s,jf(),o);return fb(l),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:o,promise:l}=this.eventManagers[t];return o?Promise.resolve(o):(Xr(l,"If manager is not set, promise should be"),l)}const s=this.initAndGetManager(e);return this.eventManagers[t]={promise:s},s.catch(()=>{delete this.eventManagers[t]}),s}async initAndGetManager(e){const t=await Jb(e),s=new Lb(e);return t.register("authEvent",o=>(ke(o?.authEvent,e,"invalid-auth-event"),{status:s.onEvent(o.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:s},this.iframes[e._key()]=t,s}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(vf,{type:vf},o=>{const l=o?.[0]?.[vf];l!==void 0&&t(!!l),Hn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=zb(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return m_()||u_()||vp()}}const dk=ck;var uv="@firebase/auth",cv="1.11.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hk{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){return this.assertAuthConfigured(),this.auth.currentUser?.uid||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(s=>{e(s?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){ke(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fk(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function pk(n){Ho(new Mi("auth",(e,{options:t})=>{const s=e.getProvider("app").getImmediate(),o=e.getProvider("heartbeat"),l=e.getProvider("app-check-internal"),{apiKey:c,authDomain:h}=s.options;ke(c&&!c.includes(":"),"invalid-api-key",{appName:s.name});const p={apiKey:c,authDomain:h,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:g_(n)},y=new PS(s,o,l,p);return BS(y,t),y},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,s)=>{e.getProvider("auth-internal").initialize()})),Ho(new Mi("auth-internal",e=>{const t=$i(e.getProvider("auth").getImmediate());return(s=>new hk(s))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),$s(uv,cv,fk(n)),$s(uv,cv,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mk=300,gk=W0("authIdTokenMaxAge")||mk;let dv=null;const yk=n=>async e=>{const t=e&&await e.getIdTokenResult(),s=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(s&&s>gk)return;const o=t?.token;dv!==o&&(dv=o,await fetch(n,{method:o?"POST":"DELETE",headers:o?{Authorization:`Bearer ${o}`}:{}}))};function vk(n=X0()){const e=pp(n,"auth");if(e.isInitialized())return e.getImmediate();const t=zS(n,{popupRedirectResolver:dk,persistence:[Eb,cb,C_]}),s=W0("authTokenSyncURL");if(s&&typeof isSecureContext=="boolean"&&isSecureContext){const l=new URL(s,location.origin);if(location.origin===l.origin){const c=yk(l.toString());ob(t,c,()=>c(t.currentUser)),ib(t,h=>c(h))}}const o=$0("auth");return o&&$S(t,`http://${o}`),t}function _k(){return document.getElementsByTagName("head")?.[0]??document}DS({loadJS(n){return new Promise((e,t)=>{const s=document.createElement("script");s.setAttribute("src",n),s.onload=e,s.onerror=o=>{const l=yr("internal-error");l.customData=o,t(l)},s.type="text/javascript",s.charset="UTF-8",_k().appendChild(s)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});pk("Browser");var hv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Hs,V_;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(P,T){function b(){}b.prototype=T.prototype,P.F=T.prototype,P.prototype=new b,P.prototype.constructor=P,P.D=function(V,j,D){for(var C=Array(arguments.length-2),O=2;O<arguments.length;O++)C[O-2]=arguments[O];return T.prototype[j].apply(V,C)}}function t(){this.blockSize=-1}function s(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(s,t),s.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(P,T,b){b||(b=0);const V=Array(16);if(typeof T=="string")for(var j=0;j<16;++j)V[j]=T.charCodeAt(b++)|T.charCodeAt(b++)<<8|T.charCodeAt(b++)<<16|T.charCodeAt(b++)<<24;else for(j=0;j<16;++j)V[j]=T[b++]|T[b++]<<8|T[b++]<<16|T[b++]<<24;T=P.g[0],b=P.g[1],j=P.g[2];let D=P.g[3],C;C=T+(D^b&(j^D))+V[0]+3614090360&4294967295,T=b+(C<<7&4294967295|C>>>25),C=D+(j^T&(b^j))+V[1]+3905402710&4294967295,D=T+(C<<12&4294967295|C>>>20),C=j+(b^D&(T^b))+V[2]+606105819&4294967295,j=D+(C<<17&4294967295|C>>>15),C=b+(T^j&(D^T))+V[3]+3250441966&4294967295,b=j+(C<<22&4294967295|C>>>10),C=T+(D^b&(j^D))+V[4]+4118548399&4294967295,T=b+(C<<7&4294967295|C>>>25),C=D+(j^T&(b^j))+V[5]+1200080426&4294967295,D=T+(C<<12&4294967295|C>>>20),C=j+(b^D&(T^b))+V[6]+2821735955&4294967295,j=D+(C<<17&4294967295|C>>>15),C=b+(T^j&(D^T))+V[7]+4249261313&4294967295,b=j+(C<<22&4294967295|C>>>10),C=T+(D^b&(j^D))+V[8]+1770035416&4294967295,T=b+(C<<7&4294967295|C>>>25),C=D+(j^T&(b^j))+V[9]+2336552879&4294967295,D=T+(C<<12&4294967295|C>>>20),C=j+(b^D&(T^b))+V[10]+4294925233&4294967295,j=D+(C<<17&4294967295|C>>>15),C=b+(T^j&(D^T))+V[11]+2304563134&4294967295,b=j+(C<<22&4294967295|C>>>10),C=T+(D^b&(j^D))+V[12]+1804603682&4294967295,T=b+(C<<7&4294967295|C>>>25),C=D+(j^T&(b^j))+V[13]+4254626195&4294967295,D=T+(C<<12&4294967295|C>>>20),C=j+(b^D&(T^b))+V[14]+2792965006&4294967295,j=D+(C<<17&4294967295|C>>>15),C=b+(T^j&(D^T))+V[15]+1236535329&4294967295,b=j+(C<<22&4294967295|C>>>10),C=T+(j^D&(b^j))+V[1]+4129170786&4294967295,T=b+(C<<5&4294967295|C>>>27),C=D+(b^j&(T^b))+V[6]+3225465664&4294967295,D=T+(C<<9&4294967295|C>>>23),C=j+(T^b&(D^T))+V[11]+643717713&4294967295,j=D+(C<<14&4294967295|C>>>18),C=b+(D^T&(j^D))+V[0]+3921069994&4294967295,b=j+(C<<20&4294967295|C>>>12),C=T+(j^D&(b^j))+V[5]+3593408605&4294967295,T=b+(C<<5&4294967295|C>>>27),C=D+(b^j&(T^b))+V[10]+38016083&4294967295,D=T+(C<<9&4294967295|C>>>23),C=j+(T^b&(D^T))+V[15]+3634488961&4294967295,j=D+(C<<14&4294967295|C>>>18),C=b+(D^T&(j^D))+V[4]+3889429448&4294967295,b=j+(C<<20&4294967295|C>>>12),C=T+(j^D&(b^j))+V[9]+568446438&4294967295,T=b+(C<<5&4294967295|C>>>27),C=D+(b^j&(T^b))+V[14]+3275163606&4294967295,D=T+(C<<9&4294967295|C>>>23),C=j+(T^b&(D^T))+V[3]+4107603335&4294967295,j=D+(C<<14&4294967295|C>>>18),C=b+(D^T&(j^D))+V[8]+1163531501&4294967295,b=j+(C<<20&4294967295|C>>>12),C=T+(j^D&(b^j))+V[13]+2850285829&4294967295,T=b+(C<<5&4294967295|C>>>27),C=D+(b^j&(T^b))+V[2]+4243563512&4294967295,D=T+(C<<9&4294967295|C>>>23),C=j+(T^b&(D^T))+V[7]+1735328473&4294967295,j=D+(C<<14&4294967295|C>>>18),C=b+(D^T&(j^D))+V[12]+2368359562&4294967295,b=j+(C<<20&4294967295|C>>>12),C=T+(b^j^D)+V[5]+4294588738&4294967295,T=b+(C<<4&4294967295|C>>>28),C=D+(T^b^j)+V[8]+2272392833&4294967295,D=T+(C<<11&4294967295|C>>>21),C=j+(D^T^b)+V[11]+1839030562&4294967295,j=D+(C<<16&4294967295|C>>>16),C=b+(j^D^T)+V[14]+4259657740&4294967295,b=j+(C<<23&4294967295|C>>>9),C=T+(b^j^D)+V[1]+2763975236&4294967295,T=b+(C<<4&4294967295|C>>>28),C=D+(T^b^j)+V[4]+1272893353&4294967295,D=T+(C<<11&4294967295|C>>>21),C=j+(D^T^b)+V[7]+4139469664&4294967295,j=D+(C<<16&4294967295|C>>>16),C=b+(j^D^T)+V[10]+3200236656&4294967295,b=j+(C<<23&4294967295|C>>>9),C=T+(b^j^D)+V[13]+681279174&4294967295,T=b+(C<<4&4294967295|C>>>28),C=D+(T^b^j)+V[0]+3936430074&4294967295,D=T+(C<<11&4294967295|C>>>21),C=j+(D^T^b)+V[3]+3572445317&4294967295,j=D+(C<<16&4294967295|C>>>16),C=b+(j^D^T)+V[6]+76029189&4294967295,b=j+(C<<23&4294967295|C>>>9),C=T+(b^j^D)+V[9]+3654602809&4294967295,T=b+(C<<4&4294967295|C>>>28),C=D+(T^b^j)+V[12]+3873151461&4294967295,D=T+(C<<11&4294967295|C>>>21),C=j+(D^T^b)+V[15]+530742520&4294967295,j=D+(C<<16&4294967295|C>>>16),C=b+(j^D^T)+V[2]+3299628645&4294967295,b=j+(C<<23&4294967295|C>>>9),C=T+(j^(b|~D))+V[0]+4096336452&4294967295,T=b+(C<<6&4294967295|C>>>26),C=D+(b^(T|~j))+V[7]+1126891415&4294967295,D=T+(C<<10&4294967295|C>>>22),C=j+(T^(D|~b))+V[14]+2878612391&4294967295,j=D+(C<<15&4294967295|C>>>17),C=b+(D^(j|~T))+V[5]+4237533241&4294967295,b=j+(C<<21&4294967295|C>>>11),C=T+(j^(b|~D))+V[12]+1700485571&4294967295,T=b+(C<<6&4294967295|C>>>26),C=D+(b^(T|~j))+V[3]+2399980690&4294967295,D=T+(C<<10&4294967295|C>>>22),C=j+(T^(D|~b))+V[10]+4293915773&4294967295,j=D+(C<<15&4294967295|C>>>17),C=b+(D^(j|~T))+V[1]+2240044497&4294967295,b=j+(C<<21&4294967295|C>>>11),C=T+(j^(b|~D))+V[8]+1873313359&4294967295,T=b+(C<<6&4294967295|C>>>26),C=D+(b^(T|~j))+V[15]+4264355552&4294967295,D=T+(C<<10&4294967295|C>>>22),C=j+(T^(D|~b))+V[6]+2734768916&4294967295,j=D+(C<<15&4294967295|C>>>17),C=b+(D^(j|~T))+V[13]+1309151649&4294967295,b=j+(C<<21&4294967295|C>>>11),C=T+(j^(b|~D))+V[4]+4149444226&4294967295,T=b+(C<<6&4294967295|C>>>26),C=D+(b^(T|~j))+V[11]+3174756917&4294967295,D=T+(C<<10&4294967295|C>>>22),C=j+(T^(D|~b))+V[2]+718787259&4294967295,j=D+(C<<15&4294967295|C>>>17),C=b+(D^(j|~T))+V[9]+3951481745&4294967295,P.g[0]=P.g[0]+T&4294967295,P.g[1]=P.g[1]+(j+(C<<21&4294967295|C>>>11))&4294967295,P.g[2]=P.g[2]+j&4294967295,P.g[3]=P.g[3]+D&4294967295}s.prototype.v=function(P,T){T===void 0&&(T=P.length);const b=T-this.blockSize,V=this.C;let j=this.h,D=0;for(;D<T;){if(j==0)for(;D<=b;)o(this,P,D),D+=this.blockSize;if(typeof P=="string"){for(;D<T;)if(V[j++]=P.charCodeAt(D++),j==this.blockSize){o(this,V),j=0;break}}else for(;D<T;)if(V[j++]=P[D++],j==this.blockSize){o(this,V),j=0;break}}this.h=j,this.o+=T},s.prototype.A=function(){var P=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);P[0]=128;for(var T=1;T<P.length-8;++T)P[T]=0;T=this.o*8;for(var b=P.length-8;b<P.length;++b)P[b]=T&255,T/=256;for(this.v(P),P=Array(16),T=0,b=0;b<4;++b)for(let V=0;V<32;V+=8)P[T++]=this.g[b]>>>V&255;return P};function l(P,T){var b=h;return Object.prototype.hasOwnProperty.call(b,P)?b[P]:b[P]=T(P)}function c(P,T){this.h=T;const b=[];let V=!0;for(let j=P.length-1;j>=0;j--){const D=P[j]|0;V&&D==T||(b[j]=D,V=!1)}this.g=b}var h={};function p(P){return-128<=P&&P<128?l(P,function(T){return new c([T|0],T<0?-1:0)}):new c([P|0],P<0?-1:0)}function y(P){if(isNaN(P)||!isFinite(P))return E;if(P<0)return k(y(-P));const T=[];let b=1;for(let V=0;P>=b;V++)T[V]=P/b|0,b*=4294967296;return new c(T,0)}function w(P,T){if(P.length==0)throw Error("number format error: empty string");if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(P.charAt(0)=="-")return k(w(P.substring(1),T));if(P.indexOf("-")>=0)throw Error('number format error: interior "-" character');const b=y(Math.pow(T,8));let V=E;for(let D=0;D<P.length;D+=8){var j=Math.min(8,P.length-D);const C=parseInt(P.substring(D,D+j),T);j<8?(j=y(Math.pow(T,j)),V=V.j(j).add(y(C))):(V=V.j(b),V=V.add(y(C)))}return V}var E=p(0),S=p(1),N=p(16777216);n=c.prototype,n.m=function(){if(z(this))return-k(this).m();let P=0,T=1;for(let b=0;b<this.g.length;b++){const V=this.i(b);P+=(V>=0?V:4294967296+V)*T,T*=4294967296}return P},n.toString=function(P){if(P=P||10,P<2||36<P)throw Error("radix out of range: "+P);if(U(this))return"0";if(z(this))return"-"+k(this).toString(P);const T=y(Math.pow(P,6));var b=this;let V="";for(;;){const j=ae(b,T).g;b=H(b,j.j(T));let D=((b.g.length>0?b.g[0]:b.h)>>>0).toString(P);if(b=j,U(b))return D+V;for(;D.length<6;)D="0"+D;V=D+V}},n.i=function(P){return P<0?0:P<this.g.length?this.g[P]:this.h};function U(P){if(P.h!=0)return!1;for(let T=0;T<P.g.length;T++)if(P.g[T]!=0)return!1;return!0}function z(P){return P.h==-1}n.l=function(P){return P=H(this,P),z(P)?-1:U(P)?0:1};function k(P){const T=P.g.length,b=[];for(let V=0;V<T;V++)b[V]=~P.g[V];return new c(b,~P.h).add(S)}n.abs=function(){return z(this)?k(this):this},n.add=function(P){const T=Math.max(this.g.length,P.g.length),b=[];let V=0;for(let j=0;j<=T;j++){let D=V+(this.i(j)&65535)+(P.i(j)&65535),C=(D>>>16)+(this.i(j)>>>16)+(P.i(j)>>>16);V=C>>>16,D&=65535,C&=65535,b[j]=C<<16|D}return new c(b,b[b.length-1]&-2147483648?-1:0)};function H(P,T){return P.add(k(T))}n.j=function(P){if(U(this)||U(P))return E;if(z(this))return z(P)?k(this).j(k(P)):k(k(this).j(P));if(z(P))return k(this.j(k(P)));if(this.l(N)<0&&P.l(N)<0)return y(this.m()*P.m());const T=this.g.length+P.g.length,b=[];for(var V=0;V<2*T;V++)b[V]=0;for(V=0;V<this.g.length;V++)for(let j=0;j<P.g.length;j++){const D=this.i(V)>>>16,C=this.i(V)&65535,O=P.i(j)>>>16,ie=P.i(j)&65535;b[2*V+2*j]+=C*ie,K(b,2*V+2*j),b[2*V+2*j+1]+=D*ie,K(b,2*V+2*j+1),b[2*V+2*j+1]+=C*O,K(b,2*V+2*j+1),b[2*V+2*j+2]+=D*O,K(b,2*V+2*j+2)}for(P=0;P<T;P++)b[P]=b[2*P+1]<<16|b[2*P];for(P=T;P<2*T;P++)b[P]=0;return new c(b,0)};function K(P,T){for(;(P[T]&65535)!=P[T];)P[T+1]+=P[T]>>>16,P[T]&=65535,T++}function Y(P,T){this.g=P,this.h=T}function ae(P,T){if(U(T))throw Error("division by zero");if(U(P))return new Y(E,E);if(z(P))return T=ae(k(P),T),new Y(k(T.g),k(T.h));if(z(T))return T=ae(P,k(T)),new Y(k(T.g),T.h);if(P.g.length>30){if(z(P)||z(T))throw Error("slowDivide_ only works with positive integers.");for(var b=S,V=T;V.l(P)<=0;)b=fe(b),V=fe(V);var j=he(b,1),D=he(V,1);for(V=he(V,2),b=he(b,2);!U(V);){var C=D.add(V);C.l(P)<=0&&(j=j.add(b),D=C),V=he(V,1),b=he(b,1)}return T=H(P,j.j(T)),new Y(j,T)}for(j=E;P.l(T)>=0;){for(b=Math.max(1,Math.floor(P.m()/T.m())),V=Math.ceil(Math.log(b)/Math.LN2),V=V<=48?1:Math.pow(2,V-48),D=y(b),C=D.j(T);z(C)||C.l(P)>0;)b-=V,D=y(b),C=D.j(T);U(D)&&(D=S),j=j.add(D),P=H(P,C)}return new Y(j,P)}n.B=function(P){return ae(this,P).h},n.and=function(P){const T=Math.max(this.g.length,P.g.length),b=[];for(let V=0;V<T;V++)b[V]=this.i(V)&P.i(V);return new c(b,this.h&P.h)},n.or=function(P){const T=Math.max(this.g.length,P.g.length),b=[];for(let V=0;V<T;V++)b[V]=this.i(V)|P.i(V);return new c(b,this.h|P.h)},n.xor=function(P){const T=Math.max(this.g.length,P.g.length),b=[];for(let V=0;V<T;V++)b[V]=this.i(V)^P.i(V);return new c(b,this.h^P.h)};function fe(P){const T=P.g.length+1,b=[];for(let V=0;V<T;V++)b[V]=P.i(V)<<1|P.i(V-1)>>>31;return new c(b,P.h)}function he(P,T){const b=T>>5;T%=32;const V=P.g.length-b,j=[];for(let D=0;D<V;D++)j[D]=T>0?P.i(D+b)>>>T|P.i(D+b+1)<<32-T:P.i(D+b);return new c(j,P.h)}s.prototype.digest=s.prototype.A,s.prototype.reset=s.prototype.u,s.prototype.update=s.prototype.v,V_=s,c.prototype.add=c.prototype.add,c.prototype.multiply=c.prototype.j,c.prototype.modulo=c.prototype.B,c.prototype.compare=c.prototype.l,c.prototype.toNumber=c.prototype.m,c.prototype.toString=c.prototype.toString,c.prototype.getBits=c.prototype.i,c.fromNumber=y,c.fromString=w,Hs=c}).apply(typeof hv<"u"?hv:typeof self<"u"?self:typeof window<"u"?window:{});var fc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var L_,ll,M_,bc,Of,O_,F_,U_;(function(){var n,e=Object.defineProperty;function t(u){u=[typeof globalThis=="object"&&globalThis,u,typeof window=="object"&&window,typeof self=="object"&&self,typeof fc=="object"&&fc];for(var v=0;v<u.length;++v){var _=u[v];if(_&&_.Math==Math)return _}throw Error("Cannot find global object")}var s=t(this);function o(u,v){if(v)e:{var _=s;u=u.split(".");for(var I=0;I<u.length-1;I++){var $=u[I];if(!($ in _))break e;_=_[$]}u=u[u.length-1],I=_[u],v=v(I),v!=I&&v!=null&&e(_,u,{configurable:!0,writable:!0,value:v})}}o("Symbol.dispose",function(u){return u||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(u){return u||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(u){return u||function(v){var _=[],I;for(I in v)Object.prototype.hasOwnProperty.call(v,I)&&_.push([I,v[I]]);return _}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var l=l||{},c=this||self;function h(u){var v=typeof u;return v=="object"&&u!=null||v=="function"}function p(u,v,_){return u.call.apply(u.bind,arguments)}function y(u,v,_){return y=p,y.apply(null,arguments)}function w(u,v){var _=Array.prototype.slice.call(arguments,1);return function(){var I=_.slice();return I.push.apply(I,arguments),u.apply(this,I)}}function E(u,v){function _(){}_.prototype=v.prototype,u.Z=v.prototype,u.prototype=new _,u.prototype.constructor=u,u.Ob=function(I,$,G){for(var se=Array(arguments.length-2),Ne=2;Ne<arguments.length;Ne++)se[Ne-2]=arguments[Ne];return v.prototype[$].apply(I,se)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?u=>u&&AsyncContext.Snapshot.wrap(u):u=>u;function N(u){const v=u.length;if(v>0){const _=Array(v);for(let I=0;I<v;I++)_[I]=u[I];return _}return[]}function U(u,v){for(let I=1;I<arguments.length;I++){const $=arguments[I];var _=typeof $;if(_=_!="object"?_:$?Array.isArray($)?"array":_:"null",_=="array"||_=="object"&&typeof $.length=="number"){_=u.length||0;const G=$.length||0;u.length=_+G;for(let se=0;se<G;se++)u[_+se]=$[se]}else u.push($)}}class z{constructor(v,_){this.i=v,this.j=_,this.h=0,this.g=null}get(){let v;return this.h>0?(this.h--,v=this.g,this.g=v.next,v.next=null):v=this.i(),v}}function k(u){c.setTimeout(()=>{throw u},0)}function H(){var u=P;let v=null;return u.g&&(v=u.g,u.g=u.g.next,u.g||(u.h=null),v.next=null),v}class K{constructor(){this.h=this.g=null}add(v,_){const I=Y.get();I.set(v,_),this.h?this.h.next=I:this.g=I,this.h=I}}var Y=new z(()=>new ae,u=>u.reset());class ae{constructor(){this.next=this.g=this.h=null}set(v,_){this.h=v,this.g=_,this.next=null}reset(){this.next=this.g=this.h=null}}let fe,he=!1,P=new K,T=()=>{const u=Promise.resolve(void 0);fe=()=>{u.then(b)}};function b(){for(var u;u=H();){try{u.h.call(u.g)}catch(_){k(_)}var v=Y;v.j(u),v.h<100&&(v.h++,u.next=v.g,v.g=u)}he=!1}function V(){this.u=this.u,this.C=this.C}V.prototype.u=!1,V.prototype.dispose=function(){this.u||(this.u=!0,this.N())},V.prototype[Symbol.dispose]=function(){this.dispose()},V.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function j(u,v){this.type=u,this.g=this.target=v,this.defaultPrevented=!1}j.prototype.h=function(){this.defaultPrevented=!0};var D=(function(){if(!c.addEventListener||!Object.defineProperty)return!1;var u=!1,v=Object.defineProperty({},"passive",{get:function(){u=!0}});try{const _=()=>{};c.addEventListener("test",_,v),c.removeEventListener("test",_,v)}catch{}return u})();function C(u){return/^[\s\xa0]*$/.test(u)}function O(u,v){j.call(this,u?u.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,u&&this.init(u,v)}E(O,j),O.prototype.init=function(u,v){const _=this.type=u.type,I=u.changedTouches&&u.changedTouches.length?u.changedTouches[0]:null;this.target=u.target||u.srcElement,this.g=v,v=u.relatedTarget,v||(_=="mouseover"?v=u.fromElement:_=="mouseout"&&(v=u.toElement)),this.relatedTarget=v,I?(this.clientX=I.clientX!==void 0?I.clientX:I.pageX,this.clientY=I.clientY!==void 0?I.clientY:I.pageY,this.screenX=I.screenX||0,this.screenY=I.screenY||0):(this.clientX=u.clientX!==void 0?u.clientX:u.pageX,this.clientY=u.clientY!==void 0?u.clientY:u.pageY,this.screenX=u.screenX||0,this.screenY=u.screenY||0),this.button=u.button,this.key=u.key||"",this.ctrlKey=u.ctrlKey,this.altKey=u.altKey,this.shiftKey=u.shiftKey,this.metaKey=u.metaKey,this.pointerId=u.pointerId||0,this.pointerType=u.pointerType,this.state=u.state,this.i=u,u.defaultPrevented&&O.Z.h.call(this)},O.prototype.h=function(){O.Z.h.call(this);const u=this.i;u.preventDefault?u.preventDefault():u.returnValue=!1};var ie="closure_listenable_"+(Math.random()*1e6|0),Te=0;function De(u,v,_,I,$){this.listener=u,this.proxy=null,this.src=v,this.type=_,this.capture=!!I,this.ha=$,this.key=++Te,this.da=this.fa=!1}function Q(u){u.da=!0,u.listener=null,u.proxy=null,u.src=null,u.ha=null}function we(u,v,_){for(const I in u)v.call(_,u[I],I,u)}function le(u,v){for(const _ in u)v.call(void 0,u[_],_,u)}function F(u){const v={};for(const _ in u)v[_]=u[_];return v}const Z="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _e(u,v){let _,I;for(let $=1;$<arguments.length;$++){I=arguments[$];for(_ in I)u[_]=I[_];for(let G=0;G<Z.length;G++)_=Z[G],Object.prototype.hasOwnProperty.call(I,_)&&(u[_]=I[_])}}function xe(u){this.src=u,this.g={},this.h=0}xe.prototype.add=function(u,v,_,I,$){const G=u.toString();u=this.g[G],u||(u=this.g[G]=[],this.h++);const se=Ve(u,v,I,$);return se>-1?(v=u[se],_||(v.fa=!1)):(v=new De(v,this.src,G,!!I,$),v.fa=_,u.push(v)),v};function je(u,v){const _=v.type;if(_ in u.g){var I=u.g[_],$=Array.prototype.indexOf.call(I,v,void 0),G;(G=$>=0)&&Array.prototype.splice.call(I,$,1),G&&(Q(v),u.g[_].length==0&&(delete u.g[_],u.h--))}}function Ve(u,v,_,I){for(let $=0;$<u.length;++$){const G=u[$];if(!G.da&&G.listener==v&&G.capture==!!_&&G.ha==I)return $}return-1}var be="closure_lm_"+(Math.random()*1e6|0),Oe={};function We(u,v,_,I,$){if(Array.isArray(v)){for(let G=0;G<v.length;G++)We(u,v[G],_,I,$);return null}return _=ca(_),u&&u[ie]?u.J(v,_,h(I)?!!I.capture:!1,$):vt(u,v,_,!1,I,$)}function vt(u,v,_,I,$,G){if(!v)throw Error("Invalid event type");const se=h($)?!!$.capture:!!$;let Ne=Gi(u);if(Ne||(u[be]=Ne=new xe(u)),_=Ne.add(v,_,I,se,G),_.proxy)return _;if(I=Yn(),_.proxy=I,I.src=u,I.listener=_,u.addEventListener)D||($=se),$===void 0&&($=!1),u.addEventListener(v.toString(),I,$);else if(u.attachEvent)u.attachEvent(qi(v.toString()),I);else if(u.addListener&&u.removeListener)u.addListener(I);else throw Error("addEventListener and attachEvent are unavailable.");return _}function Yn(){function u(_){return v.call(u.src,u.listener,_)}const v=Ql;return u}function Xn(u,v,_,I,$){if(Array.isArray(v))for(var G=0;G<v.length;G++)Xn(u,v[G],_,I,$);else I=h(I)?!!I.capture:!!I,_=ca(_),u&&u[ie]?(u=u.i,G=String(v).toString(),G in u.g&&(v=u.g[G],_=Ve(v,_,I,$),_>-1&&(Q(v[_]),Array.prototype.splice.call(v,_,1),v.length==0&&(delete u.g[G],u.h--)))):u&&(u=Gi(u))&&(v=u.g[v.toString()],u=-1,v&&(u=Ve(v,_,I,$)),(_=u>-1?v[u]:null)&&ss(_))}function ss(u){if(typeof u!="number"&&u&&!u.da){var v=u.src;if(v&&v[ie])je(v.i,u);else{var _=u.type,I=u.proxy;v.removeEventListener?v.removeEventListener(_,I,u.capture):v.detachEvent?v.detachEvent(qi(_),I):v.addListener&&v.removeListener&&v.removeListener(I),(_=Gi(v))?(je(_,u),_.h==0&&(_.src=null,v[be]=null)):Q(u)}}}function qi(u){return u in Oe?Oe[u]:Oe[u]="on"+u}function Ql(u,v){if(u.da)u=!0;else{v=new O(v,this);const _=u.listener,I=u.ha||u.src;u.fa&&ss(u),u=_.call(I,v)}return u}function Gi(u){return u=u[be],u instanceof xe?u:null}var si="__closure_events_fn_"+(Math.random()*1e9>>>0);function ca(u){return typeof u=="function"?u:(u[si]||(u[si]=function(v){return u.handleEvent(v)}),u[si])}function _t(){V.call(this),this.i=new xe(this),this.M=this,this.G=null}E(_t,V),_t.prototype[ie]=!0,_t.prototype.removeEventListener=function(u,v,_,I){Xn(this,u,v,_,I)};function pt(u,v){var _,I=u.G;if(I)for(_=[];I;I=I.G)_.push(I);if(u=u.M,I=v.type||v,typeof v=="string")v=new j(v,u);else if(v instanceof j)v.target=v.target||u;else{var $=v;v=new j(I,u),_e(v,$)}$=!0;let G,se;if(_)for(se=_.length-1;se>=0;se--)G=v.g=_[se],$=Dn(G,I,!0,v)&&$;if(G=v.g=u,$=Dn(G,I,!0,v)&&$,$=Dn(G,I,!1,v)&&$,_)for(se=0;se<_.length;se++)G=v.g=_[se],$=Dn(G,I,!1,v)&&$}_t.prototype.N=function(){if(_t.Z.N.call(this),this.i){var u=this.i;for(const v in u.g){const _=u.g[v];for(let I=0;I<_.length;I++)Q(_[I]);delete u.g[v],u.h--}}this.G=null},_t.prototype.J=function(u,v,_,I){return this.i.add(String(u),v,!1,_,I)},_t.prototype.K=function(u,v,_,I){return this.i.add(String(u),v,!0,_,I)};function Dn(u,v,_,I){if(v=u.i.g[String(v)],!v)return!0;v=v.concat();let $=!0;for(let G=0;G<v.length;++G){const se=v[G];if(se&&!se.da&&se.capture==_){const Ne=se.listener,mt=se.ha||se.src;se.fa&&je(u.i,se),$=Ne.call(mt,I)!==!1&&$}}return $&&!I.defaultPrevented}function da(u,v){if(typeof u!="function")if(u&&typeof u.handleEvent=="function")u=y(u.handleEvent,u);else throw Error("Invalid listener argument");return Number(v)>2147483647?-1:c.setTimeout(u,v||0)}function ha(u){u.g=da(()=>{u.g=null,u.i&&(u.i=!1,ha(u))},u.l);const v=u.h;u.h=null,u.m.apply(null,v)}class Yl extends V{constructor(v,_){super(),this.m=v,this.l=_,this.h=null,this.i=!1,this.g=null}j(v){this.h=arguments,this.g?this.i=!0:ha(this)}N(){super.N(),this.g&&(c.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(u){V.call(this),this.h=u,this.g={}}E(is,V);var fa=[];function Ki(u){we(u.g,function(v,_){this.g.hasOwnProperty(_)&&ss(v)},u),u.g={}}is.prototype.N=function(){is.Z.N.call(this),Ki(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var os=c.JSON.stringify,Xl=c.JSON.parse,ii=class{stringify(u){return c.JSON.stringify(u,void 0)}parse(u){return c.JSON.parse(u,void 0)}};function as(){}function Jl(){}var ls={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Qi(){j.call(this,"d")}E(Qi,j);function pa(){j.call(this,"c")}E(pa,j);var jn={},Yi=null;function us(){return Yi=Yi||new _t}jn.Ia="serverreachability";function Xi(u){j.call(this,jn.Ia,u)}E(Xi,j);function Ir(u){const v=us();pt(v,new Xi(v))}jn.STAT_EVENT="statevent";function Sr(u,v){j.call(this,jn.STAT_EVENT,u),this.stat=v}E(Sr,j);function ct(u){const v=us();pt(v,new Sr(v,u))}jn.Ja="timingevent";function ma(u,v){j.call(this,jn.Ja,u),this.size=v}E(ma,j);function cs(u,v){if(typeof u!="function")throw Error("Fn must not be null and must be a function");return c.setTimeout(function(){u()},v)}function ds(){this.g=!0}ds.prototype.ua=function(){this.g=!1};function Zl(u,v,_,I,$,G){u.info(function(){if(u.g)if(G){var se="",Ne=G.split("&");for(let Qe=0;Qe<Ne.length;Qe++){var mt=Ne[Qe].split("=");if(mt.length>1){const wt=mt[0];mt=mt[1];const gn=wt.split("_");se=gn.length>=2&&gn[1]=="type"?se+(wt+"="+mt+"&"):se+(wt+"=redacted&")}}}else se=null;else se=G;return"XMLHTTP REQ ("+I+") [attempt "+$+"]: "+v+`
`+_+`
`+se})}function eu(u,v,_,I,$,G,se){u.info(function(){return"XMLHTTP RESP ("+I+") [ attempt "+$+"]: "+v+`
`+_+`
`+G+" "+se})}function Jn(u,v,_,I){u.info(function(){return"XMLHTTP TEXT ("+v+"): "+oi(u,_)+(I?" "+I:"")})}function tu(u,v){u.info(function(){return"TIMEOUT: "+v})}ds.prototype.info=function(){};function oi(u,v){if(!u.g)return v;if(!v)return null;try{const G=JSON.parse(v);if(G){for(u=0;u<G.length;u++)if(Array.isArray(G[u])){var _=G[u];if(!(_.length<2)){var I=_[1];if(Array.isArray(I)&&!(I.length<1)){var $=I[0];if($!="noop"&&$!="stop"&&$!="close")for(let se=1;se<I.length;se++)I[se]=""}}}}return os(G)}catch{return v}}var hs={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},fs={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},nu;function br(){}E(br,as),br.prototype.g=function(){return new XMLHttpRequest},nu=new br;function Zn(u){return encodeURIComponent(String(u))}function Ji(u){var v=1;u=u.split(":");const _=[];for(;v>0&&u.length;)_.push(u.shift()),v--;return u.length&&_.push(u.join(":")),_}function xn(u,v,_,I){this.j=u,this.i=v,this.l=_,this.S=I||1,this.V=new is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ru}function ru(){this.i=null,this.g="",this.h=!1}var su={},ga={};function Vn(u,v,_){u.M=1,u.A=Cr(En(v)),u.u=_,u.R=!0,ya(u,null)}function ya(u,v){u.F=Date.now(),ai(u),u.B=En(u.A);var _=u.B,I=u.S;Array.isArray(I)||(I=[String(I)]),ka(_.i,"t",I),u.C=0,_=u.j.L,u.h=new ru,u.g=pu(u.j,_?v:null,!u.u),u.P>0&&(u.O=new Yl(y(u.Y,u,u.g),u.P)),v=u.V,_=u.g,I=u.ba;var $="readystatechange";Array.isArray($)||($&&(fa[0]=$.toString()),$=fa);for(let G=0;G<$.length;G++){const se=We(_,$[G],I||v.handleEvent,!1,v.h||v);if(!se)break;v.g[se.key]=se}v=u.J?F(u.J):{},u.u?(u.v||(u.v="POST"),v["Content-Type"]="application/x-www-form-urlencoded",u.g.ea(u.B,u.v,u.u,v)):(u.v="GET",u.g.ea(u.B,u.v,null,v)),Ir(),Zl(u.i,u.v,u.B,u.l,u.S,u.u)}xn.prototype.ba=function(u){u=u.target;const v=this.O;v&&or(u)==3?v.j():this.Y(u)},xn.prototype.Y=function(u){try{if(u==this.g)e:{const Ne=or(this.g),mt=this.g.ya(),Qe=this.g.ca();if(!(Ne<3)&&(Ne!=3||this.g&&(this.h.h||this.g.la()||hu(this.g)))){this.K||Ne!=4||mt==7||(mt==8||Qe<=0?Ir(3):Ir(2)),Zi(this);var v=this.g.ca();this.X=v;var _=iu(this);if(this.o=v==200,eu(this.i,this.v,this.B,this.l,this.S,Ne,v),this.o){if(this.U&&!this.L){t:{if(this.g){var I,$=this.g;if((I=$.g?$.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(I)){var G=I;break t}}G=null}if(u=G)Jn(this.i,this.l,u,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,et(this,u);else{this.o=!1,this.m=3,ct(12),kr(this),li(this);break e}}if(this.R){u=!0;let wt;for(;!this.K&&this.C<_.length;)if(wt=au(this,_),wt==ga){Ne==4&&(this.m=4,ct(14),u=!1),Jn(this.i,this.l,null,"[Incomplete Response]");break}else if(wt==su){this.m=4,ct(15),Jn(this.i,this.l,_,"[Invalid Chunk]"),u=!1;break}else Jn(this.i,this.l,wt,null),et(this,wt);if(ou(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ne!=4||_.length!=0||this.h.h||(this.m=1,ct(16),u=!1),this.o=this.o&&u,!u)Jn(this.i,this.l,_,"[Invalid Chunked Response]"),kr(this),li(this);else if(_.length>0&&!this.W){this.W=!0;var se=this.j;se.g==this&&se.aa&&!se.P&&(se.j.info("Great, no buffering proxy detected. Bytes received: "+_.length),yi(se),se.P=!0,ct(11))}}else Jn(this.i,this.l,_,null),et(this,_);Ne==4&&kr(this),this.o&&!this.K&&(Ne==4?uo(this.j,this):(this.o=!1,ai(this)))}else Aa(this.g),v==400&&_.indexOf("Unknown SID")>0?(this.m=3,ct(12)):(this.m=0,ct(13)),kr(this),li(this)}}}catch{}finally{}};function iu(u){if(!ou(u))return u.g.la();const v=hu(u.g);if(v==="")return"";let _="";const I=v.length,$=or(u.g)==4;if(!u.h.i){if(typeof TextDecoder>"u")return kr(u),li(u),"";u.h.i=new c.TextDecoder}for(let G=0;G<I;G++)u.h.h=!0,_+=u.h.i.decode(v[G],{stream:!($&&G==I-1)});return v.length=0,u.h.g+=_,u.C=0,u.h.g}function ou(u){return u.g?u.v=="GET"&&u.M!=2&&u.j.Aa:!1}function au(u,v){var _=u.C,I=v.indexOf(`
`,_);return I==-1?ga:(_=Number(v.substring(_,I)),isNaN(_)?su:(I+=1,I+_>v.length?ga:(v=v.slice(I,I+_),u.C=I+_,v)))}xn.prototype.cancel=function(){this.K=!0,kr(this)};function ai(u){u.T=Date.now()+u.H,va(u,u.H)}function va(u,v){if(u.D!=null)throw Error("WatchDog timer not null");u.D=cs(y(u.aa,u),v)}function Zi(u){u.D&&(c.clearTimeout(u.D),u.D=null)}xn.prototype.aa=function(){this.D=null;const u=Date.now();u-this.T>=0?(tu(this.i,this.B),this.M!=2&&(Ir(),ct(17)),kr(this),this.m=2,li(this)):va(this,this.T-u)};function li(u){u.j.I==0||u.K||uo(u.j,u)}function kr(u){Zi(u);var v=u.O;v&&typeof v.dispose=="function"&&v.dispose(),u.O=null,Ki(u.V),u.g&&(v=u.g,u.g=null,v.abort(),v.dispose())}function et(u,v){try{var _=u.j;if(_.I!=0&&(_.g==u||wa(_.h,u))){if(!u.L&&wa(_.h,u)&&_.I==3){try{var I=_.Ba.g.parse(v)}catch{I=null}if(Array.isArray(I)&&I.length==3){var $=I;if($[0]==0){e:if(!_.v){if(_.g)if(_.g.F+3e3<u.F)lo(_),pn(_);else break e;ur(_),ct(18)}}else _.xa=$[1],0<_.xa-_.K&&$[2]<37500&&_.F&&_.A==0&&!_.C&&(_.C=cs(y(_.Va,_),6e3));ui(_.h)<=1&&_.ta&&(_.ta=void 0)}else mn(_,11)}else if((u.L||_.g==u)&&lo(_),!C(v))for($=_.Ba.g.parse(v),v=0;v<$.length;v++){let Qe=$[v];const wt=Qe[0];if(!(wt<=_.K))if(_.K=wt,Qe=Qe[1],_.I==2)if(Qe[0]=="c"){_.M=Qe[1],_.ba=Qe[2];const gn=Qe[3];gn!=null&&(_.ka=gn,_.j.info("VER="+_.ka));const Dr=Qe[4];Dr!=null&&(_.za=Dr,_.j.info("SVER="+_.za));const cr=Qe[5];cr!=null&&typeof cr=="number"&&cr>0&&(I=1.5*cr,_.O=I,_.j.info("backChannelRequestTimeoutMs_="+I)),I=_;const dr=u.g;if(dr){const fo=dr.g?dr.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(fo){var G=I.h;G.g||fo.indexOf("spdy")==-1&&fo.indexOf("quic")==-1&&fo.indexOf("h2")==-1||(G.j=G.l,G.g=new Set,G.h&&(to(G,G.h),G.h=null))}if(I.G){const Pa=dr.g?dr.g.getResponseHeader("X-HTTP-Session-Id"):null;Pa&&(I.wa=Pa,Ge(I.J,I.G,Pa))}}_.I=3,_.l&&_.l.ra(),_.aa&&(_.T=Date.now()-u.F,_.j.info("Handshake RTT: "+_.T+"ms")),I=_;var se=u;if(I.na=Na(I,I.L?I.ba:null,I.W),se.L){ci(I.h,se);var Ne=se,mt=I.O;mt&&(Ne.H=mt),Ne.D&&(Zi(Ne),ai(Ne)),I.g=se}else zt(I);_.i.length>0&&Pr(_)}else Qe[0]!="stop"&&Qe[0]!="close"||mn(_,7);else _.I==3&&(Qe[0]=="stop"||Qe[0]=="close"?Qe[0]=="stop"?mn(_,7):oo(_):Qe[0]!="noop"&&_.l&&_.l.qa(Qe),_.A=0)}}Ir(4)}catch{}}var Vd=class{constructor(u,v){this.g=u,this.map=v}};function eo(u){this.l=u||10,c.PerformanceNavigationTiming?(u=c.performance.getEntriesByType("navigation"),u=u.length>0&&(u[0].nextHopProtocol=="hq"||u[0].nextHopProtocol=="h2")):u=!!(c.chrome&&c.chrome.loadTimes&&c.chrome.loadTimes()&&c.chrome.loadTimes().wasFetchedViaSpdy),this.j=u?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function _a(u){return u.h?!0:u.g?u.g.size>=u.j:!1}function ui(u){return u.h?1:u.g?u.g.size:0}function wa(u,v){return u.h?u.h==v:u.g?u.g.has(v):!1}function to(u,v){u.g?u.g.add(v):u.h=v}function ci(u,v){u.h&&u.h==v?u.h=null:u.g&&u.g.has(v)&&u.g.delete(v)}eo.prototype.cancel=function(){if(this.i=dn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const u of this.g.values())u.cancel();this.g.clear()}};function dn(u){if(u.h!=null)return u.i.concat(u.h.G);if(u.g!=null&&u.g.size!==0){let v=u.i;for(const _ of u.g.values())v=v.concat(_.G);return v}return N(u.i)}var lu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function hn(u,v){if(u){u=u.split("&");for(let _=0;_<u.length;_++){const I=u[_].indexOf("=");let $,G=null;I>=0?($=u[_].substring(0,I),G=u[_].substring(I+1)):$=u[_],v($,G?decodeURIComponent(G.replace(/\+/g," ")):"")}}}function er(u){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let v;u instanceof er?(this.l=u.l,di(this,u.j),this.o=u.o,this.g=u.g,tr(this,u.u),this.h=u.h,ps(this,Ca(u.i)),this.m=u.m):u&&(v=String(u).match(lu))?(this.l=!1,di(this,v[1]||"",!0),this.o=hi(v[2]||""),this.g=hi(v[3]||"",!0),tr(this,v[4]),this.h=hi(v[5]||"",!0),ps(this,v[6]||"",!0),this.m=hi(v[7]||"")):(this.l=!1,this.i=new Be(null,this.l))}er.prototype.toString=function(){const u=[];var v=this.j;v&&u.push(fi(v,Ea,!0),":");var _=this.g;return(_||v=="file")&&(u.push("//"),(v=this.o)&&u.push(fi(v,Ea,!0),"@"),u.push(Zn(_).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),_=this.u,_!=null&&u.push(":",String(_))),(_=this.h)&&(this.g&&_.charAt(0)!="/"&&u.push("/"),u.push(fi(_,_.charAt(0)=="/"?pi:Ta,!0))),(_=this.i.toString())&&u.push("?",_),(_=this.m)&&u.push("#",fi(_,Ia)),u.join("")},er.prototype.resolve=function(u){const v=En(this);let _=!!u.j;_?di(v,u.j):_=!!u.o,_?v.o=u.o:_=!!u.g,_?v.g=u.g:_=u.u!=null;var I=u.h;if(_)tr(v,u.u);else if(_=!!u.h){if(I.charAt(0)!="/")if(this.g&&!this.h)I="/"+I;else{var $=v.h.lastIndexOf("/");$!=-1&&(I=v.h.slice(0,$+1)+I)}if($=I,$==".."||$==".")I="";else if($.indexOf("./")!=-1||$.indexOf("/.")!=-1){I=$.lastIndexOf("/",0)==0,$=$.split("/");const G=[];for(let se=0;se<$.length;){const Ne=$[se++];Ne=="."?I&&se==$.length&&G.push(""):Ne==".."?((G.length>1||G.length==1&&G[0]!="")&&G.pop(),I&&se==$.length&&G.push("")):(G.push(Ne),I=!0)}I=G.join("/")}else I=$}return _?v.h=I:_=u.i.toString()!=="",_?ps(v,Ca(u.i)):_=!!u.m,_&&(v.m=u.m),v};function En(u){return new er(u)}function di(u,v,_){u.j=_?hi(v,!0):v,u.j&&(u.j=u.j.replace(/:$/,""))}function tr(u,v){if(v){if(v=Number(v),isNaN(v)||v<0)throw Error("Bad port number "+v);u.u=v}else u.u=null}function ps(u,v,_){v instanceof Be?(u.i=v,ro(u.i,u.l)):(_||(v=fi(v,Ld)),u.i=new Be(v,u.l))}function Ge(u,v,_){u.i.set(v,_)}function Cr(u){return Ge(u,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),u}function hi(u,v){return u?v?decodeURI(u.replace(/%25/g,"%2525")):decodeURIComponent(u):""}function fi(u,v,_){return typeof u=="string"?(u=encodeURI(u).replace(v,xa),_&&(u=u.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),u):null}function xa(u){return u=u.charCodeAt(0),"%"+(u>>4&15).toString(16)+(u&15).toString(16)}var Ea=/[#\/\?@]/g,Ta=/[#\?:]/g,pi=/[#\?]/g,Ld=/[#\?@]/g,Ia=/#/g;function Be(u,v){this.h=this.g=null,this.i=u||null,this.j=!!v}function nr(u){u.g||(u.g=new Map,u.h=0,u.i&&hn(u.i,function(v,_){u.add(decodeURIComponent(v.replace(/\+/g," ")),_)}))}n=Be.prototype,n.add=function(u,v){nr(this),this.i=null,u=rr(this,u);let _=this.g.get(u);return _||this.g.set(u,_=[]),_.push(v),this.h+=1,this};function Sa(u,v){nr(u),v=rr(u,v),u.g.has(v)&&(u.i=null,u.h-=u.g.get(v).length,u.g.delete(v))}function no(u,v){return nr(u),v=rr(u,v),u.g.has(v)}n.forEach=function(u,v){nr(this),this.g.forEach(function(_,I){_.forEach(function($){u.call(v,$,I,this)},this)},this)};function ba(u,v){nr(u);let _=[];if(typeof v=="string")no(u,v)&&(_=_.concat(u.g.get(rr(u,v))));else for(u=Array.from(u.g.values()),v=0;v<u.length;v++)_=_.concat(u[v]);return _}n.set=function(u,v){return nr(this),this.i=null,u=rr(this,u),no(this,u)&&(this.h-=this.g.get(u).length),this.g.set(u,[v]),this.h+=1,this},n.get=function(u,v){return u?(u=ba(this,u),u.length>0?String(u[0]):v):v};function ka(u,v,_){Sa(u,v),_.length>0&&(u.i=null,u.g.set(rr(u,v),N(_)),u.h+=_.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const u=[],v=Array.from(this.g.keys());for(let I=0;I<v.length;I++){var _=v[I];const $=Zn(_);_=ba(this,_);for(let G=0;G<_.length;G++){let se=$;_[G]!==""&&(se+="="+Zn(_[G])),u.push(se)}}return this.i=u.join("&")};function Ca(u){const v=new Be;return v.i=u.i,u.g&&(v.g=new Map(u.g),v.h=u.h),v}function rr(u,v){return v=String(v),u.j&&(v=v.toLowerCase()),v}function ro(u,v){v&&!u.j&&(nr(u),u.i=null,u.g.forEach(function(_,I){const $=I.toLowerCase();I!=$&&(Sa(this,I),ka(this,$,_))},u)),u.j=v}function sr(u,v){const _=new ds;if(c.Image){const I=new Image;I.onload=w(jt,_,"TestLoadImage: loaded",!0,v,I),I.onerror=w(jt,_,"TestLoadImage: error",!1,v,I),I.onabort=w(jt,_,"TestLoadImage: abort",!1,v,I),I.ontimeout=w(jt,_,"TestLoadImage: timeout",!1,v,I),c.setTimeout(function(){I.ontimeout&&I.ontimeout()},1e4),I.src=u}else v(!1)}function ir(u,v){const _=new ds,I=new AbortController,$=setTimeout(()=>{I.abort(),jt(_,"TestPingServer: timeout",!1,v)},1e4);fetch(u,{signal:I.signal}).then(G=>{clearTimeout($),G.ok?jt(_,"TestPingServer: ok",!0,v):jt(_,"TestPingServer: server error",!1,v)}).catch(()=>{clearTimeout($),jt(_,"TestPingServer: error",!1,v)})}function jt(u,v,_,I,$){try{$&&($.onload=null,$.onerror=null,$.onabort=null,$.ontimeout=null),I(_)}catch{}}function mi(){this.g=new ii}function Ar(u){this.i=u.Sb||null,this.h=u.ab||!1}E(Ar,as),Ar.prototype.g=function(){return new fn(this.i,this.h)};function fn(u,v){_t.call(this),this.H=u,this.o=v,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}E(fn,_t),n=fn.prototype,n.open=function(u,v){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=u,this.D=v,this.readyState=1,Ln(this)},n.send=function(u){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const v={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};u&&(v.body=u),(this.H||c).fetch(new Request(this.D,v)).then(this.Pa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,ms(this)),this.readyState=0},n.Pa=function(u){if(this.g&&(this.l=u,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=u.headers,this.readyState=2,Ln(this)),this.g&&(this.readyState=3,Ln(this),this.g)))if(this.responseType==="arraybuffer")u.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof c.ReadableStream<"u"&&"body"in u){if(this.j=u.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;uu(this)}else u.text().then(this.Oa.bind(this),this.ga.bind(this))};function uu(u){u.j.read().then(u.Ma.bind(u)).catch(u.ga.bind(u))}n.Ma=function(u){if(this.g){if(this.o&&u.value)this.response.push(u.value);else if(!this.o){var v=u.value?u.value:new Uint8Array(0);(v=this.B.decode(v,{stream:!u.done}))&&(this.response=this.responseText+=v)}u.done?ms(this):Ln(this),this.readyState==3&&uu(this)}},n.Oa=function(u){this.g&&(this.response=this.responseText=u,ms(this))},n.Na=function(u){this.g&&(this.response=u,ms(this))},n.ga=function(){this.g&&ms(this)};function ms(u){u.readyState=4,u.l=null,u.j=null,u.B=null,Ln(u)}n.setRequestHeader=function(u,v){this.A.append(u,v)},n.getResponseHeader=function(u){return this.h&&this.h.get(u.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const u=[],v=this.h.entries();for(var _=v.next();!_.done;)_=_.value,u.push(_[0]+": "+_[1]),_=v.next();return u.join(`\r
`)};function Ln(u){u.onreadystatechange&&u.onreadystatechange.call(u)}Object.defineProperty(fn.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(u){this.m=u?"include":"same-origin"}});function cu(u){let v="";return we(u,function(_,I){v+=I,v+=":",v+=_,v+=`\r
`}),v}function so(u,v,_){e:{for(I in _){var I=!1;break e}I=!0}I||(_=cu(_),typeof u=="string"?_!=null&&Zn(_):Ge(u,v,_))}function Xe(u){_t.call(this),this.headers=new Map,this.L=u||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}E(Xe,_t);var du=/^https?$/i,Md=["POST","PUT"];n=Xe.prototype,n.Fa=function(u){this.H=u},n.ea=function(u,v,_,I){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+u);v=v?v.toUpperCase():"GET",this.D=u,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():nu.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(v,String(u),!0),this.B=!1}catch(G){gs(this,G);return}if(u=_||"",_=new Map(this.headers),I)if(Object.getPrototypeOf(I)===Object.prototype)for(var $ in I)_.set($,I[$]);else if(typeof I.keys=="function"&&typeof I.get=="function")for(const G of I.keys())_.set(G,I.get(G));else throw Error("Unknown input type for opt_headers: "+String(I));I=Array.from(_.keys()).find(G=>G.toLowerCase()=="content-type"),$=c.FormData&&u instanceof c.FormData,!(Array.prototype.indexOf.call(Md,v,void 0)>=0)||I||$||_.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[G,se]of _)this.g.setRequestHeader(G,se);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(u),this.v=!1}catch(G){gs(this,G)}};function gs(u,v){u.h=!1,u.g&&(u.j=!0,u.g.abort(),u.j=!1),u.l=v,u.o=5,ys(u),Nr(u)}function ys(u){u.A||(u.A=!0,pt(u,"complete"),pt(u,"error"))}n.abort=function(u){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=u||7,pt(this,"complete"),pt(this,"abort"),Nr(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Nr(this,!0)),Xe.Z.N.call(this)},n.Ca=function(){this.u||(this.B||this.v||this.j?Rr(this):this.Xa())},n.Xa=function(){Rr(this)};function Rr(u){if(u.h&&typeof l<"u"){if(u.v&&or(u)==4)setTimeout(u.Ca.bind(u),0);else if(pt(u,"readystatechange"),or(u)==4){u.h=!1;try{const G=u.ca();e:switch(G){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var v=!0;break e;default:v=!1}var _;if(!(_=v)){var I;if(I=G===0){let se=String(u.D).match(lu)[1]||null;!se&&c.self&&c.self.location&&(se=c.self.location.protocol.slice(0,-1)),I=!du.test(se?se.toLowerCase():"")}_=I}if(_)pt(u,"complete"),pt(u,"success");else{u.o=6;try{var $=or(u)>2?u.g.statusText:""}catch{$=""}u.l=$+" ["+u.ca()+"]",ys(u)}}finally{Nr(u)}}}}function Nr(u,v){if(u.g){u.m&&(clearTimeout(u.m),u.m=null);const _=u.g;u.g=null,v||pt(u,"ready");try{_.onreadystatechange=null}catch{}}}n.isActive=function(){return!!this.g};function or(u){return u.g?u.g.readyState:0}n.ca=function(){try{return or(this)>2?this.g.status:-1}catch{return-1}},n.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.La=function(u){if(this.g){var v=this.g.responseText;return u&&v.indexOf(u)==0&&(v=v.substring(u.length)),Xl(v)}};function hu(u){try{if(!u.g)return null;if("response"in u.g)return u.g.response;switch(u.F){case"":case"text":return u.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in u.g)return u.g.mozResponseArrayBuffer}return null}catch{return null}}function Aa(u){const v={};u=(u.g&&or(u)>=2&&u.g.getAllResponseHeaders()||"").split(`\r
`);for(let I=0;I<u.length;I++){if(C(u[I]))continue;var _=Ji(u[I]);const $=_[0];if(_=_[1],typeof _!="string")continue;_=_.trim();const G=v[$]||[];v[$]=G,G.push(_)}le(v,function(I){return I.join(", ")})}n.ya=function(){return this.o},n.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ar(u,v,_){return _&&_.internalChannelParams&&_.internalChannelParams[u]||v}function io(u){this.za=0,this.i=[],this.j=new ds,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ar("failFast",!1,u),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ar("baseRetryDelayMs",5e3,u),this.Za=ar("retryDelaySeedMs",1e4,u),this.Ta=ar("forwardChannelMaxRetries",2,u),this.va=ar("forwardChannelRequestTimeoutMs",2e4,u),this.ma=u&&u.xmlHttpFactory||void 0,this.Ua=u&&u.Rb||void 0,this.Aa=u&&u.useFetchStreams||!1,this.O=void 0,this.L=u&&u.supportsCrossDomainXhr||!1,this.M="",this.h=new eo(u&&u.concurrentRequestLimit),this.Ba=new mi,this.S=u&&u.fastHandshake||!1,this.R=u&&u.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=u&&u.Pb||!1,u&&u.ua&&this.j.ua(),u&&u.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&u&&u.detectBufferingProxy||!1,this.ia=void 0,u&&u.longPollingTimeout&&u.longPollingTimeout>0&&(this.ia=u.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}n=io.prototype,n.ka=8,n.I=1,n.connect=function(u,v,_,I){ct(0),this.W=u,this.H=v||{},_&&I!==void 0&&(this.H.OSID=_,this.H.OAID=I),this.F=this.X,this.J=Na(this,null,this.W),Pr(this)};function oo(u){if(ao(u),u.I==3){var v=u.V++,_=En(u.J);if(Ge(_,"SID",u.M),Ge(_,"RID",v),Ge(_,"TYPE","terminate"),lr(u,_),v=new xn(u,u.j,v),v.M=2,v.A=Cr(En(_)),_=!1,c.navigator&&c.navigator.sendBeacon)try{_=c.navigator.sendBeacon(v.A.toString(),"")}catch{}!_&&c.Image&&(new Image().src=v.A,_=!0),_||(v.g=pu(v.j,null),v.g.ea(v.A)),v.F=Date.now(),ai(v)}vi(u)}function pn(u){u.g&&(yi(u),u.g.cancel(),u.g=null)}function ao(u){pn(u),u.v&&(c.clearTimeout(u.v),u.v=null),lo(u),u.h.cancel(),u.m&&(typeof u.m=="number"&&c.clearTimeout(u.m),u.m=null)}function Pr(u){if(!_a(u.h)&&!u.m){u.m=!0;var v=u.Ea;fe||T(),he||(fe(),he=!0),P.add(v,u),u.D=0}}function fu(u,v){return ui(u.h)>=u.h.j-(u.m?1:0)?!1:u.m?(u.i=v.G.concat(u.i),!0):u.I==1||u.I==2||u.D>=(u.Sa?0:u.Ta)?!1:(u.m=cs(y(u.Ea,u,v),co(u,u.D)),u.D++,!0)}n.Ea=function(u){if(this.m)if(this.m=null,this.I==1){if(!u){this.V=Math.floor(Math.random()*1e5),u=this.V++;const $=new xn(this,this.j,u);let G=this.o;if(this.U&&(G?(G=F(G),_e(G,this.U)):G=this.U),this.u!==null||this.R||($.J=G,G=null),this.S)e:{for(var v=0,_=0;_<this.i.length;_++){t:{var I=this.i[_];if("__data__"in I.map&&(I=I.map.__data__,typeof I=="string")){I=I.length;break t}I=void 0}if(I===void 0)break;if(v+=I,v>4096){v=_;break e}if(v===4096||_===this.i.length-1){v=_+1;break e}}v=1e3}else v=1e3;v=Ra(this,$,v),_=En(this.J),Ge(_,"RID",u),Ge(_,"CVER",22),this.G&&Ge(_,"X-HTTP-Session-Id",this.G),lr(this,_),G&&(this.R?v="headers="+Zn(cu(G))+"&"+v:this.u&&so(_,this.u,G)),to(this.h,$),this.Ra&&Ge(_,"TYPE","init"),this.S?(Ge(_,"$req",v),Ge(_,"SID","null"),$.U=!0,Vn($,_,null)):Vn($,_,v),this.I=2}}else this.I==3&&(u?gi(this,u):this.i.length==0||_a(this.h)||gi(this))};function gi(u,v){var _;v?_=v.l:_=u.V++;const I=En(u.J);Ge(I,"SID",u.M),Ge(I,"RID",_),Ge(I,"AID",u.K),lr(u,I),u.u&&u.o&&so(I,u.u,u.o),_=new xn(u,u.j,_,u.D+1),u.u===null&&(_.J=u.o),v&&(u.i=v.G.concat(u.i)),v=Ra(u,_,1e3),_.H=Math.round(u.va*.5)+Math.round(u.va*.5*Math.random()),to(u.h,_),Vn(_,I,v)}function lr(u,v){u.H&&we(u.H,function(_,I){Ge(v,I,_)}),u.l&&we({},function(_,I){Ge(v,I,_)})}function Ra(u,v,_){_=Math.min(u.i.length,_);const I=u.l?y(u.l.Ka,u.l,u):null;e:{var $=u.i;let Ne=-1;for(;;){const mt=["count="+_];Ne==-1?_>0?(Ne=$[0].g,mt.push("ofs="+Ne)):Ne=0:mt.push("ofs="+Ne);let Qe=!0;for(let wt=0;wt<_;wt++){var G=$[wt].g;const gn=$[wt].map;if(G-=Ne,G<0)Ne=Math.max(0,$[wt].g-100),Qe=!1;else try{G="req"+G+"_"||"";try{var se=gn instanceof Map?gn:Object.entries(gn);for(const[Dr,cr]of se){let dr=cr;h(cr)&&(dr=os(cr)),mt.push(G+Dr+"="+encodeURIComponent(dr))}}catch(Dr){throw mt.push(G+"type="+encodeURIComponent("_badmap")),Dr}}catch{I&&I(gn)}}if(Qe){se=mt.join("&");break e}}se=void 0}return u=u.i.splice(0,_),v.G=u,se}function zt(u){if(!u.g&&!u.v){u.Y=1;var v=u.Da;fe||T(),he||(fe(),he=!0),P.add(v,u),u.A=0}}function ur(u){return u.g||u.v||u.A>=3?!1:(u.Y++,u.v=cs(y(u.Da,u),co(u,u.A)),u.A++,!0)}n.Da=function(){if(this.v=null,vs(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var u=4*this.T;this.j.info("BP detection timer enabled: "+u),this.B=cs(y(this.Wa,this),u)}},n.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,ct(10),pn(this),vs(this))};function yi(u){u.B!=null&&(c.clearTimeout(u.B),u.B=null)}function vs(u){u.g=new xn(u,u.j,"rpc",u.Y),u.u===null&&(u.g.J=u.o),u.g.P=0;var v=En(u.na);Ge(v,"RID","rpc"),Ge(v,"SID",u.M),Ge(v,"AID",u.K),Ge(v,"CI",u.F?"0":"1"),!u.F&&u.ia&&Ge(v,"TO",u.ia),Ge(v,"TYPE","xmlhttp"),lr(u,v),u.u&&u.o&&so(v,u.u,u.o),u.O&&(u.g.H=u.O);var _=u.g;u=u.ba,_.M=1,_.A=Cr(En(v)),_.u=null,_.R=!0,ya(_,u)}n.Va=function(){this.C!=null&&(this.C=null,pn(this),ur(this),ct(19))};function lo(u){u.C!=null&&(c.clearTimeout(u.C),u.C=null)}function uo(u,v){var _=null;if(u.g==v){lo(u),yi(u),u.g=null;var I=2}else if(wa(u.h,v))_=v.G,ci(u.h,v),I=1;else return;if(u.I!=0){if(v.o)if(I==1){_=v.u?v.u.length:0,v=Date.now()-v.F;var $=u.D;I=us(),pt(I,new ma(I,_)),Pr(u)}else zt(u);else if($=v.m,$==3||$==0&&v.X>0||!(I==1&&fu(u,v)||I==2&&ur(u)))switch(_&&_.length>0&&(v=u.h,v.i=v.i.concat(_)),$){case 1:mn(u,5);break;case 4:mn(u,10);break;case 3:mn(u,6);break;default:mn(u,2)}}}function co(u,v){let _=u.Qa+Math.floor(Math.random()*u.Za);return u.isActive()||(_*=2),_*v}function mn(u,v){if(u.j.info("Error code "+v),v==2){var _=y(u.bb,u),I=u.Ua;const $=!I;I=new er(I||"//www.google.com/images/cleardot.gif"),c.location&&c.location.protocol=="http"||di(I,"https"),Cr(I),$?sr(I.toString(),_):ir(I.toString(),_)}else ct(2);u.I=0,u.l&&u.l.pa(v),vi(u),ao(u)}n.bb=function(u){u?(this.j.info("Successfully pinged google.com"),ct(2)):(this.j.info("Failed to ping google.com"),ct(1))};function vi(u){if(u.I=0,u.ja=[],u.l){const v=dn(u.h);(v.length!=0||u.i.length!=0)&&(U(u.ja,v),U(u.ja,u.i),u.h.i.length=0,N(u.i),u.i.length=0),u.l.oa()}}function Na(u,v,_){var I=_ instanceof er?En(_):new er(_);if(I.g!="")v&&(I.g=v+"."+I.g),tr(I,I.u);else{var $=c.location;I=$.protocol,v=v?v+"."+$.hostname:$.hostname,$=+$.port;const G=new er(null);I&&di(G,I),v&&(G.g=v),$&&tr(G,$),_&&(G.h=_),I=G}return _=u.G,v=u.wa,_&&v&&Ge(I,_,v),Ge(I,"VER",u.ka),lr(u,I),I}function pu(u,v,_){if(v&&!u.L)throw Error("Can't create secondary domain capable XhrIo object.");return v=u.Aa&&!u.ma?new Xe(new Ar({ab:_})):new Xe(u.ma),v.Fa(u.L),v}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function mu(){}n=mu.prototype,n.ra=function(){},n.qa=function(){},n.pa=function(){},n.oa=function(){},n.isActive=function(){return!0},n.Ka=function(){};function ho(){}ho.prototype.g=function(u,v){return new Vt(u,v)};function Vt(u,v){_t.call(this),this.g=new io(v),this.l=u,this.h=v&&v.messageUrlParams||null,u=v&&v.messageHeaders||null,v&&v.clientProtocolHeaderRequired&&(u?u["X-Client-Protocol"]="webchannel":u={"X-Client-Protocol":"webchannel"}),this.g.o=u,u=v&&v.initMessageHeaders||null,v&&v.messageContentType&&(u?u["X-WebChannel-Content-Type"]=v.messageContentType:u={"X-WebChannel-Content-Type":v.messageContentType}),v&&v.sa&&(u?u["X-WebChannel-Client-Profile"]=v.sa:u={"X-WebChannel-Client-Profile":v.sa}),this.g.U=u,(u=v&&v.Qb)&&!C(u)&&(this.g.u=u),this.A=v&&v.supportsCrossDomainXhr||!1,this.v=v&&v.sendRawJson||!1,(v=v&&v.httpSessionIdParam)&&!C(v)&&(this.g.G=v,u=this.h,u!==null&&v in u&&(u=this.h,v in u&&delete u[v])),this.j=new _s(this)}E(Vt,_t),Vt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},Vt.prototype.close=function(){oo(this.g)},Vt.prototype.o=function(u){var v=this.g;if(typeof u=="string"){var _={};_.__data__=u,u=_}else this.v&&(_={},_.__data__=os(u),u=_);v.i.push(new Vd(v.Ya++,u)),v.I==3&&Pr(v)},Vt.prototype.N=function(){this.g.l=null,delete this.j,oo(this.g),delete this.g,Vt.Z.N.call(this)};function gu(u){Qi.call(this),u.__headers__&&(this.headers=u.__headers__,this.statusCode=u.__status__,delete u.__headers__,delete u.__status__);var v=u.__sm__;if(v){e:{for(const _ in v){u=_;break e}u=void 0}(this.i=u)&&(u=this.i,v=v!==null&&u in v?v[u]:void 0),this.data=v}else this.data=u}E(gu,Qi);function yu(){pa.call(this),this.status=1}E(yu,pa);function _s(u){this.g=u}E(_s,mu),_s.prototype.ra=function(){pt(this.g,"a")},_s.prototype.qa=function(u){pt(this.g,new gu(u))},_s.prototype.pa=function(u){pt(this.g,new yu)},_s.prototype.oa=function(){pt(this.g,"b")},ho.prototype.createWebChannel=ho.prototype.g,Vt.prototype.send=Vt.prototype.o,Vt.prototype.open=Vt.prototype.m,Vt.prototype.close=Vt.prototype.close,U_=function(){return new ho},F_=function(){return us()},O_=jn,Of={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},hs.NO_ERROR=0,hs.TIMEOUT=8,hs.HTTP_ERROR=6,bc=hs,fs.COMPLETE="complete",M_=fs,Jl.EventType=ls,ls.OPEN="a",ls.CLOSE="b",ls.ERROR="c",ls.MESSAGE="d",_t.prototype.listen=_t.prototype.J,ll=Jl,Xe.prototype.listenOnce=Xe.prototype.K,Xe.prototype.getLastError=Xe.prototype.Ha,Xe.prototype.getLastErrorCode=Xe.prototype.ya,Xe.prototype.getStatus=Xe.prototype.ca,Xe.prototype.getResponseJson=Xe.prototype.La,Xe.prototype.getResponseText=Xe.prototype.la,Xe.prototype.send=Xe.prototype.ea,Xe.prototype.setWithCredentials=Xe.prototype.Fa,L_=Xe}).apply(typeof fc<"u"?fc:typeof self<"u"?self:typeof window<"u"?window:{});const fv="@firebase/firestore",pv="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Gt.UNAUTHENTICATED=new Gt(null),Gt.GOOGLE_CREDENTIALS=new Gt("google-credentials-uid"),Gt.FIRST_PARTY=new Gt("first-party-uid"),Gt.MOCK_USER=new Gt("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ra="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ui=new hp("@firebase/firestore");function Vo(){return Ui.logLevel}function ce(n,...e){if(Ui.logLevel<=Fe.DEBUG){const t=e.map(Tp);Ui.debug(`Firestore (${ra}): ${n}`,...t)}}function Jr(n,...e){if(Ui.logLevel<=Fe.ERROR){const t=e.map(Tp);Ui.error(`Firestore (${ra}): ${n}`,...t)}}function Wo(n,...e){if(Ui.logLevel<=Fe.WARN){const t=e.map(Tp);Ui.warn(`Firestore (${ra}): ${n}`,...t)}}function Tp(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(t){return JSON.stringify(t)})(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(n,e,t){let s="Unexpected state";typeof e=="string"?s=e:t=e,z_(n,s,t)}function z_(n,e,t){let s=`FIRESTORE (${ra}) INTERNAL ASSERTION FAILED: ${e} (ID: ${n.toString(16)})`;if(t!==void 0)try{s+=" CONTEXT: "+JSON.stringify(t)}catch{s+=" CONTEXT: "+t}throw Jr(s),new Error(s)}function Ke(n,e,t,s){let o="Unexpected state";typeof t=="string"?o=t:s=t,n||z_(e,o,s)}function Pe(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const X={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class oe extends ns{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(){this.promise=new Promise(((e,t)=>{this.resolve=e,this.reject=t}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B_{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class wk{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable((()=>t(Gt.UNAUTHENTICATED)))}shutdown(){}}class xk{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable((()=>t(this.token.user)))}shutdown(){this.changeListener=null}}class Ek{constructor(e){this.t=e,this.currentUser=Gt.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){Ke(this.o===void 0,42304);let s=this.i;const o=p=>this.i!==s?(s=this.i,t(p)):Promise.resolve();let l=new Gr;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gr,e.enqueueRetryable((()=>o(this.currentUser)))};const c=()=>{const p=l;e.enqueueRetryable((async()=>{await p.promise,await o(this.currentUser)}))},h=p=>{ce("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=p,this.o&&(this.auth.addAuthTokenListener(this.o),c())};this.t.onInit((p=>h(p))),setTimeout((()=>{if(!this.auth){const p=this.t.getImmediate({optional:!0});p?h(p):(ce("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gr)}}),0),c()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then((s=>this.i!==e?(ce("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):s?(Ke(typeof s.accessToken=="string",31837,{l:s}),new B_(s.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ke(e===null||typeof e=="string",2055,{h:e}),new Gt(e)}}class Tk{constructor(e,t,s){this.P=e,this.T=t,this.I=s,this.type="FirstParty",this.user=Gt.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class Ik{constructor(e,t,s){this.P=e,this.T=t,this.I=s}getToken(){return Promise.resolve(new Tk(this.P,this.T,this.I))}start(e,t){e.enqueueRetryable((()=>t(Gt.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class mv{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Sk{constructor(e,t){this.V=t,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,An(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,t){Ke(this.o===void 0,3512);const s=l=>{l.error!=null&&ce("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${l.error.message}`);const c=l.token!==this.m;return this.m=l.token,ce("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(l.token):Promise.resolve()};this.o=l=>{e.enqueueRetryable((()=>s(l)))};const o=l=>{ce("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=l,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((l=>o(l))),setTimeout((()=>{if(!this.appCheck){const l=this.V.getImmediate({optional:!0});l?o(l):ce("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new mv(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then((t=>t?(Ke(typeof t.token=="string",44558,{tokenResult:t}),this.m=t.token,new mv(t.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bk(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let s=0;s<n;s++)t[s]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ip{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let s="";for(;s.length<20;){const o=bk(40);for(let l=0;l<o.length;++l)s.length<20&&o[l]<t&&(s+=e.charAt(o[l]%62))}return s}}function Ue(n,e){return n<e?-1:n>e?1:0}function Ff(n,e){const t=Math.min(n.length,e.length);for(let s=0;s<t;s++){const o=n.charAt(s),l=e.charAt(s);if(o!==l)return _f(o)===_f(l)?Ue(o,l):_f(o)?1:-1}return Ue(n.length,e.length)}const kk=55296,Ck=57343;function _f(n){const e=n.charCodeAt(0);return e>=kk&&e<=Ck}function qo(n,e,t){return n.length===e.length&&n.every(((s,o)=>t(s,e[o])))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gv="__name__";class gr{constructor(e,t,s){t===void 0?t=0:t>e.length&&Ce(637,{offset:t,range:e.length}),s===void 0?s=e.length-t:s>e.length-t&&Ce(1746,{length:s,range:e.length-t}),this.segments=e,this.offset=t,this.len=s}get length(){return this.len}isEqual(e){return gr.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof gr?e.forEach((s=>{t.push(s)})):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,s=this.limit();t<s;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const s=Math.min(e.length,t.length);for(let o=0;o<s;o++){const l=gr.compareSegments(e.get(o),t.get(o));if(l!==0)return l}return Ue(e.length,t.length)}static compareSegments(e,t){const s=gr.isNumericId(e),o=gr.isNumericId(t);return s&&!o?-1:!s&&o?1:s&&o?gr.extractNumericId(e).compare(gr.extractNumericId(t)):Ff(e,t)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Hs.fromString(e.substring(4,e.length-2))}}class Ze extends gr{construct(e,t,s){return new Ze(e,t,s)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const s of e){if(s.indexOf("//")>=0)throw new oe(X.INVALID_ARGUMENT,`Invalid segment (${s}). Paths must not contain // in them.`);t.push(...s.split("/").filter((o=>o.length>0)))}return new Ze(t)}static emptyPath(){return new Ze([])}}const Ak=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ft extends gr{construct(e,t,s){return new Ft(e,t,s)}static isValidIdentifier(e){return Ak.test(e)}canonicalString(){return this.toArray().map((e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ft.isValidIdentifier(e)||(e="`"+e+"`"),e))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===gv}static keyField(){return new Ft([gv])}static fromServerFormat(e){const t=[];let s="",o=0;const l=()=>{if(s.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(s),s=""};let c=!1;for(;o<e.length;){const h=e[o];if(h==="\\"){if(o+1===e.length)throw new oe(X.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const p=e[o+1];if(p!=="\\"&&p!=="."&&p!=="`")throw new oe(X.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);s+=p,o+=2}else h==="`"?(c=!c,o++):h!=="."||c?(s+=h,o++):(l(),o++)}if(l(),c)throw new oe(X.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ft(t)}static emptyPath(){return new Ft([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ee{constructor(e){this.path=e}static fromPath(e){return new Ee(Ze.fromString(e))}static fromName(e){return new Ee(Ze.fromString(e).popFirst(5))}static empty(){return new Ee(Ze.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Ze.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Ze.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Ee(new Ze(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $_(n,e,t){if(!t)throw new oe(X.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Rk(n,e,t,s){if(e===!0&&s===!0)throw new oe(X.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function yv(n){if(!Ee.isDocumentKey(n))throw new oe(X.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function vv(n){if(Ee.isDocumentKey(n))throw new oe(X.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function H_(n){return typeof n=="object"&&n!==null&&(Object.getPrototypeOf(n)===Object.prototype||Object.getPrototypeOf(n)===null)}function ld(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=(function(s){return s.constructor?s.constructor.name:null})(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ce(12329,{type:typeof n})}function un(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new oe(X.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ld(n);throw new oe(X.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n,e){const t={typeString:n};return e&&(t.value=e),t}function Ul(n,e){if(!H_(n))throw new oe(X.INVALID_ARGUMENT,"JSON must be an object");let t;for(const s in e)if(e[s]){const o=e[s].typeString,l="value"in e[s]?{value:e[s].value}:void 0;if(!(s in n)){t=`JSON missing required field: '${s}'`;break}const c=n[s];if(o&&typeof c!==o){t=`JSON field '${s}' must be a ${o}.`;break}if(l!==void 0&&c!==l.value){t=`Expected '${s}' field to equal '${l.value}'`;break}}if(t)throw new oe(X.INVALID_ARGUMENT,t);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _v=-62135596800,wv=1e6;class rt{static now(){return rt.fromMillis(Date.now())}static fromDate(e){return rt.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),s=Math.floor((e-1e3*t)*wv);return new rt(t,s)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new oe(X.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<_v)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new oe(X.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/wv}_compareTo(e){return this.seconds===e.seconds?Ue(this.nanoseconds,e.nanoseconds):Ue(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:rt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Ul(e,rt._jsonSchema))return new rt(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-_v;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}rt._jsonSchemaVersion="firestore/timestamp/1.0",rt._jsonSchema={type:It("string",rt._jsonSchemaVersion),seconds:It("number"),nanoseconds:It("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Re{static fromTimestamp(e){return new Re(e)}static min(){return new Re(new rt(0,0))}static max(){return new Re(new rt(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const El=-1;function Nk(n,e){const t=n.toTimestamp().seconds,s=n.toTimestamp().nanoseconds+1,o=Re.fromTimestamp(s===1e9?new rt(t+1,0):new rt(t,s));return new qs(o,Ee.empty(),e)}function Pk(n){return new qs(n.readTime,n.key,El)}class qs{constructor(e,t,s){this.readTime=e,this.documentKey=t,this.largestBatchId=s}static min(){return new qs(Re.min(),Ee.empty(),El)}static max(){return new qs(Re.max(),Ee.empty(),El)}}function Dk(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Ee.comparator(n.documentKey,e.documentKey),t!==0?t:Ue(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Vk{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((e=>e()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sa(n){if(n.code!==X.FAILED_PRECONDITION||n.message!==jk)throw n;ce("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e((t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)}),(t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)}))}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ce(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new J(((s,o)=>{this.nextCallback=l=>{this.wrapSuccess(e,l).next(s,o)},this.catchCallback=l=>{this.wrapFailure(t,l).next(s,o)}}))}toPromise(){return new Promise(((e,t)=>{this.next(e,t)}))}wrapUserFunction(e){try{const t=e();return t instanceof J?t:J.resolve(t)}catch(t){return J.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction((()=>e(t))):J.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction((()=>e(t))):J.reject(t)}static resolve(e){return new J(((t,s)=>{t(e)}))}static reject(e){return new J(((t,s)=>{s(e)}))}static waitFor(e){return new J(((t,s)=>{let o=0,l=0,c=!1;e.forEach((h=>{++o,h.next((()=>{++l,c&&l===o&&t()}),(p=>s(p)))})),c=!0,l===o&&t()}))}static or(e){let t=J.resolve(!1);for(const s of e)t=t.next((o=>o?J.resolve(o):s()));return t}static forEach(e,t){const s=[];return e.forEach(((o,l)=>{s.push(t.call(this,o,l))})),this.waitFor(s)}static mapArray(e,t){return new J(((s,o)=>{const l=e.length,c=new Array(l);let h=0;for(let p=0;p<l;p++){const y=p;t(e[y]).next((w=>{c[y]=w,++h,h===l&&s(c)}),(w=>o(w)))}}))}static doWhile(e,t){return new J(((s,o)=>{const l=()=>{e()===!0?t().next((()=>{l()}),o):s()};l()}))}}function Lk(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function ia(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ud{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=s=>this.ae(s),this.ue=s=>t.writeSequenceNumber(s))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}ud.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sp=-1;function cd(n){return n==null}function zc(n){return n===0&&1/n==-1/0}function Mk(n){return typeof n=="number"&&Number.isInteger(n)&&!zc(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const W_="";function Ok(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=xv(e)),e=Fk(n.get(t),e);return xv(e)}function Fk(n,e){let t=e;const s=n.length;for(let o=0;o<s;o++){const l=n.charAt(o);switch(l){case"\0":t+="";break;case W_:t+="";break;default:t+=l}}return t}function xv(n){return n+W_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ev(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function ei(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function q_(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ut{constructor(e,t){this.comparator=e,this.root=t||Ot.EMPTY}insert(e,t){return new ut(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,Ot.BLACK,null,null))}remove(e){return new ut(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ot.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const s=this.comparator(e,t.key);if(s===0)return t.value;s<0?t=t.left:s>0&&(t=t.right)}return null}indexOf(e){let t=0,s=this.root;for(;!s.isEmpty();){const o=this.comparator(e,s.key);if(o===0)return t+s.left.size;o<0?s=s.left:(t+=s.left.size+1,s=s.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal(((t,s)=>(e(t,s),!1)))}toString(){const e=[];return this.inorderTraversal(((t,s)=>(e.push(`${t}:${s}`),!1))),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new pc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new pc(this.root,e,this.comparator,!1)}getReverseIterator(){return new pc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new pc(this.root,e,this.comparator,!0)}}class pc{constructor(e,t,s,o){this.isReverse=o,this.nodeStack=[];let l=1;for(;!e.isEmpty();)if(l=t?s(e.key,t):1,t&&o&&(l*=-1),l<0)e=this.isReverse?e.left:e.right;else{if(l===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ot{constructor(e,t,s,o,l){this.key=e,this.value=t,this.color=s??Ot.RED,this.left=o??Ot.EMPTY,this.right=l??Ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,s,o,l){return new Ot(e??this.key,t??this.value,s??this.color,o??this.left,l??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,s){let o=this;const l=s(e,o.key);return o=l<0?o.copy(null,null,null,o.left.insert(e,t,s),null):l===0?o.copy(null,t,null,null,null):o.copy(null,null,null,null,o.right.insert(e,t,s)),o.fixUp()}removeMin(){if(this.left.isEmpty())return Ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let s,o=this;if(t(e,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(e,t),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),t(e,o.key)===0){if(o.right.isEmpty())return Ot.EMPTY;s=o.right.min(),o=o.copy(s.key,s.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(e,t))}return o.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw Ce(43730,{key:this.key,value:this.value});if(this.right.isRed())throw Ce(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw Ce(27949);return e+(this.isRed()?0:1)}}Ot.EMPTY=null,Ot.RED=!0,Ot.BLACK=!1;Ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Ce(57766)}get value(){throw Ce(16141)}get color(){throw Ce(16727)}get left(){throw Ce(29726)}get right(){throw Ce(36894)}copy(e,t,s,o,l){return this}insert(e,t,s){return new Ot(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e){this.comparator=e,this.data=new ut(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal(((t,s)=>(e(t),!1)))}forEachInRange(e,t){const s=this.data.getIteratorFrom(e[0]);for(;s.hasNext();){const o=s.getNext();if(this.comparator(o.key,e[1])>=0)return;t(o.key)}}forEachWhile(e,t){let s;for(s=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();s.hasNext();)if(!e(s.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Tv(this.data.getIterator())}getIteratorFrom(e){return new Tv(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach((s=>{t=t.add(s)})),t}isEqual(e){if(!(e instanceof Ct)||this.size!==e.size)return!1;const t=this.data.getIterator(),s=e.data.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(this.comparator(o,l)!==0)return!1}return!0}toArray(){const e=[];return this.forEach((t=>{e.push(t)})),e}toString(){const e=[];return this.forEach((t=>e.push(t))),"SortedSet("+e.toString()+")"}copy(e){const t=new Ct(this.comparator);return t.data=e,t}}class Tv{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wn{constructor(e){this.fields=e,e.sort(Ft.comparator)}static empty(){return new wn([])}unionWith(e){let t=new Ct(Ft.comparator);for(const s of this.fields)t=t.add(s);for(const s of e)t=t.add(s);return new wn(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return qo(this.fields,e.fields,((t,s)=>t.isEqual(s)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ut{constructor(e){this.binaryString=e}static fromBase64String(e){const t=(function(o){try{return atob(o)}catch(l){throw typeof DOMException<"u"&&l instanceof DOMException?new G_("Invalid base64 string: "+l):l}})(e);return new Ut(t)}static fromUint8Array(e){const t=(function(o){let l="";for(let c=0;c<o.length;++c)l+=String.fromCharCode(o[c]);return l})(e);return new Ut(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(t){return btoa(t)})(this.binaryString)}toUint8Array(){return(function(t){const s=new Uint8Array(t.length);for(let o=0;o<t.length;o++)s[o]=t.charCodeAt(o);return s})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Ue(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ut.EMPTY_BYTE_STRING=new Ut("");const Uk=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Gs(n){if(Ke(!!n,39018),typeof n=="string"){let e=0;const t=Uk.exec(n);if(Ke(!!t,46558,{timestamp:n}),t[1]){let o=t[1];o=(o+"000000000").substr(0,9),e=Number(o)}const s=new Date(n);return{seconds:Math.floor(s.getTime()/1e3),nanos:e}}return{seconds:yt(n.seconds),nanos:yt(n.nanos)}}function yt(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ks(n){return typeof n=="string"?Ut.fromBase64String(n):Ut.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K_="server_timestamp",Q_="__type__",Y_="__previous_value__",X_="__local_write_time__";function bp(n){return(n?.mapValue?.fields||{})[Q_]?.stringValue===K_}function dd(n){const e=n.mapValue.fields[Y_];return bp(e)?dd(e):e}function Tl(n){const e=Gs(n.mapValue.fields[X_].timestampValue);return new rt(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e,t,s,o,l,c,h,p,y,w){this.databaseId=e,this.appId=t,this.persistenceKey=s,this.host=o,this.ssl=l,this.forceLongPolling=c,this.autoDetectLongPolling=h,this.longPollingOptions=p,this.useFetchStreams=y,this.isUsingEmulator=w}}const Bc="(default)";class Il{constructor(e,t){this.projectId=e,this.database=t||Bc}static empty(){return new Il("","")}get isDefaultDatabase(){return this.database===Bc}isEqual(e){return e instanceof Il&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const J_="__type__",Bk="__max__",mc={mapValue:{}},Z_="__vector__",$c="value";function Qs(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?bp(n)?4:Hk(n)?9007199254740991:$k(n)?10:11:Ce(28295,{value:n})}function Tr(n,e){if(n===e)return!0;const t=Qs(n);if(t!==Qs(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Tl(n).isEqual(Tl(e));case 3:return(function(o,l){if(typeof o.timestampValue=="string"&&typeof l.timestampValue=="string"&&o.timestampValue.length===l.timestampValue.length)return o.timestampValue===l.timestampValue;const c=Gs(o.timestampValue),h=Gs(l.timestampValue);return c.seconds===h.seconds&&c.nanos===h.nanos})(n,e);case 5:return n.stringValue===e.stringValue;case 6:return(function(o,l){return Ks(o.bytesValue).isEqual(Ks(l.bytesValue))})(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return(function(o,l){return yt(o.geoPointValue.latitude)===yt(l.geoPointValue.latitude)&&yt(o.geoPointValue.longitude)===yt(l.geoPointValue.longitude)})(n,e);case 2:return(function(o,l){if("integerValue"in o&&"integerValue"in l)return yt(o.integerValue)===yt(l.integerValue);if("doubleValue"in o&&"doubleValue"in l){const c=yt(o.doubleValue),h=yt(l.doubleValue);return c===h?zc(c)===zc(h):isNaN(c)&&isNaN(h)}return!1})(n,e);case 9:return qo(n.arrayValue.values||[],e.arrayValue.values||[],Tr);case 10:case 11:return(function(o,l){const c=o.mapValue.fields||{},h=l.mapValue.fields||{};if(Ev(c)!==Ev(h))return!1;for(const p in c)if(c.hasOwnProperty(p)&&(h[p]===void 0||!Tr(c[p],h[p])))return!1;return!0})(n,e);default:return Ce(52216,{left:n})}}function Sl(n,e){return(n.values||[]).find((t=>Tr(t,e)))!==void 0}function Go(n,e){if(n===e)return 0;const t=Qs(n),s=Qs(e);if(t!==s)return Ue(t,s);switch(t){case 0:case 9007199254740991:return 0;case 1:return Ue(n.booleanValue,e.booleanValue);case 2:return(function(l,c){const h=yt(l.integerValue||l.doubleValue),p=yt(c.integerValue||c.doubleValue);return h<p?-1:h>p?1:h===p?0:isNaN(h)?isNaN(p)?0:-1:1})(n,e);case 3:return Iv(n.timestampValue,e.timestampValue);case 4:return Iv(Tl(n),Tl(e));case 5:return Ff(n.stringValue,e.stringValue);case 6:return(function(l,c){const h=Ks(l),p=Ks(c);return h.compareTo(p)})(n.bytesValue,e.bytesValue);case 7:return(function(l,c){const h=l.split("/"),p=c.split("/");for(let y=0;y<h.length&&y<p.length;y++){const w=Ue(h[y],p[y]);if(w!==0)return w}return Ue(h.length,p.length)})(n.referenceValue,e.referenceValue);case 8:return(function(l,c){const h=Ue(yt(l.latitude),yt(c.latitude));return h!==0?h:Ue(yt(l.longitude),yt(c.longitude))})(n.geoPointValue,e.geoPointValue);case 9:return Sv(n.arrayValue,e.arrayValue);case 10:return(function(l,c){const h=l.fields||{},p=c.fields||{},y=h[$c]?.arrayValue,w=p[$c]?.arrayValue,E=Ue(y?.values?.length||0,w?.values?.length||0);return E!==0?E:Sv(y,w)})(n.mapValue,e.mapValue);case 11:return(function(l,c){if(l===mc.mapValue&&c===mc.mapValue)return 0;if(l===mc.mapValue)return 1;if(c===mc.mapValue)return-1;const h=l.fields||{},p=Object.keys(h),y=c.fields||{},w=Object.keys(y);p.sort(),w.sort();for(let E=0;E<p.length&&E<w.length;++E){const S=Ff(p[E],w[E]);if(S!==0)return S;const N=Go(h[p[E]],y[w[E]]);if(N!==0)return N}return Ue(p.length,w.length)})(n.mapValue,e.mapValue);default:throw Ce(23264,{he:t})}}function Iv(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Ue(n,e);const t=Gs(n),s=Gs(e),o=Ue(t.seconds,s.seconds);return o!==0?o:Ue(t.nanos,s.nanos)}function Sv(n,e){const t=n.values||[],s=e.values||[];for(let o=0;o<t.length&&o<s.length;++o){const l=Go(t[o],s[o]);if(l)return l}return Ue(t.length,s.length)}function Ko(n){return Uf(n)}function Uf(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?(function(t){const s=Gs(t);return`time(${s.seconds},${s.nanos})`})(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?(function(t){return Ks(t).toBase64()})(n.bytesValue):"referenceValue"in n?(function(t){return Ee.fromName(t).toString()})(n.referenceValue):"geoPointValue"in n?(function(t){return`geo(${t.latitude},${t.longitude})`})(n.geoPointValue):"arrayValue"in n?(function(t){let s="[",o=!0;for(const l of t.values||[])o?o=!1:s+=",",s+=Uf(l);return s+"]"})(n.arrayValue):"mapValue"in n?(function(t){const s=Object.keys(t.fields||{}).sort();let o="{",l=!0;for(const c of s)l?l=!1:o+=",",o+=`${c}:${Uf(t.fields[c])}`;return o+"}"})(n.mapValue):Ce(61005,{value:n})}function kc(n){switch(Qs(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=dd(n);return e?16+kc(e):16;case 5:return 2*n.stringValue.length;case 6:return Ks(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return(function(s){return(s.values||[]).reduce(((o,l)=>o+kc(l)),0)})(n.arrayValue);case 10:case 11:return(function(s){let o=0;return ei(s.fields,((l,c)=>{o+=l.length+kc(c)})),o})(n.mapValue);default:throw Ce(13486,{value:n})}}function bv(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function zf(n){return!!n&&"integerValue"in n}function kp(n){return!!n&&"arrayValue"in n}function kv(n){return!!n&&"nullValue"in n}function Cv(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Cc(n){return!!n&&"mapValue"in n}function $k(n){return(n?.mapValue?.fields||{})[J_]?.stringValue===Z_}function pl(n){if(n.geoPointValue)return{geoPointValue:{...n.geoPointValue}};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:{...n.timestampValue}};if(n.mapValue){const e={mapValue:{fields:{}}};return ei(n.mapValue.fields,((t,s)=>e.mapValue.fields[t]=pl(s))),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=pl(n.arrayValue.values[t]);return e}return{...n}}function Hk(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Bk}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let s=0;s<e.length-1;++s)if(t=(t.mapValue.fields||{})[e.get(s)],!Cc(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=pl(t)}setAll(e){let t=Ft.emptyPath(),s={},o=[];e.forEach(((c,h)=>{if(!t.isImmediateParentOf(h)){const p=this.getFieldsMap(t);this.applyChanges(p,s,o),s={},o=[],t=h.popLast()}c?s[h.lastSegment()]=pl(c):o.push(h.lastSegment())}));const l=this.getFieldsMap(t);this.applyChanges(l,s,o)}delete(e){const t=this.field(e.popLast());Cc(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Tr(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let s=0;s<e.length;++s){let o=t.mapValue.fields[e.get(s)];Cc(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},t.mapValue.fields[e.get(s)]=o),t=o}return t.mapValue.fields}applyChanges(e,t,s){ei(t,((o,l)=>e[o]=l));for(const o of s)delete e[o]}clone(){return new ln(pl(this.value))}}function ew(n){const e=[];return ei(n.fields,((t,s)=>{const o=new Ft([t]);if(Cc(s)){const l=ew(s.mapValue).fields;if(l.length===0)e.push(o);else for(const c of l)e.push(o.child(c))}else e.push(o)})),new wn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{constructor(e,t,s,o,l,c,h){this.key=e,this.documentType=t,this.version=s,this.readTime=o,this.createTime=l,this.data=c,this.documentState=h}static newInvalidDocument(e){return new Kt(e,0,Re.min(),Re.min(),Re.min(),ln.empty(),0)}static newFoundDocument(e,t,s,o){return new Kt(e,1,t,Re.min(),s,o,0)}static newNoDocument(e,t){return new Kt(e,2,t,Re.min(),Re.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new Kt(e,3,t,Re.min(),Re.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Re.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Re.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Kt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Kt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e,t){this.position=e,this.inclusive=t}}function Av(n,e,t){let s=0;for(let o=0;o<n.position.length;o++){const l=e[o],c=n.position[o];if(l.field.isKeyField()?s=Ee.comparator(Ee.fromName(c.referenceValue),t.key):s=Go(c,t.data.field(l.field)),l.dir==="desc"&&(s*=-1),s!==0)break}return s}function Rv(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Tr(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,t="asc"){this.field=e,this.dir=t}}function Wk(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tw{}class Tt extends tw{constructor(e,t,s){super(),this.field=e,this.op=t,this.value=s}static create(e,t,s){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,s):new Gk(e,t,s):t==="array-contains"?new Yk(e,s):t==="in"?new Xk(e,s):t==="not-in"?new Jk(e,s):t==="array-contains-any"?new Zk(e,s):new Tt(e,t,s)}static createKeyFieldInFilter(e,t,s){return t==="in"?new Kk(e,s):new Qk(e,s)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&t.nullValue===void 0&&this.matchesComparison(Go(t,this.value)):t!==null&&Qs(this.value)===Qs(t)&&this.matchesComparison(Go(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ce(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Wn extends tw{constructor(e,t){super(),this.filters=e,this.op=t,this.Pe=null}static create(e,t){return new Wn(e,t)}matches(e){return nw(this)?this.filters.find((t=>!t.matches(e)))===void 0:this.filters.find((t=>t.matches(e)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((e,t)=>e.concat(t.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function nw(n){return n.op==="and"}function rw(n){return qk(n)&&nw(n)}function qk(n){for(const e of n.filters)if(e instanceof Wn)return!1;return!0}function Bf(n){if(n instanceof Tt)return n.field.canonicalString()+n.op.toString()+Ko(n.value);if(rw(n))return n.filters.map((e=>Bf(e))).join(",");{const e=n.filters.map((t=>Bf(t))).join(",");return`${n.op}(${e})`}}function sw(n,e){return n instanceof Tt?(function(s,o){return o instanceof Tt&&s.op===o.op&&s.field.isEqual(o.field)&&Tr(s.value,o.value)})(n,e):n instanceof Wn?(function(s,o){return o instanceof Wn&&s.op===o.op&&s.filters.length===o.filters.length?s.filters.reduce(((l,c,h)=>l&&sw(c,o.filters[h])),!0):!1})(n,e):void Ce(19439)}function iw(n){return n instanceof Tt?(function(t){return`${t.field.canonicalString()} ${t.op} ${Ko(t.value)}`})(n):n instanceof Wn?(function(t){return t.op.toString()+" {"+t.getFilters().map(iw).join(" ,")+"}"})(n):"Filter"}class Gk extends Tt{constructor(e,t,s){super(e,t,s),this.key=Ee.fromName(s.referenceValue)}matches(e){const t=Ee.comparator(e.key,this.key);return this.matchesComparison(t)}}class Kk extends Tt{constructor(e,t){super(e,"in",t),this.keys=ow("in",t)}matches(e){return this.keys.some((t=>t.isEqual(e.key)))}}class Qk extends Tt{constructor(e,t){super(e,"not-in",t),this.keys=ow("not-in",t)}matches(e){return!this.keys.some((t=>t.isEqual(e.key)))}}function ow(n,e){return(e.arrayValue?.values||[]).map((t=>Ee.fromName(t.referenceValue)))}class Yk extends Tt{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return kp(t)&&Sl(t.arrayValue,this.value)}}class Xk extends Tt{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sl(this.value.arrayValue,t)}}class Jk extends Tt{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&t.nullValue===void 0&&!Sl(this.value.arrayValue,t)}}class Zk extends Tt{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!kp(t)||!t.arrayValue.values)&&t.arrayValue.values.some((s=>Sl(this.value.arrayValue,s)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eC{constructor(e,t=null,s=[],o=[],l=null,c=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=s,this.filters=o,this.limit=l,this.startAt=c,this.endAt=h,this.Te=null}}function Nv(n,e=null,t=[],s=[],o=null,l=null,c=null){return new eC(n,e,t,s,o,l,c)}function Cp(n){const e=Pe(n);if(e.Te===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map((s=>Bf(s))).join(","),t+="|ob:",t+=e.orderBy.map((s=>(function(l){return l.field.canonicalString()+l.dir})(s))).join(","),cd(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map((s=>Ko(s))).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map((s=>Ko(s))).join(",")),e.Te=t}return e.Te}function Ap(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Wk(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!sw(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rv(n.startAt,e.startAt)&&Rv(n.endAt,e.endAt)}function $f(n){return Ee.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa{constructor(e,t=null,s=[],o=[],l=null,c="F",h=null,p=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=s,this.filters=o,this.limit=l,this.limitType=c,this.startAt=h,this.endAt=p,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function tC(n,e,t,s,o,l,c,h){return new oa(n,e,t,s,o,l,c,h)}function hd(n){return new oa(n)}function Pv(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function aw(n){return n.collectionGroup!==null}function ml(n){const e=Pe(n);if(e.Ie===null){e.Ie=[];const t=new Set;for(const l of e.explicitOrderBy)e.Ie.push(l),t.add(l.field.canonicalString());const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(c){let h=new Ct(Ft.comparator);return c.filters.forEach((p=>{p.getFlattenedFilters().forEach((y=>{y.isInequality()&&(h=h.add(y.field))}))})),h})(e).forEach((l=>{t.has(l.canonicalString())||l.isKeyField()||e.Ie.push(new bl(l,s))})),t.has(Ft.keyField().canonicalString())||e.Ie.push(new bl(Ft.keyField(),s))}return e.Ie}function _r(n){const e=Pe(n);return e.Ee||(e.Ee=nC(e,ml(n))),e.Ee}function nC(n,e){if(n.limitType==="F")return Nv(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map((o=>{const l=o.dir==="desc"?"asc":"desc";return new bl(o.field,l)}));const t=n.endAt?new Hc(n.endAt.position,n.endAt.inclusive):null,s=n.startAt?new Hc(n.startAt.position,n.startAt.inclusive):null;return Nv(n.path,n.collectionGroup,e,n.filters,n.limit,t,s)}}function Hf(n,e){const t=n.filters.concat([e]);return new oa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Wf(n,e,t){return new oa(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function fd(n,e){return Ap(_r(n),_r(e))&&n.limitType===e.limitType}function lw(n){return`${Cp(_r(n))}|lt:${n.limitType}`}function Lo(n){return`Query(target=${(function(t){let s=t.path.canonicalString();return t.collectionGroup!==null&&(s+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(s+=`, filters: [${t.filters.map((o=>iw(o))).join(", ")}]`),cd(t.limit)||(s+=", limit: "+t.limit),t.orderBy.length>0&&(s+=`, orderBy: [${t.orderBy.map((o=>(function(c){return`${c.field.canonicalString()} (${c.dir})`})(o))).join(", ")}]`),t.startAt&&(s+=", startAt: ",s+=t.startAt.inclusive?"b:":"a:",s+=t.startAt.position.map((o=>Ko(o))).join(",")),t.endAt&&(s+=", endAt: ",s+=t.endAt.inclusive?"a:":"b:",s+=t.endAt.position.map((o=>Ko(o))).join(",")),`Target(${s})`})(_r(n))}; limitType=${n.limitType})`}function pd(n,e){return e.isFoundDocument()&&(function(s,o){const l=o.key.path;return s.collectionGroup!==null?o.key.hasCollectionId(s.collectionGroup)&&s.path.isPrefixOf(l):Ee.isDocumentKey(s.path)?s.path.isEqual(l):s.path.isImmediateParentOf(l)})(n,e)&&(function(s,o){for(const l of ml(s))if(!l.field.isKeyField()&&o.data.field(l.field)===null)return!1;return!0})(n,e)&&(function(s,o){for(const l of s.filters)if(!l.matches(o))return!1;return!0})(n,e)&&(function(s,o){return!(s.startAt&&!(function(c,h,p){const y=Av(c,h,p);return c.inclusive?y<=0:y<0})(s.startAt,ml(s),o)||s.endAt&&!(function(c,h,p){const y=Av(c,h,p);return c.inclusive?y>=0:y>0})(s.endAt,ml(s),o))})(n,e)}function rC(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function uw(n){return(e,t)=>{let s=!1;for(const o of ml(n)){const l=sC(o,e,t);if(l!==0)return l;s=s||o.field.isKeyField()}return 0}}function sC(n,e,t){const s=n.field.isKeyField()?Ee.comparator(e.key,t.key):(function(l,c,h){const p=c.data.field(l),y=h.data.field(l);return p!==null&&y!==null?Go(p,y):Ce(42886)})(n.field,e,t);switch(n.dir){case"asc":return s;case"desc":return-1*s;default:return Ce(19790,{direction:n.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hi{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s!==void 0){for(const[o,l]of s)if(this.equalsFn(o,e))return l}}has(e){return this.get(e)!==void 0}set(e,t){const s=this.mapKeyFn(e),o=this.inner[s];if(o===void 0)return this.inner[s]=[[e,t]],void this.innerSize++;for(let l=0;l<o.length;l++)if(this.equalsFn(o[l][0],e))return void(o[l]=[e,t]);o.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),s=this.inner[t];if(s===void 0)return!1;for(let o=0;o<s.length;o++)if(this.equalsFn(s[o][0],e))return s.length===1?delete this.inner[t]:s.splice(o,1),this.innerSize--,!0;return!1}forEach(e){ei(this.inner,((t,s)=>{for(const[o,l]of s)e(o,l)}))}isEmpty(){return q_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iC=new ut(Ee.comparator);function Zr(){return iC}const cw=new ut(Ee.comparator);function ul(...n){let e=cw;for(const t of n)e=e.insert(t.key,t);return e}function dw(n){let e=cw;return n.forEach(((t,s)=>e=e.insert(t,s.overlayedDocument))),e}function Di(){return gl()}function hw(){return gl()}function gl(){return new Hi((n=>n.toString()),((n,e)=>n.isEqual(e)))}const oC=new ut(Ee.comparator),aC=new Ct(Ee.comparator);function ze(...n){let e=aC;for(const t of n)e=e.add(t);return e}const lC=new Ct(Ue);function uC(){return lC}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rp(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:zc(e)?"-0":e}}function fw(n){return{integerValue:""+n}}function cC(n,e){return Mk(e)?fw(e):Rp(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class md{constructor(){this._=void 0}}function dC(n,e,t){return n instanceof Wc?(function(o,l){const c={fields:{[Q_]:{stringValue:K_},[X_]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return l&&bp(l)&&(l=dd(l)),l&&(c.fields[Y_]=l),{mapValue:c}})(t,e):n instanceof kl?mw(n,e):n instanceof Cl?gw(n,e):(function(o,l){const c=pw(o,l),h=Dv(c)+Dv(o.Ae);return zf(c)&&zf(o.Ae)?fw(h):Rp(o.serializer,h)})(n,e)}function hC(n,e,t){return n instanceof kl?mw(n,e):n instanceof Cl?gw(n,e):t}function pw(n,e){return n instanceof qc?(function(s){return zf(s)||(function(l){return!!l&&"doubleValue"in l})(s)})(e)?e:{integerValue:0}:null}class Wc extends md{}class kl extends md{constructor(e){super(),this.elements=e}}function mw(n,e){const t=yw(e);for(const s of n.elements)t.some((o=>Tr(o,s)))||t.push(s);return{arrayValue:{values:t}}}class Cl extends md{constructor(e){super(),this.elements=e}}function gw(n,e){let t=yw(e);for(const s of n.elements)t=t.filter((o=>!Tr(o,s)));return{arrayValue:{values:t}}}class qc extends md{constructor(e,t){super(),this.serializer=e,this.Ae=t}}function Dv(n){return yt(n.integerValue||n.doubleValue)}function yw(n){return kp(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}function fC(n,e){return n.field.isEqual(e.field)&&(function(s,o){return s instanceof kl&&o instanceof kl||s instanceof Cl&&o instanceof Cl?qo(s.elements,o.elements,Tr):s instanceof qc&&o instanceof qc?Tr(s.Ae,o.Ae):s instanceof Wc&&o instanceof Wc})(n.transform,e.transform)}class pC{constructor(e,t){this.version=e,this.transformResults=t}}class Nn{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Nn}static exists(e){return new Nn(void 0,e)}static updateTime(e){return new Nn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ac(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class gd{}function vw(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new Np(n.key,Nn.none()):new zl(n.key,n.data,Nn.none());{const t=n.data,s=ln.empty();let o=new Ct(Ft.comparator);for(let l of e.fields)if(!o.has(l)){let c=t.field(l);c===null&&l.length>1&&(l=l.popLast(),c=t.field(l)),c===null?s.delete(l):s.set(l,c),o=o.add(l)}return new ti(n.key,s,new wn(o.toArray()),Nn.none())}}function mC(n,e,t){n instanceof zl?(function(o,l,c){const h=o.value.clone(),p=Vv(o.fieldTransforms,l,c.transformResults);h.setAll(p),l.convertToFoundDocument(c.version,h).setHasCommittedMutations()})(n,e,t):n instanceof ti?(function(o,l,c){if(!Ac(o.precondition,l))return void l.convertToUnknownDocument(c.version);const h=Vv(o.fieldTransforms,l,c.transformResults),p=l.data;p.setAll(_w(o)),p.setAll(h),l.convertToFoundDocument(c.version,p).setHasCommittedMutations()})(n,e,t):(function(o,l,c){l.convertToNoDocument(c.version).setHasCommittedMutations()})(0,e,t)}function yl(n,e,t,s){return n instanceof zl?(function(l,c,h,p){if(!Ac(l.precondition,c))return h;const y=l.value.clone(),w=Lv(l.fieldTransforms,p,c);return y.setAll(w),c.convertToFoundDocument(c.version,y).setHasLocalMutations(),null})(n,e,t,s):n instanceof ti?(function(l,c,h,p){if(!Ac(l.precondition,c))return h;const y=Lv(l.fieldTransforms,p,c),w=c.data;return w.setAll(_w(l)),w.setAll(y),c.convertToFoundDocument(c.version,w).setHasLocalMutations(),h===null?null:h.unionWith(l.fieldMask.fields).unionWith(l.fieldTransforms.map((E=>E.field)))})(n,e,t,s):(function(l,c,h){return Ac(l.precondition,c)?(c.convertToNoDocument(c.version).setHasLocalMutations(),null):h})(n,e,t)}function gC(n,e){let t=null;for(const s of n.fieldTransforms){const o=e.data.field(s.field),l=pw(s.transform,o||null);l!=null&&(t===null&&(t=ln.empty()),t.set(s.field,l))}return t||null}function jv(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!(function(s,o){return s===void 0&&o===void 0||!(!s||!o)&&qo(s,o,((l,c)=>fC(l,c)))})(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class zl extends gd{constructor(e,t,s,o=[]){super(),this.key=e,this.value=t,this.precondition=s,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class ti extends gd{constructor(e,t,s,o,l=[]){super(),this.key=e,this.data=t,this.fieldMask=s,this.precondition=o,this.fieldTransforms=l,this.type=1}getFieldMask(){return this.fieldMask}}function _w(n){const e=new Map;return n.fieldMask.fields.forEach((t=>{if(!t.isEmpty()){const s=n.data.field(t);e.set(t,s)}})),e}function Vv(n,e,t){const s=new Map;Ke(n.length===t.length,32656,{Re:t.length,Ve:n.length});for(let o=0;o<t.length;o++){const l=n[o],c=l.transform,h=e.data.field(l.field);s.set(l.field,hC(c,h,t[o]))}return s}function Lv(n,e,t){const s=new Map;for(const o of n){const l=o.transform,c=t.data.field(o.field);s.set(o.field,dC(l,c,e))}return s}class Np extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class yC extends gd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vC{constructor(e,t,s,o){this.batchId=e,this.localWriteTime=t,this.baseMutations=s,this.mutations=o}applyToRemoteDocument(e,t){const s=t.mutationResults;for(let o=0;o<this.mutations.length;o++){const l=this.mutations[o];l.key.isEqual(e.key)&&mC(l,e,s[o])}}applyToLocalView(e,t){for(const s of this.baseMutations)s.key.isEqual(e.key)&&(t=yl(s,e,t,this.localWriteTime));for(const s of this.mutations)s.key.isEqual(e.key)&&(t=yl(s,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const s=hw();return this.mutations.forEach((o=>{const l=e.get(o.key),c=l.overlayedDocument;let h=this.applyToLocalView(c,l.mutatedFields);h=t.has(o.key)?null:h;const p=vw(c,h);p!==null&&s.set(o.key,p),c.isValidDocument()||c.convertToNoDocument(Re.min())})),s}keys(){return this.mutations.reduce(((e,t)=>e.add(t.key)),ze())}isEqual(e){return this.batchId===e.batchId&&qo(this.mutations,e.mutations,((t,s)=>jv(t,s)))&&qo(this.baseMutations,e.baseMutations,((t,s)=>jv(t,s)))}}class Pp{constructor(e,t,s,o){this.batch=e,this.commitVersion=t,this.mutationResults=s,this.docVersions=o}static from(e,t,s){Ke(e.mutations.length===s.length,58842,{me:e.mutations.length,fe:s.length});let o=(function(){return oC})();const l=e.mutations;for(let c=0;c<l.length;c++)o=o.insert(l[c].key,s[c].version);return new Pp(e,t,s,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _C{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wC{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Et,$e;function xC(n){switch(n){case X.OK:return Ce(64938);case X.CANCELLED:case X.UNKNOWN:case X.DEADLINE_EXCEEDED:case X.RESOURCE_EXHAUSTED:case X.INTERNAL:case X.UNAVAILABLE:case X.UNAUTHENTICATED:return!1;case X.INVALID_ARGUMENT:case X.NOT_FOUND:case X.ALREADY_EXISTS:case X.PERMISSION_DENIED:case X.FAILED_PRECONDITION:case X.ABORTED:case X.OUT_OF_RANGE:case X.UNIMPLEMENTED:case X.DATA_LOSS:return!0;default:return Ce(15467,{code:n})}}function ww(n){if(n===void 0)return Jr("GRPC error has no .code"),X.UNKNOWN;switch(n){case Et.OK:return X.OK;case Et.CANCELLED:return X.CANCELLED;case Et.UNKNOWN:return X.UNKNOWN;case Et.DEADLINE_EXCEEDED:return X.DEADLINE_EXCEEDED;case Et.RESOURCE_EXHAUSTED:return X.RESOURCE_EXHAUSTED;case Et.INTERNAL:return X.INTERNAL;case Et.UNAVAILABLE:return X.UNAVAILABLE;case Et.UNAUTHENTICATED:return X.UNAUTHENTICATED;case Et.INVALID_ARGUMENT:return X.INVALID_ARGUMENT;case Et.NOT_FOUND:return X.NOT_FOUND;case Et.ALREADY_EXISTS:return X.ALREADY_EXISTS;case Et.PERMISSION_DENIED:return X.PERMISSION_DENIED;case Et.FAILED_PRECONDITION:return X.FAILED_PRECONDITION;case Et.ABORTED:return X.ABORTED;case Et.OUT_OF_RANGE:return X.OUT_OF_RANGE;case Et.UNIMPLEMENTED:return X.UNIMPLEMENTED;case Et.DATA_LOSS:return X.DATA_LOSS;default:return Ce(39323,{code:n})}}($e=Et||(Et={}))[$e.OK=0]="OK",$e[$e.CANCELLED=1]="CANCELLED",$e[$e.UNKNOWN=2]="UNKNOWN",$e[$e.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",$e[$e.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",$e[$e.NOT_FOUND=5]="NOT_FOUND",$e[$e.ALREADY_EXISTS=6]="ALREADY_EXISTS",$e[$e.PERMISSION_DENIED=7]="PERMISSION_DENIED",$e[$e.UNAUTHENTICATED=16]="UNAUTHENTICATED",$e[$e.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",$e[$e.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",$e[$e.ABORTED=10]="ABORTED",$e[$e.OUT_OF_RANGE=11]="OUT_OF_RANGE",$e[$e.UNIMPLEMENTED=12]="UNIMPLEMENTED",$e[$e.INTERNAL=13]="INTERNAL",$e[$e.UNAVAILABLE=14]="UNAVAILABLE",$e[$e.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EC(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TC=new Hs([4294967295,4294967295],0);function Mv(n){const e=EC().encode(n),t=new V_;return t.update(e),new Uint8Array(t.digest())}function Ov(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),s=e.getUint32(4,!0),o=e.getUint32(8,!0),l=e.getUint32(12,!0);return[new Hs([t,s],0),new Hs([o,l],0)]}class Dp{constructor(e,t,s){if(this.bitmap=e,this.padding=t,this.hashCount=s,t<0||t>=8)throw new cl(`Invalid padding: ${t}`);if(s<0)throw new cl(`Invalid hash count: ${s}`);if(e.length>0&&this.hashCount===0)throw new cl(`Invalid hash count: ${s}`);if(e.length===0&&t!==0)throw new cl(`Invalid padding when bitmap length is 0: ${t}`);this.ge=8*e.length-t,this.pe=Hs.fromNumber(this.ge)}ye(e,t,s){let o=e.add(t.multiply(Hs.fromNumber(s)));return o.compare(TC)===1&&(o=new Hs([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const t=Mv(e),[s,o]=Ov(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);if(!this.we(c))return!1}return!0}static create(e,t,s){const o=e%8==0?0:8-e%8,l=new Uint8Array(Math.ceil(e/8)),c=new Dp(l,o,t);return s.forEach((h=>c.insert(h))),c}insert(e){if(this.ge===0)return;const t=Mv(e),[s,o]=Ov(t);for(let l=0;l<this.hashCount;l++){const c=this.ye(s,o,l);this.Se(c)}}Se(e){const t=Math.floor(e/8),s=e%8;this.bitmap[t]|=1<<s}}class cl extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yd{constructor(e,t,s,o,l){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=s,this.documentUpdates=o,this.resolvedLimboDocuments=l}static createSynthesizedRemoteEventForCurrentChange(e,t,s){const o=new Map;return o.set(e,Bl.createSynthesizedTargetChangeForCurrentChange(e,t,s)),new yd(Re.min(),o,new ut(Ue),Zr(),ze())}}class Bl{constructor(e,t,s,o,l){this.resumeToken=e,this.current=t,this.addedDocuments=s,this.modifiedDocuments=o,this.removedDocuments=l}static createSynthesizedTargetChangeForCurrentChange(e,t,s){return new Bl(s,t,ze(),ze(),ze())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(e,t,s,o){this.be=e,this.removedTargetIds=t,this.key=s,this.De=o}}class xw{constructor(e,t){this.targetId=e,this.Ce=t}}class Ew{constructor(e,t,s=Ut.EMPTY_BYTE_STRING,o=null){this.state=e,this.targetIds=t,this.resumeToken=s,this.cause=o}}class Fv{constructor(){this.ve=0,this.Fe=Uv(),this.Me=Ut.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=ze(),t=ze(),s=ze();return this.Fe.forEach(((o,l)=>{switch(l){case 0:e=e.add(o);break;case 2:t=t.add(o);break;case 1:s=s.add(o);break;default:Ce(38017,{changeType:l})}})),new Bl(this.Me,this.xe,e,t,s)}qe(){this.Oe=!1,this.Fe=Uv()}Qe(e,t){this.Oe=!0,this.Fe=this.Fe.insert(e,t)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ke(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class IC{constructor(e){this.Ge=e,this.ze=new Map,this.je=Zr(),this.Je=gc(),this.He=gc(),this.Ye=new ut(Ue)}Ze(e){for(const t of e.be)e.De&&e.De.isFoundDocument()?this.Xe(t,e.De):this.et(t,e.key,e.De);for(const t of e.removedTargetIds)this.et(t,e.key,e.De)}tt(e){this.forEachTarget(e,(t=>{const s=this.nt(t);switch(e.state){case 0:this.rt(t)&&s.Le(e.resumeToken);break;case 1:s.Ke(),s.Ne||s.qe(),s.Le(e.resumeToken);break;case 2:s.Ke(),s.Ne||this.removeTarget(t);break;case 3:this.rt(t)&&(s.We(),s.Le(e.resumeToken));break;case 4:this.rt(t)&&(this.it(t),s.Le(e.resumeToken));break;default:Ce(56790,{state:e.state})}}))}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.ze.forEach(((s,o)=>{this.rt(o)&&t(o)}))}st(e){const t=e.targetId,s=e.Ce.count,o=this.ot(t);if(o){const l=o.target;if($f(l))if(s===0){const c=new Ee(l.path);this.et(t,c,Kt.newNoDocument(c,Re.min()))}else Ke(s===1,20013,{expectedCount:s});else{const c=this._t(t);if(c!==s){const h=this.ut(e),p=h?this.ct(h,e,c):1;if(p!==0){this.it(t);const y=p===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(t,y)}}}}}ut(e){const t=e.Ce.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:s="",padding:o=0},hashCount:l=0}=t;let c,h;try{c=Ks(s).toUint8Array()}catch(p){if(p instanceof G_)return Wo("Decoding the base64 bloom filter in existence filter failed ("+p.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw p}try{h=new Dp(c,o,l)}catch(p){return Wo(p instanceof cl?"BloomFilter error: ":"Applying bloom filter failed: ",p),null}return h.ge===0?null:h}ct(e,t,s){return t.Ce.count===s-this.Pt(e,t.targetId)?0:2}Pt(e,t){const s=this.Ge.getRemoteKeysForTarget(t);let o=0;return s.forEach((l=>{const c=this.Ge.ht(),h=`projects/${c.projectId}/databases/${c.database}/documents/${l.path.canonicalString()}`;e.mightContain(h)||(this.et(t,l,null),o++)})),o}Tt(e){const t=new Map;this.ze.forEach(((l,c)=>{const h=this.ot(c);if(h){if(l.current&&$f(h.target)){const p=new Ee(h.target.path);this.It(p).has(c)||this.Et(c,p)||this.et(c,p,Kt.newNoDocument(p,e))}l.Be&&(t.set(c,l.ke()),l.qe())}}));let s=ze();this.He.forEach(((l,c)=>{let h=!0;c.forEachWhile((p=>{const y=this.ot(p);return!y||y.purpose==="TargetPurposeLimboResolution"||(h=!1,!1)})),h&&(s=s.add(l))})),this.je.forEach(((l,c)=>c.setReadTime(e)));const o=new yd(e,t,this.Ye,this.je,s);return this.je=Zr(),this.Je=gc(),this.He=gc(),this.Ye=new ut(Ue),o}Xe(e,t){if(!this.rt(e))return;const s=this.Et(e,t.key)?2:0;this.nt(e).Qe(t.key,s),this.je=this.je.insert(t.key,t),this.Je=this.Je.insert(t.key,this.It(t.key).add(e)),this.He=this.He.insert(t.key,this.dt(t.key).add(e))}et(e,t,s){if(!this.rt(e))return;const o=this.nt(e);this.Et(e,t)?o.Qe(t,1):o.$e(t),this.He=this.He.insert(t,this.dt(t).delete(e)),this.He=this.He.insert(t,this.dt(t).add(e)),s&&(this.je=this.je.insert(t,s))}removeTarget(e){this.ze.delete(e)}_t(e){const t=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let t=this.ze.get(e);return t||(t=new Fv,this.ze.set(e,t)),t}dt(e){let t=this.He.get(e);return t||(t=new Ct(Ue),this.He=this.He.insert(e,t)),t}It(e){let t=this.Je.get(e);return t||(t=new Ct(Ue),this.Je=this.Je.insert(e,t)),t}rt(e){const t=this.ot(e)!==null;return t||ce("WatchChangeAggregator","Detected inactive target",e),t}ot(e){const t=this.ze.get(e);return t&&t.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new Fv),this.Ge.getRemoteKeysForTarget(e).forEach((t=>{this.et(e,t,null)}))}Et(e,t){return this.Ge.getRemoteKeysForTarget(e).has(t)}}function gc(){return new ut(Ee.comparator)}function Uv(){return new ut(Ee.comparator)}const SC={asc:"ASCENDING",desc:"DESCENDING"},bC={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},kC={and:"AND",or:"OR"};class CC{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function qf(n,e){return n.useProto3Json||cd(e)?e:{value:e}}function Gc(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Tw(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function AC(n,e){return Gc(n,e.toTimestamp())}function wr(n){return Ke(!!n,49232),Re.fromTimestamp((function(t){const s=Gs(t);return new rt(s.seconds,s.nanos)})(n))}function jp(n,e){return Gf(n,e).canonicalString()}function Gf(n,e){const t=(function(o){return new Ze(["projects",o.projectId,"databases",o.database])})(n).child("documents");return e===void 0?t:t.child(e)}function Iw(n){const e=Ze.fromString(n);return Ke(Aw(e),10190,{key:e.toString()}),e}function Kf(n,e){return jp(n.databaseId,e.path)}function wf(n,e){const t=Iw(e);if(t.get(1)!==n.databaseId.projectId)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new oe(X.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Ee(bw(t))}function Sw(n,e){return jp(n.databaseId,e)}function RC(n){const e=Iw(n);return e.length===4?Ze.emptyPath():bw(e)}function Qf(n){return new Ze(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function bw(n){return Ke(n.length>4&&n.get(4)==="documents",29091,{key:n.toString()}),n.popFirst(5)}function zv(n,e,t){return{name:Kf(n,e),fields:t.value.mapValue.fields}}function NC(n,e){let t;if("targetChange"in e){e.targetChange;const s=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:Ce(39313,{state:y})})(e.targetChange.targetChangeType||"NO_CHANGE"),o=e.targetChange.targetIds||[],l=(function(y,w){return y.useProto3Json?(Ke(w===void 0||typeof w=="string",58123),Ut.fromBase64String(w||"")):(Ke(w===void 0||w instanceof Buffer||w instanceof Uint8Array,16193),Ut.fromUint8Array(w||new Uint8Array))})(n,e.targetChange.resumeToken),c=e.targetChange.cause,h=c&&(function(y){const w=y.code===void 0?X.UNKNOWN:ww(y.code);return new oe(w,y.message||"")})(c);t=new Ew(s,o,l,h||null)}else if("documentChange"in e){e.documentChange;const s=e.documentChange;s.document,s.document.name,s.document.updateTime;const o=wf(n,s.document.name),l=wr(s.document.updateTime),c=s.document.createTime?wr(s.document.createTime):Re.min(),h=new ln({mapValue:{fields:s.document.fields}}),p=Kt.newFoundDocument(o,l,c,h),y=s.targetIds||[],w=s.removedTargetIds||[];t=new Rc(y,w,p.key,p)}else if("documentDelete"in e){e.documentDelete;const s=e.documentDelete;s.document;const o=wf(n,s.document),l=s.readTime?wr(s.readTime):Re.min(),c=Kt.newNoDocument(o,l),h=s.removedTargetIds||[];t=new Rc([],h,c.key,c)}else if("documentRemove"in e){e.documentRemove;const s=e.documentRemove;s.document;const o=wf(n,s.document),l=s.removedTargetIds||[];t=new Rc([],l,o,null)}else{if(!("filter"in e))return Ce(11601,{Rt:e});{e.filter;const s=e.filter;s.targetId;const{count:o=0,unchangedNames:l}=s,c=new wC(o,l),h=s.targetId;t=new xw(h,c)}}return t}function PC(n,e){let t;if(e instanceof zl)t={update:zv(n,e.key,e.value)};else if(e instanceof Np)t={delete:Kf(n,e.key)};else if(e instanceof ti)t={update:zv(n,e.key,e.data),updateMask:zC(e.fieldMask)};else{if(!(e instanceof yC))return Ce(16599,{Vt:e.type});t={verify:Kf(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map((s=>(function(l,c){const h=c.transform;if(h instanceof Wc)return{fieldPath:c.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(h instanceof kl)return{fieldPath:c.field.canonicalString(),appendMissingElements:{values:h.elements}};if(h instanceof Cl)return{fieldPath:c.field.canonicalString(),removeAllFromArray:{values:h.elements}};if(h instanceof qc)return{fieldPath:c.field.canonicalString(),increment:h.Ae};throw Ce(20930,{transform:c.transform})})(0,s)))),e.precondition.isNone||(t.currentDocument=(function(o,l){return l.updateTime!==void 0?{updateTime:AC(o,l.updateTime)}:l.exists!==void 0?{exists:l.exists}:Ce(27497)})(n,e.precondition)),t}function DC(n,e){return n&&n.length>0?(Ke(e!==void 0,14353),n.map((t=>(function(o,l){let c=o.updateTime?wr(o.updateTime):wr(l);return c.isEqual(Re.min())&&(c=wr(l)),new pC(c,o.transformResults||[])})(t,e)))):[]}function jC(n,e){return{documents:[Sw(n,e.path)]}}function VC(n,e){const t={structuredQuery:{}},s=e.path;let o;e.collectionGroup!==null?(o=s,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(o=s.popLast(),t.structuredQuery.from=[{collectionId:s.lastSegment()}]),t.parent=Sw(n,o);const l=(function(y){if(y.length!==0)return Cw(Wn.create(y,"and"))})(e.filters);l&&(t.structuredQuery.where=l);const c=(function(y){if(y.length!==0)return y.map((w=>(function(S){return{field:Mo(S.field),direction:OC(S.dir)}})(w)))})(e.orderBy);c&&(t.structuredQuery.orderBy=c);const h=qf(n,e.limit);return h!==null&&(t.structuredQuery.limit=h),e.startAt&&(t.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(e.startAt)),e.endAt&&(t.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(e.endAt)),{ft:t,parent:o}}function LC(n){let e=RC(n.parent);const t=n.structuredQuery,s=t.from?t.from.length:0;let o=null;if(s>0){Ke(s===1,65062);const w=t.from[0];w.allDescendants?o=w.collectionId:e=e.child(w.collectionId)}let l=[];t.where&&(l=(function(E){const S=kw(E);return S instanceof Wn&&rw(S)?S.getFilters():[S]})(t.where));let c=[];t.orderBy&&(c=(function(E){return E.map((S=>(function(U){return new bl(Oo(U.field),(function(k){switch(k){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(U.direction))})(S)))})(t.orderBy));let h=null;t.limit&&(h=(function(E){let S;return S=typeof E=="object"?E.value:E,cd(S)?null:S})(t.limit));let p=null;t.startAt&&(p=(function(E){const S=!!E.before,N=E.values||[];return new Hc(N,S)})(t.startAt));let y=null;return t.endAt&&(y=(function(E){const S=!E.before,N=E.values||[];return new Hc(N,S)})(t.endAt)),tC(e,o,c,l,h,"F",p,y)}function MC(n,e){const t=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce(28987,{purpose:o})}})(e.purpose);return t==null?null:{"goog-listen-tags":t}}function kw(n){return n.unaryFilter!==void 0?(function(t){switch(t.unaryFilter.op){case"IS_NAN":const s=Oo(t.unaryFilter.field);return Tt.create(s,"==",{doubleValue:NaN});case"IS_NULL":const o=Oo(t.unaryFilter.field);return Tt.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const l=Oo(t.unaryFilter.field);return Tt.create(l,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const c=Oo(t.unaryFilter.field);return Tt.create(c,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce(61313);default:return Ce(60726)}})(n):n.fieldFilter!==void 0?(function(t){return Tt.create(Oo(t.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce(58110);default:return Ce(50506)}})(t.fieldFilter.op),t.fieldFilter.value)})(n):n.compositeFilter!==void 0?(function(t){return Wn.create(t.compositeFilter.filters.map((s=>kw(s))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return Ce(1026)}})(t.compositeFilter.op))})(n):Ce(30097,{filter:n})}function OC(n){return SC[n]}function FC(n){return bC[n]}function UC(n){return kC[n]}function Mo(n){return{fieldPath:n.canonicalString()}}function Oo(n){return Ft.fromServerFormat(n.fieldPath)}function Cw(n){return n instanceof Tt?(function(t){if(t.op==="=="){if(Cv(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NAN"}};if(kv(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(Cv(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NAN"}};if(kv(t.value))return{unaryFilter:{field:Mo(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Mo(t.field),op:FC(t.op),value:t.value}}})(n):n instanceof Wn?(function(t){const s=t.getFilters().map((o=>Cw(o)));return s.length===1?s[0]:{compositeFilter:{op:UC(t.op),filters:s}}})(n):Ce(54877,{filter:n})}function zC(n){const e=[];return n.fields.forEach((t=>e.push(t.canonicalString()))),{fieldPaths:e}}function Aw(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Us{constructor(e,t,s,o,l=Re.min(),c=Re.min(),h=Ut.EMPTY_BYTE_STRING,p=null){this.target=e,this.targetId=t,this.purpose=s,this.sequenceNumber=o,this.snapshotVersion=l,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=h,this.expectedCount=p}withSequenceNumber(e){return new Us(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Us(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BC{constructor(e){this.yt=e}}function $C(n){const e=LC({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?Wf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(){this.Cn=new WC}addToCollectionParentIndex(e,t){return this.Cn.add(t),J.resolve()}getCollectionParents(e,t){return J.resolve(this.Cn.getEntries(t))}addFieldIndex(e,t){return J.resolve()}deleteFieldIndex(e,t){return J.resolve()}deleteAllFieldIndexes(e){return J.resolve()}createTargetIndexes(e,t){return J.resolve()}getDocumentsMatchingTarget(e,t){return J.resolve(null)}getIndexType(e,t){return J.resolve(0)}getFieldIndexes(e,t){return J.resolve([])}getNextCollectionGroupToUpdate(e){return J.resolve(null)}getMinOffset(e,t){return J.resolve(qs.min())}getMinOffsetFromCollectionGroup(e,t){return J.resolve(qs.min())}updateCollectionGroup(e,t,s){return J.resolve()}updateIndexEntries(e,t){return J.resolve()}}class WC{constructor(){this.index={}}add(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t]||new Ct(Ze.comparator),l=!o.has(s);return this.index[t]=o.add(s),l}has(e){const t=e.lastSegment(),s=e.popLast(),o=this.index[t];return o&&o.has(s)}getEntries(e){return(this.index[e]||new Ct(Ze.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Rw=41943040;class an{static withCacheSize(e){return new an(e,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,s){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */an.DEFAULT_COLLECTION_PERCENTILE=10,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,an.DEFAULT=new an(Rw,an.DEFAULT_COLLECTION_PERCENTILE,an.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),an.DISABLED=new an(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new Qo(0)}static cr(){return new Qo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $v="LruGarbageCollector",qC=1048576;function Hv([n,e],[t,s]){const o=Ue(n,t);return o===0?Ue(e,s):o}class GC{constructor(e){this.Ir=e,this.buffer=new Ct(Hv),this.Er=0}dr(){return++this.Er}Ar(e){const t=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(t);else{const s=this.buffer.last();Hv(t,s)<0&&(this.buffer=this.buffer.delete(s).add(t))}}get maxValue(){return this.buffer.last()[0]}}class KC{constructor(e,t,s){this.garbageCollector=e,this.asyncQueue=t,this.localStore=s,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){ce($v,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){ia(t)?ce($v,"Ignoring IndexedDB error during garbage collection: ",t):await sa(t)}await this.Vr(3e5)}))}}class QC{constructor(e,t){this.mr=e,this.params=t}calculateTargetCount(e,t){return this.mr.gr(e).next((s=>Math.floor(t/100*s)))}nthSequenceNumber(e,t){if(t===0)return J.resolve(ud.ce);const s=new GC(t);return this.mr.forEachTarget(e,(o=>s.Ar(o.sequenceNumber))).next((()=>this.mr.pr(e,(o=>s.Ar(o))))).next((()=>s.maxValue))}removeTargets(e,t,s){return this.mr.removeTargets(e,t,s)}removeOrphanedDocuments(e,t){return this.mr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(ce("LruGarbageCollector","Garbage collection skipped; disabled"),J.resolve(Bv)):this.getCacheSize(e).next((s=>s<this.params.cacheSizeCollectionThreshold?(ce("LruGarbageCollector",`Garbage collection skipped; Cache size ${s} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Bv):this.yr(e,t)))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,t){let s,o,l,c,h,p,y;const w=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next((E=>(E>this.params.maximumSequenceNumbersToCollect?(ce("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${E}`),o=this.params.maximumSequenceNumbersToCollect):o=E,c=Date.now(),this.nthSequenceNumber(e,o)))).next((E=>(s=E,h=Date.now(),this.removeTargets(e,s,t)))).next((E=>(l=E,p=Date.now(),this.removeOrphanedDocuments(e,s)))).next((E=>(y=Date.now(),Vo()<=Fe.DEBUG&&ce("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${c-w}ms
	Determined least recently used ${o} in `+(h-c)+`ms
	Removed ${l} targets in `+(p-h)+`ms
	Removed ${E} documents in `+(y-p)+`ms
Total Duration: ${y-w}ms`),J.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:l,documentsRemoved:E}))))}}function YC(n,e){return new QC(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(){this.changes=new Hi((e=>e.toString()),((e,t)=>e.isEqual(t))),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Kt.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const s=this.changes.get(t);return s!==void 0?J.resolve(s):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC{constructor(e,t,s,o){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=s,this.indexManager=o}getDocument(e,t){let s=null;return this.documentOverlayCache.getOverlay(e,t).next((o=>(s=o,this.remoteDocumentCache.getEntry(e,t)))).next((o=>(s!==null&&yl(s.mutation,o,wn.empty(),rt.now()),o)))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.getLocalViewOfDocuments(e,s,ze()).next((()=>s))))}getLocalViewOfDocuments(e,t,s=ze()){const o=Di();return this.populateOverlays(e,o,t).next((()=>this.computeViews(e,t,o,s).next((l=>{let c=ul();return l.forEach(((h,p)=>{c=c.insert(h,p.overlayedDocument)})),c}))))}getOverlayedDocuments(e,t){const s=Di();return this.populateOverlays(e,s,t).next((()=>this.computeViews(e,t,s,ze())))}populateOverlays(e,t,s){const o=[];return s.forEach((l=>{t.has(l)||o.push(l)})),this.documentOverlayCache.getOverlays(e,o).next((l=>{l.forEach(((c,h)=>{t.set(c,h)}))}))}computeViews(e,t,s,o){let l=Zr();const c=gl(),h=(function(){return gl()})();return t.forEach(((p,y)=>{const w=s.get(y.key);o.has(y.key)&&(w===void 0||w.mutation instanceof ti)?l=l.insert(y.key,y):w!==void 0?(c.set(y.key,w.mutation.getFieldMask()),yl(w.mutation,y,w.mutation.getFieldMask(),rt.now())):c.set(y.key,wn.empty())})),this.recalculateAndSaveOverlays(e,l).next((p=>(p.forEach(((y,w)=>c.set(y,w))),t.forEach(((y,w)=>h.set(y,new JC(w,c.get(y)??null)))),h)))}recalculateAndSaveOverlays(e,t){const s=gl();let o=new ut(((c,h)=>c-h)),l=ze();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next((c=>{for(const h of c)h.keys().forEach((p=>{const y=t.get(p);if(y===null)return;let w=s.get(p)||wn.empty();w=h.applyToLocalView(y,w),s.set(p,w);const E=(o.get(h.batchId)||ze()).add(p);o=o.insert(h.batchId,E)}))})).next((()=>{const c=[],h=o.getReverseIterator();for(;h.hasNext();){const p=h.getNext(),y=p.key,w=p.value,E=hw();w.forEach((S=>{if(!l.has(S)){const N=vw(t.get(S),s.get(S));N!==null&&E.set(S,N),l=l.add(S)}})),c.push(this.documentOverlayCache.saveOverlays(e,y,E))}return J.waitFor(c)})).next((()=>s))}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next((s=>this.recalculateAndSaveOverlays(e,s)))}getDocumentsMatchingQuery(e,t,s,o){return(function(c){return Ee.isDocumentKey(c.path)&&c.collectionGroup===null&&c.filters.length===0})(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):aw(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,s,o):this.getDocumentsMatchingCollectionQuery(e,t,s,o)}getNextDocuments(e,t,s,o){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,s,o).next((l=>{const c=o-l.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,s.largestBatchId,o-l.size):J.resolve(Di());let h=El,p=l;return c.next((y=>J.forEach(y,((w,E)=>(h<E.largestBatchId&&(h=E.largestBatchId),l.get(w)?J.resolve():this.remoteDocumentCache.getEntry(e,w).next((S=>{p=p.insert(w,S)}))))).next((()=>this.populateOverlays(e,y,l))).next((()=>this.computeViews(e,p,y,ze()))).next((w=>({batchId:h,changes:dw(w)})))))}))}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Ee(t)).next((s=>{let o=ul();return s.isFoundDocument()&&(o=o.insert(s.key,s)),o}))}getDocumentsMatchingCollectionGroupQuery(e,t,s,o){const l=t.collectionGroup;let c=ul();return this.indexManager.getCollectionParents(e,l).next((h=>J.forEach(h,(p=>{const y=(function(E,S){return new oa(S,null,E.explicitOrderBy.slice(),E.filters.slice(),E.limit,E.limitType,E.startAt,E.endAt)})(t,p.child(l));return this.getDocumentsMatchingCollectionQuery(e,y,s,o).next((w=>{w.forEach(((E,S)=>{c=c.insert(E,S)}))}))})).next((()=>c))))}getDocumentsMatchingCollectionQuery(e,t,s,o){let l;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,s.largestBatchId).next((c=>(l=c,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,s,l,o)))).next((c=>{l.forEach(((p,y)=>{const w=y.getKey();c.get(w)===null&&(c=c.insert(w,Kt.newInvalidDocument(w)))}));let h=ul();return c.forEach(((p,y)=>{const w=l.get(p);w!==void 0&&yl(w.mutation,y,wn.empty(),rt.now()),pd(t,y)&&(h=h.insert(p,y))})),h}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eA{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,t){return J.resolve(this.Lr.get(t))}saveBundleMetadata(e,t){return this.Lr.set(t.id,(function(o){return{id:o.id,version:o.version,createTime:wr(o.createTime)}})(t)),J.resolve()}getNamedQuery(e,t){return J.resolve(this.kr.get(t))}saveNamedQuery(e,t){return this.kr.set(t.name,(function(o){return{name:o.name,query:$C(o.bundledQuery),readTime:wr(o.readTime)}})(t)),J.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tA{constructor(){this.overlays=new ut(Ee.comparator),this.qr=new Map}getOverlay(e,t){return J.resolve(this.overlays.get(t))}getOverlays(e,t){const s=Di();return J.forEach(t,(o=>this.getOverlay(e,o).next((l=>{l!==null&&s.set(o,l)})))).next((()=>s))}saveOverlays(e,t,s){return s.forEach(((o,l)=>{this.St(e,t,l)})),J.resolve()}removeOverlaysForBatchId(e,t,s){const o=this.qr.get(s);return o!==void 0&&(o.forEach((l=>this.overlays=this.overlays.remove(l))),this.qr.delete(s)),J.resolve()}getOverlaysForCollection(e,t,s){const o=Di(),l=t.length+1,c=new Ee(t.child("")),h=this.overlays.getIteratorFrom(c);for(;h.hasNext();){const p=h.getNext().value,y=p.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===l&&p.largestBatchId>s&&o.set(p.getKey(),p)}return J.resolve(o)}getOverlaysForCollectionGroup(e,t,s,o){let l=new ut(((y,w)=>y-w));const c=this.overlays.getIterator();for(;c.hasNext();){const y=c.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>s){let w=l.get(y.largestBatchId);w===null&&(w=Di(),l=l.insert(y.largestBatchId,w)),w.set(y.getKey(),y)}}const h=Di(),p=l.getIterator();for(;p.hasNext()&&(p.getNext().value.forEach(((y,w)=>h.set(y,w))),!(h.size()>=o)););return J.resolve(h)}St(e,t,s){const o=this.overlays.get(s.key);if(o!==null){const c=this.qr.get(o.largestBatchId).delete(s.key);this.qr.set(o.largestBatchId,c)}this.overlays=this.overlays.insert(s.key,new _C(t,s));let l=this.qr.get(t);l===void 0&&(l=ze(),this.qr.set(t,l)),this.qr.set(t,l.add(s.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nA{constructor(){this.sessionToken=Ut.EMPTY_BYTE_STRING}getSessionToken(e){return J.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,J.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vp{constructor(){this.Qr=new Ct(Dt.$r),this.Ur=new Ct(Dt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,t){const s=new Dt(e,t);this.Qr=this.Qr.add(s),this.Ur=this.Ur.add(s)}Wr(e,t){e.forEach((s=>this.addReference(s,t)))}removeReference(e,t){this.Gr(new Dt(e,t))}zr(e,t){e.forEach((s=>this.removeReference(s,t)))}jr(e){const t=new Ee(new Ze([])),s=new Dt(t,e),o=new Dt(t,e+1),l=[];return this.Ur.forEachInRange([s,o],(c=>{this.Gr(c),l.push(c.key)})),l}Jr(){this.Qr.forEach((e=>this.Gr(e)))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const t=new Ee(new Ze([])),s=new Dt(t,e),o=new Dt(t,e+1);let l=ze();return this.Ur.forEachInRange([s,o],(c=>{l=l.add(c.key)})),l}containsKey(e){const t=new Dt(e,0),s=this.Qr.firstAfterOrEqual(t);return s!==null&&e.isEqual(s.key)}}class Dt{constructor(e,t){this.key=e,this.Yr=t}static $r(e,t){return Ee.comparator(e.key,t.key)||Ue(e.Yr,t.Yr)}static Kr(e,t){return Ue(e.Yr,t.Yr)||Ee.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rA{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.tr=1,this.Zr=new Ct(Dt.$r)}checkEmpty(e){return J.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,s,o){const l=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const c=new vC(l,t,s,o);this.mutationQueue.push(c);for(const h of o)this.Zr=this.Zr.add(new Dt(h.key,l)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return J.resolve(c)}lookupMutationBatch(e,t){return J.resolve(this.Xr(t))}getNextMutationBatchAfterBatchId(e,t){const s=t+1,o=this.ei(s),l=o<0?0:o;return J.resolve(this.mutationQueue.length>l?this.mutationQueue[l]:null)}getHighestUnacknowledgedBatchId(){return J.resolve(this.mutationQueue.length===0?Sp:this.tr-1)}getAllMutationBatches(e){return J.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const s=new Dt(t,0),o=new Dt(t,Number.POSITIVE_INFINITY),l=[];return this.Zr.forEachInRange([s,o],(c=>{const h=this.Xr(c.Yr);l.push(h)})),J.resolve(l)}getAllMutationBatchesAffectingDocumentKeys(e,t){let s=new Ct(Ue);return t.forEach((o=>{const l=new Dt(o,0),c=new Dt(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([l,c],(h=>{s=s.add(h.Yr)}))})),J.resolve(this.ti(s))}getAllMutationBatchesAffectingQuery(e,t){const s=t.path,o=s.length+1;let l=s;Ee.isDocumentKey(l)||(l=l.child(""));const c=new Dt(new Ee(l),0);let h=new Ct(Ue);return this.Zr.forEachWhile((p=>{const y=p.key.path;return!!s.isPrefixOf(y)&&(y.length===o&&(h=h.add(p.Yr)),!0)}),c),J.resolve(this.ti(h))}ti(e){const t=[];return e.forEach((s=>{const o=this.Xr(s);o!==null&&t.push(o)})),t}removeMutationBatch(e,t){Ke(this.ni(t.batchId,"removed")===0,55003),this.mutationQueue.shift();let s=this.Zr;return J.forEach(t.mutations,(o=>{const l=new Dt(o.key,t.batchId);return s=s.delete(l),this.referenceDelegate.markPotentiallyOrphaned(e,o.key)})).next((()=>{this.Zr=s}))}ir(e){}containsKey(e,t){const s=new Dt(t,0),o=this.Zr.firstAfterOrEqual(s);return J.resolve(t.isEqual(o&&o.key))}performConsistencyCheck(e){return this.mutationQueue.length,J.resolve()}ni(e,t){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const t=this.ei(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sA{constructor(e){this.ri=e,this.docs=(function(){return new ut(Ee.comparator)})(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const s=t.key,o=this.docs.get(s),l=o?o.size:0,c=this.ri(t);return this.docs=this.docs.insert(s,{document:t.mutableCopy(),size:c}),this.size+=c-l,this.indexManager.addToCollectionParentIndex(e,s.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const s=this.docs.get(t);return J.resolve(s?s.document.mutableCopy():Kt.newInvalidDocument(t))}getEntries(e,t){let s=Zr();return t.forEach((o=>{const l=this.docs.get(o);s=s.insert(o,l?l.document.mutableCopy():Kt.newInvalidDocument(o))})),J.resolve(s)}getDocumentsMatchingQuery(e,t,s,o){let l=Zr();const c=t.path,h=new Ee(c.child("__id-9223372036854775808__")),p=this.docs.getIteratorFrom(h);for(;p.hasNext();){const{key:y,value:{document:w}}=p.getNext();if(!c.isPrefixOf(y.path))break;y.path.length>c.length+1||Dk(Pk(w),s)<=0||(o.has(w.key)||pd(t,w))&&(l=l.insert(w.key,w.mutableCopy()))}return J.resolve(l)}getAllFromCollectionGroup(e,t,s,o){Ce(9500)}ii(e,t){return J.forEach(this.docs,(s=>t(s)))}newChangeBuffer(e){return new iA(this)}getSize(e){return J.resolve(this.size)}}class iA extends XC{constructor(e){super(),this.Nr=e}applyChanges(e){const t=[];return this.changes.forEach(((s,o)=>{o.isValidDocument()?t.push(this.Nr.addEntry(e,o)):this.Nr.removeEntry(s)})),J.waitFor(t)}getFromCache(e,t){return this.Nr.getEntry(e,t)}getAllFromCache(e,t){return this.Nr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA{constructor(e){this.persistence=e,this.si=new Hi((t=>Cp(t)),Ap),this.lastRemoteSnapshotVersion=Re.min(),this.highestTargetId=0,this.oi=0,this._i=new Vp,this.targetCount=0,this.ai=Qo.ur()}forEachTarget(e,t){return this.si.forEach(((s,o)=>t(o))),J.resolve()}getLastRemoteSnapshotVersion(e){return J.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return J.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),J.resolve(this.highestTargetId)}setTargetsMetadata(e,t,s){return s&&(this.lastRemoteSnapshotVersion=s),t>this.oi&&(this.oi=t),J.resolve()}Pr(e){this.si.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.ai=new Qo(t),this.highestTargetId=t),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,t){return this.Pr(t),this.targetCount+=1,J.resolve()}updateTargetData(e,t){return this.Pr(t),J.resolve()}removeTargetData(e,t){return this.si.delete(t.target),this._i.jr(t.targetId),this.targetCount-=1,J.resolve()}removeTargets(e,t,s){let o=0;const l=[];return this.si.forEach(((c,h)=>{h.sequenceNumber<=t&&s.get(h.targetId)===null&&(this.si.delete(c),l.push(this.removeMatchingKeysForTargetId(e,h.targetId)),o++)})),J.waitFor(l).next((()=>o))}getTargetCount(e){return J.resolve(this.targetCount)}getTargetData(e,t){const s=this.si.get(t)||null;return J.resolve(s)}addMatchingKeys(e,t,s){return this._i.Wr(t,s),J.resolve()}removeMatchingKeys(e,t,s){this._i.zr(t,s);const o=this.persistence.referenceDelegate,l=[];return o&&t.forEach((c=>{l.push(o.markPotentiallyOrphaned(e,c))})),J.waitFor(l)}removeMatchingKeysForTargetId(e,t){return this._i.jr(t),J.resolve()}getMatchingKeysForTargetId(e,t){const s=this._i.Hr(t);return J.resolve(s)}containsKey(e,t){return J.resolve(this._i.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(e,t){this.ui={},this.overlays={},this.ci=new ud(0),this.li=!1,this.li=!0,this.hi=new nA,this.referenceDelegate=e(this),this.Pi=new oA(this),this.indexManager=new HC,this.remoteDocumentCache=(function(o){return new sA(o)})((s=>this.referenceDelegate.Ti(s))),this.serializer=new BC(t),this.Ii=new eA(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new tA,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let s=this.ui[e.toKey()];return s||(s=new rA(t,this.referenceDelegate),this.ui[e.toKey()]=s),s}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,t,s){ce("MemoryPersistence","Starting transaction:",e);const o=new aA(this.ci.next());return this.referenceDelegate.Ei(),s(o).next((l=>this.referenceDelegate.di(o).next((()=>l)))).toPromise().then((l=>(o.raiseOnCommittedEvent(),l)))}Ai(e,t){return J.or(Object.values(this.ui).map((s=>()=>s.containsKey(e,t))))}}class aA extends Vk{constructor(e){super(),this.currentSequenceNumber=e}}class Lp{constructor(e){this.persistence=e,this.Ri=new Vp,this.Vi=null}static mi(e){return new Lp(e)}get fi(){if(this.Vi)return this.Vi;throw Ce(60996)}addReference(e,t,s){return this.Ri.addReference(s,t),this.fi.delete(s.toString()),J.resolve()}removeReference(e,t,s){return this.Ri.removeReference(s,t),this.fi.add(s.toString()),J.resolve()}markPotentiallyOrphaned(e,t){return this.fi.add(t.toString()),J.resolve()}removeTarget(e,t){this.Ri.jr(t.targetId).forEach((o=>this.fi.add(o.toString())));const s=this.persistence.getTargetCache();return s.getMatchingKeysForTargetId(e,t.targetId).next((o=>{o.forEach((l=>this.fi.add(l.toString())))})).next((()=>s.removeTargetData(e,t)))}Ei(){this.Vi=new Set}di(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return J.forEach(this.fi,(s=>{const o=Ee.fromPath(s);return this.gi(e,o).next((l=>{l||t.removeEntry(o,Re.min())}))})).next((()=>(this.Vi=null,t.apply(e))))}updateLimboDocument(e,t){return this.gi(e,t).next((s=>{s?this.fi.delete(t.toString()):this.fi.add(t.toString())}))}Ti(e){return 0}gi(e,t){return J.or([()=>J.resolve(this.Ri.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Ai(e,t)])}}class Kc{constructor(e,t){this.persistence=e,this.pi=new Hi((s=>Ok(s.path)),((s,o)=>s.isEqual(o))),this.garbageCollector=YC(this,t)}static mi(e,t){return new Kc(e,t)}Ei(){}di(e){return J.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}gr(e){const t=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next((s=>t.next((o=>s+o))))}wr(e){let t=0;return this.pr(e,(s=>{t++})).next((()=>t))}pr(e,t){return J.forEach(this.pi,((s,o)=>this.br(e,s,o).next((l=>l?J.resolve():t(o)))))}removeTargets(e,t,s){return this.persistence.getTargetCache().removeTargets(e,t,s)}removeOrphanedDocuments(e,t){let s=0;const o=this.persistence.getRemoteDocumentCache(),l=o.newChangeBuffer();return o.ii(e,(c=>this.br(e,c,t).next((h=>{h||(s++,l.removeEntry(c,Re.min()))})))).next((()=>l.apply(e))).next((()=>s))}markPotentiallyOrphaned(e,t){return this.pi.set(t,e.currentSequenceNumber),J.resolve()}removeTarget(e,t){const s=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,s)}addReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}removeReference(e,t,s){return this.pi.set(s,e.currentSequenceNumber),J.resolve()}updateLimboDocument(e,t){return this.pi.set(t,e.currentSequenceNumber),J.resolve()}Ti(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=kc(e.data.value)),t}br(e,t,s){return J.or([()=>this.persistence.Ai(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const o=this.pi.get(t);return J.resolve(o!==void 0&&o>s)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mp{constructor(e,t,s,o){this.targetId=e,this.fromCache=t,this.Es=s,this.ds=o}static As(e,t){let s=ze(),o=ze();for(const l of t.docChanges)switch(l.type){case 0:s=s.add(l.doc.key);break;case 1:o=o.add(l.doc.key)}return new Mp(e,t.fromCache,s,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lA{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return UT()?8:Lk(Qt())>0?6:4})()}initialize(e,t){this.ps=e,this.indexManager=t,this.Rs=!0}getDocumentsMatchingQuery(e,t,s,o){const l={result:null};return this.ys(e,t).next((c=>{l.result=c})).next((()=>{if(!l.result)return this.ws(e,t,o,s).next((c=>{l.result=c}))})).next((()=>{if(l.result)return;const c=new lA;return this.Ss(e,t,c).next((h=>{if(l.result=h,this.Vs)return this.bs(e,t,c,h.size)}))})).next((()=>l.result))}bs(e,t,s,o){return s.documentReadCount<this.fs?(Vo()<=Fe.DEBUG&&ce("QueryEngine","SDK will not create cache indexes for query:",Lo(t),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),J.resolve()):(Vo()<=Fe.DEBUG&&ce("QueryEngine","Query:",Lo(t),"scans",s.documentReadCount,"local documents and returns",o,"documents as results."),s.documentReadCount>this.gs*o?(Vo()<=Fe.DEBUG&&ce("QueryEngine","The SDK decides to create cache indexes for query:",Lo(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,_r(t))):J.resolve())}ys(e,t){if(Pv(t))return J.resolve(null);let s=_r(t);return this.indexManager.getIndexType(e,s).next((o=>o===0?null:(t.limit!==null&&o===1&&(t=Wf(t,null,"F"),s=_r(t)),this.indexManager.getDocumentsMatchingTarget(e,s).next((l=>{const c=ze(...l);return this.ps.getDocuments(e,c).next((h=>this.indexManager.getMinOffset(e,s).next((p=>{const y=this.Ds(t,h);return this.Cs(t,y,c,p.readTime)?this.ys(e,Wf(t,null,"F")):this.vs(e,y,t,p)}))))})))))}ws(e,t,s,o){return Pv(t)||o.isEqual(Re.min())?J.resolve(null):this.ps.getDocuments(e,s).next((l=>{const c=this.Ds(t,l);return this.Cs(t,c,s,o)?J.resolve(null):(Vo()<=Fe.DEBUG&&ce("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Lo(t)),this.vs(e,c,t,Nk(o,El)).next((h=>h)))}))}Ds(e,t){let s=new Ct(uw(e));return t.forEach(((o,l)=>{pd(e,l)&&(s=s.add(l))})),s}Cs(e,t,s,o){if(e.limit===null)return!1;if(s.size!==t.size)return!0;const l=e.limitType==="F"?t.last():t.first();return!!l&&(l.hasPendingWrites||l.version.compareTo(o)>0)}Ss(e,t,s){return Vo()<=Fe.DEBUG&&ce("QueryEngine","Using full collection scan to execute query:",Lo(t)),this.ps.getDocumentsMatchingQuery(e,t,qs.min(),s)}vs(e,t,s,o){return this.ps.getDocumentsMatchingQuery(e,s,o).next((l=>(t.forEach((c=>{l=l.insert(c.key,c)})),l)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Op="LocalStore",cA=3e8;class dA{constructor(e,t,s,o){this.persistence=e,this.Fs=t,this.serializer=o,this.Ms=new ut(Ue),this.xs=new Hi((l=>Cp(l)),Ap),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(s)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new ZC(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(t=>e.collect(t,this.Ms)))}}function hA(n,e,t,s){return new dA(n,e,t,s)}async function Pw(n,e){const t=Pe(n);return await t.persistence.runTransaction("Handle user change","readonly",(s=>{let o;return t.mutationQueue.getAllMutationBatches(s).next((l=>(o=l,t.Bs(e),t.mutationQueue.getAllMutationBatches(s)))).next((l=>{const c=[],h=[];let p=ze();for(const y of o){c.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}for(const y of l){h.push(y.batchId);for(const w of y.mutations)p=p.add(w.key)}return t.localDocuments.getDocuments(s,p).next((y=>({Ls:y,removedBatchIds:c,addedBatchIds:h})))}))}))}function fA(n,e){const t=Pe(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",(s=>{const o=e.batch.keys(),l=t.Ns.newChangeBuffer({trackRemovals:!0});return(function(h,p,y,w){const E=y.batch,S=E.keys();let N=J.resolve();return S.forEach((U=>{N=N.next((()=>w.getEntry(p,U))).next((z=>{const k=y.docVersions.get(U);Ke(k!==null,48541),z.version.compareTo(k)<0&&(E.applyToRemoteDocument(z,y),z.isValidDocument()&&(z.setReadTime(y.commitVersion),w.addEntry(z)))}))})),N.next((()=>h.mutationQueue.removeMutationBatch(p,E)))})(t,s,e,l).next((()=>l.apply(s))).next((()=>t.mutationQueue.performConsistencyCheck(s))).next((()=>t.documentOverlayCache.removeOverlaysForBatchId(s,o,e.batch.batchId))).next((()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(s,(function(h){let p=ze();for(let y=0;y<h.mutationResults.length;++y)h.mutationResults[y].transformResults.length>0&&(p=p.add(h.batch.mutations[y].key));return p})(e)))).next((()=>t.localDocuments.getDocuments(s,o)))}))}function Dw(n){const e=Pe(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",(t=>e.Pi.getLastRemoteSnapshotVersion(t)))}function pA(n,e){const t=Pe(n),s=e.snapshotVersion;let o=t.Ms;return t.persistence.runTransaction("Apply remote event","readwrite-primary",(l=>{const c=t.Ns.newChangeBuffer({trackRemovals:!0});o=t.Ms;const h=[];e.targetChanges.forEach(((w,E)=>{const S=o.get(E);if(!S)return;h.push(t.Pi.removeMatchingKeys(l,w.removedDocuments,E).next((()=>t.Pi.addMatchingKeys(l,w.addedDocuments,E))));let N=S.withSequenceNumber(l.currentSequenceNumber);e.targetMismatches.get(E)!==null?N=N.withResumeToken(Ut.EMPTY_BYTE_STRING,Re.min()).withLastLimboFreeSnapshotVersion(Re.min()):w.resumeToken.approximateByteSize()>0&&(N=N.withResumeToken(w.resumeToken,s)),o=o.insert(E,N),(function(z,k,H){return z.resumeToken.approximateByteSize()===0||k.snapshotVersion.toMicroseconds()-z.snapshotVersion.toMicroseconds()>=cA?!0:H.addedDocuments.size+H.modifiedDocuments.size+H.removedDocuments.size>0})(S,N,w)&&h.push(t.Pi.updateTargetData(l,N))}));let p=Zr(),y=ze();if(e.documentUpdates.forEach((w=>{e.resolvedLimboDocuments.has(w)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(l,w))})),h.push(mA(l,c,e.documentUpdates).next((w=>{p=w.ks,y=w.qs}))),!s.isEqual(Re.min())){const w=t.Pi.getLastRemoteSnapshotVersion(l).next((E=>t.Pi.setTargetsMetadata(l,l.currentSequenceNumber,s)));h.push(w)}return J.waitFor(h).next((()=>c.apply(l))).next((()=>t.localDocuments.getLocalViewOfDocuments(l,p,y))).next((()=>p))})).then((l=>(t.Ms=o,l)))}function mA(n,e,t){let s=ze(),o=ze();return t.forEach((l=>s=s.add(l))),e.getEntries(n,s).next((l=>{let c=Zr();return t.forEach(((h,p)=>{const y=l.get(h);p.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(h)),p.isNoDocument()&&p.version.isEqual(Re.min())?(e.removeEntry(h,p.readTime),c=c.insert(h,p)):!y.isValidDocument()||p.version.compareTo(y.version)>0||p.version.compareTo(y.version)===0&&y.hasPendingWrites?(e.addEntry(p),c=c.insert(h,p)):ce(Op,"Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",p.version)})),{ks:c,qs:o}}))}function gA(n,e){const t=Pe(n);return t.persistence.runTransaction("Get next mutation batch","readonly",(s=>(e===void 0&&(e=Sp),t.mutationQueue.getNextMutationBatchAfterBatchId(s,e))))}function yA(n,e){const t=Pe(n);return t.persistence.runTransaction("Allocate target","readwrite",(s=>{let o;return t.Pi.getTargetData(s,e).next((l=>l?(o=l,J.resolve(o)):t.Pi.allocateTargetId(s).next((c=>(o=new Us(e,c,"TargetPurposeListen",s.currentSequenceNumber),t.Pi.addTargetData(s,o).next((()=>o)))))))})).then((s=>{const o=t.Ms.get(s.targetId);return(o===null||s.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(t.Ms=t.Ms.insert(s.targetId,s),t.xs.set(e,s.targetId)),s}))}async function Yf(n,e,t){const s=Pe(n),o=s.Ms.get(e),l=t?"readwrite":"readwrite-primary";try{t||await s.persistence.runTransaction("Release target",l,(c=>s.persistence.referenceDelegate.removeTarget(c,o)))}catch(c){if(!ia(c))throw c;ce(Op,`Failed to update sequence numbers for target ${e}: ${c}`)}s.Ms=s.Ms.remove(e),s.xs.delete(o.target)}function Wv(n,e,t){const s=Pe(n);let o=Re.min(),l=ze();return s.persistence.runTransaction("Execute query","readwrite",(c=>(function(p,y,w){const E=Pe(p),S=E.xs.get(w);return S!==void 0?J.resolve(E.Ms.get(S)):E.Pi.getTargetData(y,w)})(s,c,_r(e)).next((h=>{if(h)return o=h.lastLimboFreeSnapshotVersion,s.Pi.getMatchingKeysForTargetId(c,h.targetId).next((p=>{l=p}))})).next((()=>s.Fs.getDocumentsMatchingQuery(c,e,t?o:Re.min(),t?l:ze()))).next((h=>(vA(s,rC(e),h),{documents:h,Qs:l})))))}function vA(n,e,t){let s=n.Os.get(e)||Re.min();t.forEach(((o,l)=>{l.readTime.compareTo(s)>0&&(s=l.readTime)})),n.Os.set(e,s)}class qv{constructor(){this.activeTargetIds=uC()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _A{constructor(){this.Mo=new qv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,s){}addLocalQueryTarget(e,t=!0){return t&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,t,s){this.xo[e]=t}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new qv,Promise.resolve()}handleUserChange(e,t,s){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wA{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gv="ConnectivityMonitor";class Kv{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){ce(Gv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){ce(Gv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yc=null;function Xf(){return yc===null?yc=(function(){return 268435456+Math.round(2147483648*Math.random())})():yc++,"0x"+yc.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xf="RestConnection",xA={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class EA{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",s=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=t+"://"+e.host,this.Ko=`projects/${s}/databases/${o}`,this.Wo=this.databaseId.database===Bc?`project_id=${s}`:`project_id=${s}&database_id=${o}`}Go(e,t,s,o,l){const c=Xf(),h=this.zo(e,t.toUriEncodedString());ce(xf,`Sending RPC '${e}' ${c}:`,h,s);const p={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(p,o,l);const{host:y}=new URL(h),w=ea(y);return this.Jo(e,h,p,s,w).then((E=>(ce(xf,`Received RPC '${e}' ${c}: `,E),E)),(E=>{throw Wo(xf,`RPC '${e}' ${c} failed with error: `,E,"url: ",h,"request:",s),E}))}Ho(e,t,s,o,l,c){return this.Go(e,t,s,o,l)}jo(e,t,s){e["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+ra})(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach(((o,l)=>e[l]=o)),s&&s.headers.forEach(((o,l)=>e[l]=o))}zo(e,t){const s=xA[e];return`${this.Uo}/v1/${t}:${s}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TA{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class IA extends EA{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,t,s,o,l){const c=Xf();return new Promise(((h,p)=>{const y=new L_;y.setWithCredentials(!0),y.listenOnce(M_.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case bc.NO_ERROR:const E=y.getResponseJson();ce(qt,`XHR for RPC '${e}' ${c} received:`,JSON.stringify(E)),h(E);break;case bc.TIMEOUT:ce(qt,`RPC '${e}' ${c} timed out`),p(new oe(X.DEADLINE_EXCEEDED,"Request time out"));break;case bc.HTTP_ERROR:const S=y.getStatus();if(ce(qt,`RPC '${e}' ${c} failed with status:`,S,"response text:",y.getResponseText()),S>0){let N=y.getResponseJson();Array.isArray(N)&&(N=N[0]);const U=N?.error;if(U&&U.status&&U.message){const z=(function(H){const K=H.toLowerCase().replace(/_/g,"-");return Object.values(X).indexOf(K)>=0?K:X.UNKNOWN})(U.status);p(new oe(z,U.message))}else p(new oe(X.UNKNOWN,"Server responded with status "+y.getStatus()))}else p(new oe(X.UNAVAILABLE,"Connection failed."));break;default:Ce(9055,{l_:e,streamId:c,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{ce(qt,`RPC '${e}' ${c} completed.`)}}));const w=JSON.stringify(o);ce(qt,`RPC '${e}' ${c} sending request:`,o),y.send(t,"POST",w,s,15)}))}T_(e,t,s){const o=Xf(),l=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=U_(),h=F_(),p={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(p.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(p.useFetchStreams=!0),this.jo(p.initMessageHeaders,t,s),p.encodeInitMessageHeaders=!0;const w=l.join("");ce(qt,`Creating RPC '${e}' stream ${o}: ${w}`,p);const E=c.createWebChannel(w,p);this.I_(E);let S=!1,N=!1;const U=new TA({Yo:k=>{N?ce(qt,`Not sending because RPC '${e}' stream ${o} is closed:`,k):(S||(ce(qt,`Opening RPC '${e}' stream ${o} transport.`),E.open(),S=!0),ce(qt,`RPC '${e}' stream ${o} sending:`,k),E.send(k))},Zo:()=>E.close()}),z=(k,H,K)=>{k.listen(H,(Y=>{try{K(Y)}catch(ae){setTimeout((()=>{throw ae}),0)}}))};return z(E,ll.EventType.OPEN,(()=>{N||(ce(qt,`RPC '${e}' stream ${o} transport opened.`),U.o_())})),z(E,ll.EventType.CLOSE,(()=>{N||(N=!0,ce(qt,`RPC '${e}' stream ${o} transport closed`),U.a_(),this.E_(E))})),z(E,ll.EventType.ERROR,(k=>{N||(N=!0,Wo(qt,`RPC '${e}' stream ${o} transport errored. Name:`,k.name,"Message:",k.message),U.a_(new oe(X.UNAVAILABLE,"The operation could not be completed")))})),z(E,ll.EventType.MESSAGE,(k=>{if(!N){const H=k.data[0];Ke(!!H,16349);const K=H,Y=K?.error||K[0]?.error;if(Y){ce(qt,`RPC '${e}' stream ${o} received error:`,Y);const ae=Y.status;let fe=(function(T){const b=Et[T];if(b!==void 0)return ww(b)})(ae),he=Y.message;fe===void 0&&(fe=X.INTERNAL,he="Unknown error status: "+ae+" with message "+Y.message),N=!0,U.a_(new oe(fe,he)),E.close()}else ce(qt,`RPC '${e}' stream ${o} received:`,H),U.u_(H)}})),z(h,O_.STAT_EVENT,(k=>{k.stat===Of.PROXY?ce(qt,`RPC '${e}' stream ${o} detected buffering proxy`):k.stat===Of.NOPROXY&&ce(qt,`RPC '${e}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{U.__()}),0),U}terminate(){this.c_.forEach((e=>e.close())),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter((t=>t===e))}}function Ef(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vd(n){return new CC(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,t,s=1e3,o=1.5,l=6e4){this.Mi=e,this.timerId=t,this.d_=s,this.A_=o,this.R_=l,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const t=Math.floor(this.V_+this.y_()),s=Math.max(0,Date.now()-this.f_),o=Math.max(0,t-s);o>0&&ce("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${t} ms, last attempt: ${s} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),e()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qv="PersistentStream";class Vw{constructor(e,t,s,o,l,c,h,p){this.Mi=e,this.S_=s,this.b_=o,this.connection=l,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=h,this.listener=p,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new jw(e,t)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,t){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():t&&t.code===X.RESOURCE_EXHAUSTED?(Jr(t.toString()),Jr("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):t&&t.code===X.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(t)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),t=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([s,o])=>{this.D_===t&&this.G_(s,o)}),(s=>{e((()=>{const o=new oe(X.UNKNOWN,"Fetching auth token failed: "+s.message);return this.z_(o)}))}))}G_(e,t){const s=this.W_(this.D_);this.stream=this.j_(e,t),this.stream.Xo((()=>{s((()=>this.listener.Xo()))})),this.stream.t_((()=>{s((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{s((()=>this.z_(o)))})),this.stream.onMessage((o=>{s((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(e){return ce(Qv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return t=>{this.Mi.enqueueAndForget((()=>this.D_===e?t():(ce(Qv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class SA extends Vw{constructor(e,t,s,o,l,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}j_(e,t){return this.connection.T_("Listen",e,t)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const t=NC(this.serializer,e),s=(function(l){if(!("targetChange"in l))return Re.min();const c=l.targetChange;return c.targetIds&&c.targetIds.length?Re.min():c.readTime?wr(c.readTime):Re.min()})(e);return this.listener.H_(t,s)}Y_(e){const t={};t.database=Qf(this.serializer),t.addTarget=(function(l,c){let h;const p=c.target;if(h=$f(p)?{documents:jC(l,p)}:{query:VC(l,p).ft},h.targetId=c.targetId,c.resumeToken.approximateByteSize()>0){h.resumeToken=Tw(l,c.resumeToken);const y=qf(l,c.expectedCount);y!==null&&(h.expectedCount=y)}else if(c.snapshotVersion.compareTo(Re.min())>0){h.readTime=Gc(l,c.snapshotVersion.toTimestamp());const y=qf(l,c.expectedCount);y!==null&&(h.expectedCount=y)}return h})(this.serializer,e);const s=MC(this.serializer,e);s&&(t.labels=s),this.q_(t)}Z_(e){const t={};t.database=Qf(this.serializer),t.removeTarget=e,this.q_(t)}}class bA extends Vw{constructor(e,t,s,o,l,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,s,o,c),this.serializer=l}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,t){return this.connection.T_("Write",e,t)}J_(e){return Ke(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ke(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ke(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const t=DC(e.writeResults,e.commitTime),s=wr(e.commitTime);return this.listener.na(s,t)}ra(){const e={};e.database=Qf(this.serializer),this.q_(e)}ea(e){const t={streamToken:this.lastStreamToken,writes:e.map((s=>PC(this.serializer,s)))};this.q_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{}class CA extends kA{constructor(e,t,s,o){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=s,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,t,s,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([l,c])=>this.connection.Go(e,Gf(t,s),o,l,c))).catch((l=>{throw l.name==="FirebaseError"?(l.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),l):new oe(X.UNKNOWN,l.toString())}))}Ho(e,t,s,o,l){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([c,h])=>this.connection.Ho(e,Gf(t,s),o,c,h,l))).catch((c=>{throw c.name==="FirebaseError"?(c.code===X.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),c):new oe(X.UNKNOWN,c.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class AA{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Jr(t),this.aa=!1):ce("OnlineStateTracker",t)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zi="RemoteStore";class RA{constructor(e,t,s,o,l){this.localStore=e,this.datastore=t,this.asyncQueue=s,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=l,this.Aa.Oo((c=>{s.enqueueAndForget((async()=>{Wi(this)&&(ce(zi,"Restarting streams for network reachability change."),await(async function(p){const y=Pe(p);y.Ea.add(4),await $l(y),y.Ra.set("Unknown"),y.Ea.delete(4),await _d(y)})(this))}))})),this.Ra=new AA(s,o)}}async function _d(n){if(Wi(n))for(const e of n.da)await e(!0)}async function $l(n){for(const e of n.da)await e(!1)}function Lw(n,e){const t=Pe(n);t.Ia.has(e.targetId)||(t.Ia.set(e.targetId,e),Bp(t)?zp(t):aa(t).O_()&&Up(t,e))}function Fp(n,e){const t=Pe(n),s=aa(t);t.Ia.delete(e),s.O_()&&Mw(t,e),t.Ia.size===0&&(s.O_()?s.L_():Wi(t)&&t.Ra.set("Unknown"))}function Up(n,e){if(n.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Re.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}aa(n).Y_(e)}function Mw(n,e){n.Va.Ue(e),aa(n).Z_(e)}function zp(n){n.Va=new IC({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),At:e=>n.Ia.get(e)||null,ht:()=>n.datastore.serializer.databaseId}),aa(n).start(),n.Ra.ua()}function Bp(n){return Wi(n)&&!aa(n).x_()&&n.Ia.size>0}function Wi(n){return Pe(n).Ea.size===0}function Ow(n){n.Va=void 0}async function NA(n){n.Ra.set("Online")}async function PA(n){n.Ia.forEach(((e,t)=>{Up(n,e)}))}async function DA(n,e){Ow(n),Bp(n)?(n.Ra.ha(e),zp(n)):n.Ra.set("Unknown")}async function jA(n,e,t){if(n.Ra.set("Online"),e instanceof Ew&&e.state===2&&e.cause)try{await(async function(o,l){const c=l.cause;for(const h of l.targetIds)o.Ia.has(h)&&(await o.remoteSyncer.rejectListen(h,c),o.Ia.delete(h),o.Va.removeTarget(h))})(n,e)}catch(s){ce(zi,"Failed to remove targets %s: %s ",e.targetIds.join(","),s),await Qc(n,s)}else if(e instanceof Rc?n.Va.Ze(e):e instanceof xw?n.Va.st(e):n.Va.tt(e),!t.isEqual(Re.min()))try{const s=await Dw(n.localStore);t.compareTo(s)>=0&&await(function(l,c){const h=l.Va.Tt(c);return h.targetChanges.forEach(((p,y)=>{if(p.resumeToken.approximateByteSize()>0){const w=l.Ia.get(y);w&&l.Ia.set(y,w.withResumeToken(p.resumeToken,c))}})),h.targetMismatches.forEach(((p,y)=>{const w=l.Ia.get(p);if(!w)return;l.Ia.set(p,w.withResumeToken(Ut.EMPTY_BYTE_STRING,w.snapshotVersion)),Mw(l,p);const E=new Us(w.target,p,y,w.sequenceNumber);Up(l,E)})),l.remoteSyncer.applyRemoteEvent(h)})(n,t)}catch(s){ce(zi,"Failed to raise snapshot:",s),await Qc(n,s)}}async function Qc(n,e,t){if(!ia(e))throw e;n.Ea.add(1),await $l(n),n.Ra.set("Offline"),t||(t=()=>Dw(n.localStore)),n.asyncQueue.enqueueRetryable((async()=>{ce(zi,"Retrying IndexedDB access"),await t(),n.Ea.delete(1),await _d(n)}))}function Fw(n,e){return e().catch((t=>Qc(n,t,e)))}async function wd(n){const e=Pe(n),t=Ys(e);let s=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Sp;for(;VA(e);)try{const o=await gA(e.localStore,s);if(o===null){e.Ta.length===0&&t.L_();break}s=o.batchId,LA(e,o)}catch(o){await Qc(e,o)}Uw(e)&&zw(e)}function VA(n){return Wi(n)&&n.Ta.length<10}function LA(n,e){n.Ta.push(e);const t=Ys(n);t.O_()&&t.X_&&t.ea(e.mutations)}function Uw(n){return Wi(n)&&!Ys(n).x_()&&n.Ta.length>0}function zw(n){Ys(n).start()}async function MA(n){Ys(n).ra()}async function OA(n){const e=Ys(n);for(const t of n.Ta)e.ea(t.mutations)}async function FA(n,e,t){const s=n.Ta.shift(),o=Pp.from(s,e,t);await Fw(n,(()=>n.remoteSyncer.applySuccessfulWrite(o))),await wd(n)}async function UA(n,e){e&&Ys(n).X_&&await(async function(s,o){if((function(c){return xC(c)&&c!==X.ABORTED})(o.code)){const l=s.Ta.shift();Ys(s).B_(),await Fw(s,(()=>s.remoteSyncer.rejectFailedWrite(l.batchId,o))),await wd(s)}})(n,e),Uw(n)&&zw(n)}async function Yv(n,e){const t=Pe(n);t.asyncQueue.verifyOperationInProgress(),ce(zi,"RemoteStore received new credentials");const s=Wi(t);t.Ea.add(3),await $l(t),s&&t.Ra.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.Ea.delete(3),await _d(t)}async function zA(n,e){const t=Pe(n);e?(t.Ea.delete(2),await _d(t)):e||(t.Ea.add(2),await $l(t),t.Ra.set("Unknown"))}function aa(n){return n.ma||(n.ma=(function(t,s,o){const l=Pe(t);return l.sa(),new SA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:NA.bind(null,n),t_:PA.bind(null,n),r_:DA.bind(null,n),H_:jA.bind(null,n)}),n.da.push((async e=>{e?(n.ma.B_(),Bp(n)?zp(n):n.Ra.set("Unknown")):(await n.ma.stop(),Ow(n))}))),n.ma}function Ys(n){return n.fa||(n.fa=(function(t,s,o){const l=Pe(t);return l.sa(),new bA(s,l.connection,l.authCredentials,l.appCheckCredentials,l.serializer,o)})(n.datastore,n.asyncQueue,{Xo:()=>Promise.resolve(),t_:MA.bind(null,n),r_:UA.bind(null,n),ta:OA.bind(null,n),na:FA.bind(null,n)}),n.da.push((async e=>{e?(n.fa.B_(),await wd(n)):(await n.fa.stop(),n.Ta.length>0&&(ce(zi,`Stopping write stream with ${n.Ta.length} pending writes`),n.Ta=[]))}))),n.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $p{constructor(e,t,s,o,l){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=s,this.op=o,this.removalCallback=l,this.deferred=new Gr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((c=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(e,t,s,o,l){const c=Date.now()+s,h=new $p(e,t,c,o,l);return h.start(s),h}start(e){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new oe(X.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((e=>this.deferred.resolve(e)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Hp(n,e){if(Jr("AsyncQueue",`${e}: ${n}`),ia(n))return new oe(X.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $o{static emptySet(e){return new $o(e.comparator)}constructor(e){this.comparator=e?(t,s)=>e(t,s)||Ee.comparator(t.key,s.key):(t,s)=>Ee.comparator(t.key,s.key),this.keyedMap=ul(),this.sortedSet=new ut(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal(((t,s)=>(e(t),!1)))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof $o)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),s=e.sortedSet.getIterator();for(;t.hasNext();){const o=t.getNext().key,l=s.getNext().key;if(!o.isEqual(l))return!1}return!0}toString(){const e=[];return this.forEach((t=>{e.push(t.toString())})),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const s=new $o;return s.comparator=this.comparator,s.keyedMap=e,s.sortedSet=t,s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xv{constructor(){this.ga=new ut(Ee.comparator)}track(e){const t=e.doc.key,s=this.ga.get(t);s?e.type!==0&&s.type===3?this.ga=this.ga.insert(t,e):e.type===3&&s.type!==1?this.ga=this.ga.insert(t,{type:s.type,doc:e.doc}):e.type===2&&s.type===2?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):e.type===2&&s.type===0?this.ga=this.ga.insert(t,{type:0,doc:e.doc}):e.type===1&&s.type===0?this.ga=this.ga.remove(t):e.type===1&&s.type===2?this.ga=this.ga.insert(t,{type:1,doc:s.doc}):e.type===0&&s.type===1?this.ga=this.ga.insert(t,{type:2,doc:e.doc}):Ce(63341,{Rt:e,pa:s}):this.ga=this.ga.insert(t,e)}ya(){const e=[];return this.ga.inorderTraversal(((t,s)=>{e.push(s)})),e}}class Yo{constructor(e,t,s,o,l,c,h,p,y){this.query=e,this.docs=t,this.oldDocs=s,this.docChanges=o,this.mutatedKeys=l,this.fromCache=c,this.syncStateChanged=h,this.excludesMetadataChanges=p,this.hasCachedResults=y}static fromInitialDocuments(e,t,s,o,l){const c=[];return t.forEach((h=>{c.push({type:0,doc:h})})),new Yo(e,t,$o.emptySet(t),c,s,o,!0,!1,l)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&fd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,s=e.docChanges;if(t.length!==s.length)return!1;for(let o=0;o<t.length;o++)if(t[o].type!==s[o].type||!t[o].doc.isEqual(s[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BA{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((e=>e.Da()))}}class $A{constructor(){this.queries=Jv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(t,s){const o=Pe(t),l=o.queries;o.queries=Jv(),l.forEach(((c,h)=>{for(const p of h.Sa)p.onError(s)}))})(this,new oe(X.ABORTED,"Firestore shutting down"))}}function Jv(){return new Hi((n=>lw(n)),fd)}async function Wp(n,e){const t=Pe(n);let s=3;const o=e.query;let l=t.queries.get(o);l?!l.ba()&&e.Da()&&(s=2):(l=new BA,s=e.Da()?0:1);try{switch(s){case 0:l.wa=await t.onListen(o,!0);break;case 1:l.wa=await t.onListen(o,!1);break;case 2:await t.onFirstRemoteStoreListen(o)}}catch(c){const h=Hp(c,`Initialization of query '${Lo(e.query)}' failed`);return void e.onError(h)}t.queries.set(o,l),l.Sa.push(e),e.va(t.onlineState),l.wa&&e.Fa(l.wa)&&Gp(t)}async function qp(n,e){const t=Pe(n),s=e.query;let o=3;const l=t.queries.get(s);if(l){const c=l.Sa.indexOf(e);c>=0&&(l.Sa.splice(c,1),l.Sa.length===0?o=e.Da()?0:1:!l.ba()&&e.Da()&&(o=2))}switch(o){case 0:return t.queries.delete(s),t.onUnlisten(s,!0);case 1:return t.queries.delete(s),t.onUnlisten(s,!1);case 2:return t.onLastRemoteStoreUnlisten(s);default:return}}function HA(n,e){const t=Pe(n);let s=!1;for(const o of e){const l=o.query,c=t.queries.get(l);if(c){for(const h of c.Sa)h.Fa(o)&&(s=!0);c.wa=o}}s&&Gp(t)}function WA(n,e,t){const s=Pe(n),o=s.queries.get(e);if(o)for(const l of o.Sa)l.onError(t);s.queries.delete(e)}function Gp(n){n.Ca.forEach((e=>{e.next()}))}var Jf,Zv;(Zv=Jf||(Jf={})).Ma="default",Zv.Cache="cache";class Kp{constructor(e,t,s){this.query=e,this.xa=t,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=s||{}}Fa(e){if(!this.options.includeMetadataChanges){const s=[];for(const o of e.docChanges)o.type!==3&&s.push(o);e=new Yo(e.query,e.docs,e.oldDocs,s,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),t=!0):this.La(e,this.onlineState)&&(this.ka(e),t=!0),this.Na=e,t}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let t=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),t=!0),t}La(e,t){if(!e.fromCache||!this.Da())return!0;const s=t!=="Offline";return(!this.options.qa||!s)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const t=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}ka(e){e=Yo.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Jf.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.key=e}}class $w{constructor(e){this.key=e}}class qA{constructor(e,t){this.query=e,this.Ya=t,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=ze(),this.mutatedKeys=ze(),this.eu=uw(e),this.tu=new $o(this.eu)}get nu(){return this.Ya}ru(e,t){const s=t?t.iu:new Xv,o=t?t.tu:this.tu;let l=t?t.mutatedKeys:this.mutatedKeys,c=o,h=!1;const p=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(e.inorderTraversal(((w,E)=>{const S=o.get(w),N=pd(this.query,E)?E:null,U=!!S&&this.mutatedKeys.has(S.key),z=!!N&&(N.hasLocalMutations||this.mutatedKeys.has(N.key)&&N.hasCommittedMutations);let k=!1;S&&N?S.data.isEqual(N.data)?U!==z&&(s.track({type:3,doc:N}),k=!0):this.su(S,N)||(s.track({type:2,doc:N}),k=!0,(p&&this.eu(N,p)>0||y&&this.eu(N,y)<0)&&(h=!0)):!S&&N?(s.track({type:0,doc:N}),k=!0):S&&!N&&(s.track({type:1,doc:S}),k=!0,(p||y)&&(h=!0)),k&&(N?(c=c.add(N),l=z?l.add(w):l.delete(w)):(c=c.delete(w),l=l.delete(w)))})),this.query.limit!==null)for(;c.size>this.query.limit;){const w=this.query.limitType==="F"?c.last():c.first();c=c.delete(w.key),l=l.delete(w.key),s.track({type:1,doc:w})}return{tu:c,iu:s,Cs:h,mutatedKeys:l}}su(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,s,o){const l=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const c=e.iu.ya();c.sort(((w,E)=>(function(N,U){const z=k=>{switch(k){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ce(20277,{Rt:k})}};return z(N)-z(U)})(w.type,E.type)||this.eu(w.doc,E.doc))),this.ou(s),o=o??!1;const h=t&&!o?this._u():[],p=this.Xa.size===0&&this.current&&!o?1:0,y=p!==this.Za;return this.Za=p,c.length!==0||y?{snapshot:new Yo(this.query,e.tu,l,c,e.mutatedKeys,p===0,y,!1,!!s&&s.resumeToken.approximateByteSize()>0),au:h}:{au:h}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Xv,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach((t=>this.Ya=this.Ya.add(t))),e.modifiedDocuments.forEach((t=>{})),e.removedDocuments.forEach((t=>this.Ya=this.Ya.delete(t))),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=ze(),this.tu.forEach((s=>{this.uu(s.key)&&(this.Xa=this.Xa.add(s.key))}));const t=[];return e.forEach((s=>{this.Xa.has(s)||t.push(new $w(s))})),this.Xa.forEach((s=>{e.has(s)||t.push(new Bw(s))})),t}cu(e){this.Ya=e.Qs,this.Xa=ze();const t=this.ru(e.documents);return this.applyChanges(t,!0)}lu(){return Yo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Qp="SyncEngine";class GA{constructor(e,t,s){this.query=e,this.targetId=t,this.view=s}}class KA{constructor(e){this.key=e,this.hu=!1}}class QA{constructor(e,t,s,o,l,c){this.localStore=e,this.remoteStore=t,this.eventManager=s,this.sharedClientState=o,this.currentUser=l,this.maxConcurrentLimboResolutions=c,this.Pu={},this.Tu=new Hi((h=>lw(h)),fd),this.Iu=new Map,this.Eu=new Set,this.du=new ut(Ee.comparator),this.Au=new Map,this.Ru=new Vp,this.Vu={},this.mu=new Map,this.fu=Qo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function YA(n,e,t=!0){const s=Qw(n);let o;const l=s.Tu.get(e);return l?(s.sharedClientState.addLocalQueryTarget(l.targetId),o=l.view.lu()):o=await Hw(s,e,t,!0),o}async function XA(n,e){const t=Qw(n);await Hw(t,e,!0,!1)}async function Hw(n,e,t,s){const o=await yA(n.localStore,_r(e)),l=o.targetId,c=n.sharedClientState.addLocalQueryTarget(l,t);let h;return s&&(h=await JA(n,e,l,c==="current",o.resumeToken)),n.isPrimaryClient&&t&&Lw(n.remoteStore,o),h}async function JA(n,e,t,s,o){n.pu=(E,S,N)=>(async function(z,k,H,K){let Y=k.view.ru(H);Y.Cs&&(Y=await Wv(z.localStore,k.query,!1).then((({documents:P})=>k.view.ru(P,Y))));const ae=K&&K.targetChanges.get(k.targetId),fe=K&&K.targetMismatches.get(k.targetId)!=null,he=k.view.applyChanges(Y,z.isPrimaryClient,ae,fe);return t0(z,k.targetId,he.au),he.snapshot})(n,E,S,N);const l=await Wv(n.localStore,e,!0),c=new qA(e,l.Qs),h=c.ru(l.documents),p=Bl.createSynthesizedTargetChangeForCurrentChange(t,s&&n.onlineState!=="Offline",o),y=c.applyChanges(h,n.isPrimaryClient,p);t0(n,t,y.au);const w=new GA(e,t,c);return n.Tu.set(e,w),n.Iu.has(t)?n.Iu.get(t).push(e):n.Iu.set(t,[e]),y.snapshot}async function ZA(n,e,t){const s=Pe(n),o=s.Tu.get(e),l=s.Iu.get(o.targetId);if(l.length>1)return s.Iu.set(o.targetId,l.filter((c=>!fd(c,e)))),void s.Tu.delete(e);s.isPrimaryClient?(s.sharedClientState.removeLocalQueryTarget(o.targetId),s.sharedClientState.isActiveQueryTarget(o.targetId)||await Yf(s.localStore,o.targetId,!1).then((()=>{s.sharedClientState.clearQueryState(o.targetId),t&&Fp(s.remoteStore,o.targetId),Zf(s,o.targetId)})).catch(sa)):(Zf(s,o.targetId),await Yf(s.localStore,o.targetId,!0))}async function eR(n,e){const t=Pe(n),s=t.Tu.get(e),o=t.Iu.get(s.targetId);t.isPrimaryClient&&o.length===1&&(t.sharedClientState.removeLocalQueryTarget(s.targetId),Fp(t.remoteStore,s.targetId))}async function tR(n,e,t){const s=lR(n);try{const o=await(function(c,h){const p=Pe(c),y=rt.now(),w=h.reduce(((N,U)=>N.add(U.key)),ze());let E,S;return p.persistence.runTransaction("Locally write mutations","readwrite",(N=>{let U=Zr(),z=ze();return p.Ns.getEntries(N,w).next((k=>{U=k,U.forEach(((H,K)=>{K.isValidDocument()||(z=z.add(H))}))})).next((()=>p.localDocuments.getOverlayedDocuments(N,U))).next((k=>{E=k;const H=[];for(const K of h){const Y=gC(K,E.get(K.key).overlayedDocument);Y!=null&&H.push(new ti(K.key,Y,ew(Y.value.mapValue),Nn.exists(!0)))}return p.mutationQueue.addMutationBatch(N,y,H,h)})).next((k=>{S=k;const H=k.applyToLocalDocumentSet(E,z);return p.documentOverlayCache.saveOverlays(N,k.batchId,H)}))})).then((()=>({batchId:S.batchId,changes:dw(E)})))})(s.localStore,e);s.sharedClientState.addPendingMutation(o.batchId),(function(c,h,p){let y=c.Vu[c.currentUser.toKey()];y||(y=new ut(Ue)),y=y.insert(h,p),c.Vu[c.currentUser.toKey()]=y})(s,o.batchId,t),await Hl(s,o.changes),await wd(s.remoteStore)}catch(o){const l=Hp(o,"Failed to persist write");t.reject(l)}}async function Ww(n,e){const t=Pe(n);try{const s=await pA(t.localStore,e);e.targetChanges.forEach(((o,l)=>{const c=t.Au.get(l);c&&(Ke(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?c.hu=!0:o.modifiedDocuments.size>0?Ke(c.hu,14607):o.removedDocuments.size>0&&(Ke(c.hu,42227),c.hu=!1))})),await Hl(t,s,e)}catch(s){await sa(s)}}function e0(n,e,t){const s=Pe(n);if(s.isPrimaryClient&&t===0||!s.isPrimaryClient&&t===1){const o=[];s.Tu.forEach(((l,c)=>{const h=c.view.va(e);h.snapshot&&o.push(h.snapshot)})),(function(c,h){const p=Pe(c);p.onlineState=h;let y=!1;p.queries.forEach(((w,E)=>{for(const S of E.Sa)S.va(h)&&(y=!0)})),y&&Gp(p)})(s.eventManager,e),o.length&&s.Pu.H_(o),s.onlineState=e,s.isPrimaryClient&&s.sharedClientState.setOnlineState(e)}}async function nR(n,e,t){const s=Pe(n);s.sharedClientState.updateQueryState(e,"rejected",t);const o=s.Au.get(e),l=o&&o.key;if(l){let c=new ut(Ee.comparator);c=c.insert(l,Kt.newNoDocument(l,Re.min()));const h=ze().add(l),p=new yd(Re.min(),new Map,new ut(Ue),c,h);await Ww(s,p),s.du=s.du.remove(l),s.Au.delete(e),Yp(s)}else await Yf(s.localStore,e,!1).then((()=>Zf(s,e,t))).catch(sa)}async function rR(n,e){const t=Pe(n),s=e.batch.batchId;try{const o=await fA(t.localStore,e);Gw(t,s,null),qw(t,s),t.sharedClientState.updateMutationState(s,"acknowledged"),await Hl(t,o)}catch(o){await sa(o)}}async function sR(n,e,t){const s=Pe(n);try{const o=await(function(c,h){const p=Pe(c);return p.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let w;return p.mutationQueue.lookupMutationBatch(y,h).next((E=>(Ke(E!==null,37113),w=E.keys(),p.mutationQueue.removeMutationBatch(y,E)))).next((()=>p.mutationQueue.performConsistencyCheck(y))).next((()=>p.documentOverlayCache.removeOverlaysForBatchId(y,w,h))).next((()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,w))).next((()=>p.localDocuments.getDocuments(y,w)))}))})(s.localStore,e);Gw(s,e,t),qw(s,e),s.sharedClientState.updateMutationState(e,"rejected",t),await Hl(s,o)}catch(o){await sa(o)}}function qw(n,e){(n.mu.get(e)||[]).forEach((t=>{t.resolve()})),n.mu.delete(e)}function Gw(n,e,t){const s=Pe(n);let o=s.Vu[s.currentUser.toKey()];if(o){const l=o.get(e);l&&(t?l.reject(t):l.resolve(),o=o.remove(e)),s.Vu[s.currentUser.toKey()]=o}}function Zf(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const s of n.Iu.get(e))n.Tu.delete(s),t&&n.Pu.yu(s,t);n.Iu.delete(e),n.isPrimaryClient&&n.Ru.jr(e).forEach((s=>{n.Ru.containsKey(s)||Kw(n,s)}))}function Kw(n,e){n.Eu.delete(e.path.canonicalString());const t=n.du.get(e);t!==null&&(Fp(n.remoteStore,t),n.du=n.du.remove(e),n.Au.delete(t),Yp(n))}function t0(n,e,t){for(const s of t)s instanceof Bw?(n.Ru.addReference(s.key,e),iR(n,s)):s instanceof $w?(ce(Qp,"Document no longer in limbo: "+s.key),n.Ru.removeReference(s.key,e),n.Ru.containsKey(s.key)||Kw(n,s.key)):Ce(19791,{wu:s})}function iR(n,e){const t=e.key,s=t.path.canonicalString();n.du.get(t)||n.Eu.has(s)||(ce(Qp,"New document in limbo: "+t),n.Eu.add(s),Yp(n))}function Yp(n){for(;n.Eu.size>0&&n.du.size<n.maxConcurrentLimboResolutions;){const e=n.Eu.values().next().value;n.Eu.delete(e);const t=new Ee(Ze.fromString(e)),s=n.fu.next();n.Au.set(s,new KA(t)),n.du=n.du.insert(t,s),Lw(n.remoteStore,new Us(_r(hd(t.path)),s,"TargetPurposeLimboResolution",ud.ce))}}async function Hl(n,e,t){const s=Pe(n),o=[],l=[],c=[];s.Tu.isEmpty()||(s.Tu.forEach(((h,p)=>{c.push(s.pu(p,e,t).then((y=>{if((y||t)&&s.isPrimaryClient){const w=y?!y.fromCache:t?.targetChanges.get(p.targetId)?.current;s.sharedClientState.updateQueryState(p.targetId,w?"current":"not-current")}if(y){o.push(y);const w=Mp.As(p.targetId,y);l.push(w)}})))})),await Promise.all(c),s.Pu.H_(o),await(async function(p,y){const w=Pe(p);try{await w.persistence.runTransaction("notifyLocalViewChanges","readwrite",(E=>J.forEach(y,(S=>J.forEach(S.Es,(N=>w.persistence.referenceDelegate.addReference(E,S.targetId,N))).next((()=>J.forEach(S.ds,(N=>w.persistence.referenceDelegate.removeReference(E,S.targetId,N)))))))))}catch(E){if(!ia(E))throw E;ce(Op,"Failed to update sequence numbers: "+E)}for(const E of y){const S=E.targetId;if(!E.fromCache){const N=w.Ms.get(S),U=N.snapshotVersion,z=N.withLastLimboFreeSnapshotVersion(U);w.Ms=w.Ms.insert(S,z)}}})(s.localStore,l))}async function oR(n,e){const t=Pe(n);if(!t.currentUser.isEqual(e)){ce(Qp,"User change. New user:",e.toKey());const s=await Pw(t.localStore,e);t.currentUser=e,(function(l,c){l.mu.forEach((h=>{h.forEach((p=>{p.reject(new oe(X.CANCELLED,c))}))})),l.mu.clear()})(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,s.removedBatchIds,s.addedBatchIds),await Hl(t,s.Ls)}}function aR(n,e){const t=Pe(n),s=t.Au.get(e);if(s&&s.hu)return ze().add(s.key);{let o=ze();const l=t.Iu.get(e);if(!l)return o;for(const c of l){const h=t.Tu.get(c);o=o.unionWith(h.view.nu)}return o}}function Qw(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Ww.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=aR.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=nR.bind(null,e),e.Pu.H_=HA.bind(null,e.eventManager),e.Pu.yu=WA.bind(null,e.eventManager),e}function lR(n){const e=Pe(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=rR.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=sR.bind(null,e),e}class Yc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=vd(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,t){return null}Mu(e,t){return null}vu(e){return hA(this.persistence,new uA,e.initialUser,this.serializer)}Cu(e){return new Nw(Lp.mi,this.serializer)}Du(e){return new _A}async terminate(){this.gcScheduler?.stop(),this.indexBackfillerScheduler?.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Yc.provider={build:()=>new Yc};class uR extends Yc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,t){Ke(this.persistence.referenceDelegate instanceof Kc,46915);const s=this.persistence.referenceDelegate.garbageCollector;return new KC(s,e.asyncQueue,t)}Cu(e){const t=this.cacheSizeBytes!==void 0?an.withCacheSize(this.cacheSizeBytes):an.DEFAULT;return new Nw((s=>Kc.mi(s,t)),this.serializer)}}class ep{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=s=>e0(this.syncEngine,s,1),this.remoteStore.remoteSyncer.handleCredentialChange=oR.bind(null,this.syncEngine),await zA(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return(function(){return new $A})()}createDatastore(e){const t=vd(e.databaseInfo.databaseId),s=(function(l){return new IA(l)})(e.databaseInfo);return(function(l,c,h,p){return new CA(l,c,h,p)})(e.authCredentials,e.appCheckCredentials,s,t)}createRemoteStore(e){return(function(s,o,l,c,h){return new RA(s,o,l,c,h)})(this.localStore,this.datastore,e.asyncQueue,(t=>e0(this.syncEngine,t,0)),(function(){return Kv.v()?new Kv:new wA})())}createSyncEngine(e,t){return(function(o,l,c,h,p,y,w){const E=new QA(o,l,c,h,p,y);return w&&(E.gu=!0),E})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){await(async function(t){const s=Pe(t);ce(zi,"RemoteStore shutting down."),s.Ea.add(5),await $l(s),s.Aa.shutdown(),s.Ra.set("Unknown")})(this.remoteStore),this.datastore?.terminate(),this.eventManager?.terminate()}}ep.provider={build:()=>new ep};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xp{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Jr("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,t){setTimeout((()=>{this.muted||e(t)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="FirestoreClient";class cR{constructor(e,t,s,o,l){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=s,this.databaseInfo=o,this.user=Gt.UNAUTHENTICATED,this.clientId=Ip.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=l,this.authCredentials.start(s,(async c=>{ce(Xs,"Received user=",c.uid),await this.authCredentialListener(c),this.user=c})),this.appCheckCredentials.start(s,(c=>(ce(Xs,"Received new app check token=",c),this.appCheckCredentialListener(c,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Gr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const s=Hp(t,"Failed to shutdown persistence");e.reject(s)}})),e.promise}}async function Tf(n,e){n.asyncQueue.verifyOperationInProgress(),ce(Xs,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let s=t.initialUser;n.setCredentialChangeListener((async o=>{s.isEqual(o)||(await Pw(e.localStore,o),s=o)})),e.persistence.setDatabaseDeletedListener((()=>n.terminate())),n._offlineComponents=e}async function n0(n,e){n.asyncQueue.verifyOperationInProgress();const t=await dR(n);ce(Xs,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener((s=>Yv(e.remoteStore,s))),n.setAppCheckTokenChangeListener(((s,o)=>Yv(e.remoteStore,o))),n._onlineComponents=e}async function dR(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ce(Xs,"Using user provided OfflineComponentProvider");try{await Tf(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!(function(o){return o.name==="FirebaseError"?o.code===X.FAILED_PRECONDITION||o.code===X.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(t))throw t;Wo("Error using user provided cache. Falling back to memory cache: "+t),await Tf(n,new Yc)}}else ce(Xs,"Using default OfflineComponentProvider"),await Tf(n,new uR(void 0));return n._offlineComponents}async function Yw(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ce(Xs,"Using user provided OnlineComponentProvider"),await n0(n,n._uninitializedComponentsProvider._online)):(ce(Xs,"Using default OnlineComponentProvider"),await n0(n,new ep))),n._onlineComponents}function hR(n){return Yw(n).then((e=>e.syncEngine))}async function Xc(n){const e=await Yw(n),t=e.eventManager;return t.onListen=YA.bind(null,e.syncEngine),t.onUnlisten=ZA.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=XA.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=eR.bind(null,e.syncEngine),t}function fR(n,e,t={}){const s=new Gr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,y){const w=new Xp({next:S=>{w.Nu(),c.enqueueAndForget((()=>qp(l,E)));const N=S.docs.has(h);!N&&S.fromCache?y.reject(new oe(X.UNAVAILABLE,"Failed to get document because the client is offline.")):N&&S.fromCache&&p&&p.source==="server"?y.reject(new oe(X.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new Kp(hd(h.path),w,{includeMetadataChanges:!0,qa:!0});return Wp(l,E)})(await Xc(n),n.asyncQueue,e,t,s))),s.promise}function pR(n,e,t={}){const s=new Gr;return n.asyncQueue.enqueueAndForget((async()=>(function(l,c,h,p,y){const w=new Xp({next:S=>{w.Nu(),c.enqueueAndForget((()=>qp(l,E))),S.fromCache&&p.source==="server"?y.reject(new oe(X.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),E=new Kp(h,w,{includeMetadataChanges:!0,qa:!0});return Wp(l,E)})(await Xc(n),n.asyncQueue,e,t,s))),s.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xw(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r0=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="firestore.googleapis.com",s0=!0;class i0{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new oe(X.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=Jw,this.ssl=s0}else this.host=e.host,this.ssl=e.ssl??s0;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Rw;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<qC)throw new oe(X.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Rk("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=Xw(e.experimentalLongPollingOptions??{}),(function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new oe(X.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&(function(s,o){return s.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class xd{constructor(e,t,s,o){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=s,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new i0({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new oe(X.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new oe(X.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new i0(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=(function(s){if(!s)return new wk;switch(s.type){case"firstParty":return new Ik(s.sessionIndex||"0",s.iamToken||null,s.authTokenFactory||null);case"provider":return s.client;default:throw new oe(X.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(t){const s=r0.get(t);s&&(ce("ComponentProvider","Removing Datastore"),r0.delete(t),s.terminate())})(this),Promise.resolve()}}function mR(n,e,t,s={}){n=un(n,xd);const o=ea(e),l=n._getSettings(),c={...l,emulatorOptions:n._getEmulatorOptions()},h=`${e}:${t}`;o&&(q0(`https://${h}`),G0("Firestore",!0)),l.host!==Jw&&l.host!==h&&Wo("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const p={...l,host:h,ssl:o,emulatorOptions:s};if(!Li(p,c)&&(n._setSettings(p),s.mockUserToken)){let y,w;if(typeof s.mockUserToken=="string")y=s.mockUserToken,w=Gt.MOCK_USER;else{y=NT(s.mockUserToken,n._app?.options.projectId);const E=s.mockUserToken.sub||s.mockUserToken.user_id;if(!E)throw new oe(X.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");w=new Gt(E)}n._authCredentials=new xk(new B_(y,w))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ni{constructor(e,t,s){this.converter=t,this._query=s,this.type="query",this.firestore=e}withConverter(e){return new ni(this.firestore,e,this._query)}}class ft{constructor(e,t,s){this.converter=t,this._key=s,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ws(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ft(this.firestore,e,this._key)}toJSON(){return{type:ft._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,t,s){if(Ul(t,ft._jsonSchema))return new ft(e,s||null,new Ee(Ze.fromString(t.referencePath)))}}ft._jsonSchemaVersion="firestore/documentReference/1.0",ft._jsonSchema={type:It("string",ft._jsonSchemaVersion),referencePath:It("string")};class Ws extends ni{constructor(e,t,s){super(e,t,hd(s)),this._path=s,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ft(this.firestore,null,new Ee(e))}withConverter(e){return new Ws(this.firestore,e,this._path)}}function Zt(n,e,...t){if(n=At(n),$_("collection","path",e),n instanceof xd){const s=Ze.fromString(e,...t);return vv(s),new Ws(n,null,s)}{if(!(n instanceof ft||n instanceof Ws))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ze.fromString(e,...t));return vv(s),new Ws(n.firestore,null,s)}}function cn(n,e,...t){if(n=At(n),arguments.length===1&&(e=Ip.newId()),$_("doc","path",e),n instanceof xd){const s=Ze.fromString(e,...t);return yv(s),new ft(n,null,new Ee(s))}{if(!(n instanceof ft||n instanceof Ws))throw new oe(X.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const s=n._path.child(Ze.fromString(e,...t));return yv(s),new ft(n.firestore,n instanceof Ws?n.converter:null,new Ee(s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o0="AsyncQueue";class a0{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new jw(this,"async_queue_retry"),this._c=()=>{const s=Ef();s&&ce(o0,"Visibility state changed to "+s.visibilityState),this.M_.w_()},this.ac=e;const t=Ef();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const t=Ef();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise((()=>{}));const t=new Gr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise))).then((()=>t.promise))}enqueueRetryable(e){this.enqueueAndForget((()=>(this.Xu.push(e),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!ia(e))throw e;ce(o0,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(e){const t=this.ac.then((()=>(this.rc=!0,e().catch((s=>{throw this.nc=s,this.rc=!1,Jr("INTERNAL UNHANDLED ERROR: ",l0(s)),s})).then((s=>(this.rc=!1,s))))));return this.ac=t,t}enqueueAfterDelay(e,t,s){this.uc(),this.oc.indexOf(e)>-1&&(t=0);const o=$p.createAndSchedule(this,e,t,s,(l=>this.hc(l)));return this.tc.push(o),o}uc(){this.nc&&Ce(47125,{Pc:l0(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const t of this.tc)if(t.timerId===e)return!0;return!1}Ec(e){return this.Tc().then((()=>{this.tc.sort(((t,s)=>t.targetTimeMs-s.targetTimeMs));for(const t of this.tc)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Tc()}))}dc(e){this.oc.push(e)}hc(e){const t=this.tc.indexOf(e);this.tc.splice(t,1)}}function l0(n){let e=n.message||"";return n.stack&&(e=n.stack.includes(n.message)?n.stack:n.message+`
`+n.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function u0(n){return(function(t,s){if(typeof t!="object"||t===null)return!1;const o=t;for(const l of s)if(l in o&&typeof o[l]=="function")return!0;return!1})(n,["next","error","complete"])}class es extends xd{constructor(e,t,s,o){super(e,t,s,o),this.type="firestore",this._queue=new a0,this._persistenceKey=o?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new a0(e),this._firestoreClient=void 0,await e}}}function gR(n,e){const t=typeof n=="object"?n:X0(),s=typeof n=="string"?n:Bc,o=pp(t,"firestore").getImmediate({identifier:s});if(!o._initialized){const l=AT("firestore");l&&mR(o,...l)}return o}function Ed(n){if(n._terminated)throw new oe(X.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||yR(n),n._firestoreClient}function yR(n){const e=n._freezeSettings(),t=(function(o,l,c,h){return new zk(o,l,c,h.host,h.ssl,h.experimentalForceLongPolling,h.experimentalAutoDetectLongPolling,Xw(h.experimentalLongPollingOptions),h.useFetchStreams,h.isUsingEmulator)})(n._databaseId,n._app?.options.appId||"",n._persistenceKey,e);n._componentsProvider||e.localCache?._offlineComponentProvider&&e.localCache?._onlineComponentProvider&&(n._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),n._firestoreClient=new cR(n._authCredentials,n._appCheckCredentials,n._queue,t,n._componentsProvider&&(function(o){const l=o?._online.build();return{_offline:o?._offline.build(l),_online:l}})(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rn{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Rn(Ut.fromBase64String(e))}catch(t){throw new oe(X.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Rn(Ut.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:Rn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Ul(e,Rn._jsonSchema))return Rn.fromBase64String(e.bytes)}}Rn._jsonSchemaVersion="firestore/bytes/1.0",Rn._jsonSchema={type:It("string",Rn._jsonSchemaVersion),bytes:It("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Td{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new oe(X.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ft(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jp{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new oe(X.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new oe(X.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return Ue(this._lat,e._lat)||Ue(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:xr._jsonSchemaVersion}}static fromJSON(e){if(Ul(e,xr._jsonSchema))return new xr(e.latitude,e.longitude)}}xr._jsonSchemaVersion="firestore/geoPoint/1.0",xr._jsonSchema={type:It("string",xr._jsonSchemaVersion),latitude:It("number"),longitude:It("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Er{constructor(e){this._values=(e||[]).map((t=>t))}toArray(){return this._values.map((e=>e))}isEqual(e){return(function(s,o){if(s.length!==o.length)return!1;for(let l=0;l<s.length;++l)if(s[l]!==o[l])return!1;return!0})(this._values,e._values)}toJSON(){return{type:Er._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Ul(e,Er._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every((t=>typeof t=="number")))return new Er(e.vectorValues);throw new oe(X.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Er._jsonSchemaVersion="firestore/vectorValue/1.0",Er._jsonSchema={type:It("string",Er._jsonSchemaVersion),vectorValues:It("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vR=/^__.*__$/;class _R{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return this.fieldMask!==null?new ti(e,this.data,this.fieldMask,t,this.fieldTransforms):new zl(e,this.data,t,this.fieldTransforms)}}class Zw{constructor(e,t,s){this.data=e,this.fieldMask=t,this.fieldTransforms=s}toMutation(e,t){return new ti(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function ex(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce(40011,{Ac:n})}}class Zp{constructor(e,t,s,o,l,c){this.settings=e,this.databaseId=t,this.serializer=s,this.ignoreUndefinedProperties=o,l===void 0&&this.Rc(),this.fieldTransforms=l||[],this.fieldMask=c||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Zp({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.gc(e),s}yc(e){const t=this.path?.child(e),s=this.Vc({path:t,fc:!1});return s.Rc(),s}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return Jc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find((t=>e.isPrefixOf(t)))!==void 0||this.fieldTransforms.find((t=>e.isPrefixOf(t.field)))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(ex(this.Ac)&&vR.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class wR{constructor(e,t,s){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=s||vd(e)}Cc(e,t,s,o=!1){return new Zp({Ac:e,methodName:t,Dc:s,path:Ft.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Id(n){const e=n._freezeSettings(),t=vd(n._databaseId);return new wR(n._databaseId,!!e.ignoreUndefinedProperties,t)}function tx(n,e,t,s,o,l={}){const c=n.Cc(l.merge||l.mergeFields?2:0,e,t,o);em("Data must be an object, but it was:",c,s);const h=nx(s,c);let p,y;if(l.merge)p=new wn(c.fieldMask),y=c.fieldTransforms;else if(l.mergeFields){const w=[];for(const E of l.mergeFields){const S=tp(e,E,t);if(!c.contains(S))throw new oe(X.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);sx(w,S)||w.push(S)}p=new wn(w),y=c.fieldTransforms.filter((E=>p.covers(E.field)))}else p=null,y=c.fieldTransforms;return new _R(new ln(h),p,y)}class Sd extends Jp{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Sd}}function xR(n,e,t,s){const o=n.Cc(1,e,t);em("Data must be an object, but it was:",o,s);const l=[],c=ln.empty();ei(s,((p,y)=>{const w=tm(e,p,t);y=At(y);const E=o.yc(w);if(y instanceof Sd)l.push(w);else{const S=Wl(y,E);S!=null&&(l.push(w),c.set(w,S))}}));const h=new wn(l);return new Zw(c,h,o.fieldTransforms)}function ER(n,e,t,s,o,l){const c=n.Cc(1,e,t),h=[tp(e,s,t)],p=[o];if(l.length%2!=0)throw new oe(X.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<l.length;S+=2)h.push(tp(e,l[S])),p.push(l[S+1]);const y=[],w=ln.empty();for(let S=h.length-1;S>=0;--S)if(!sx(y,h[S])){const N=h[S];let U=p[S];U=At(U);const z=c.yc(N);if(U instanceof Sd)y.push(N);else{const k=Wl(U,z);k!=null&&(y.push(N),w.set(N,k))}}const E=new wn(y);return new Zw(w,E,c.fieldTransforms)}function TR(n,e,t,s=!1){return Wl(t,n.Cc(s?4:3,e))}function Wl(n,e){if(rx(n=At(n)))return em("Unsupported field value:",e,n),nx(n,e);if(n instanceof Jp)return(function(s,o){if(!ex(o.Ac))throw o.Sc(`${s._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${s._methodName}() is not currently supported inside arrays`);const l=s._toFieldTransform(o);l&&o.fieldTransforms.push(l)})(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return(function(s,o){const l=[];let c=0;for(const h of s){let p=Wl(h,o.wc(c));p==null&&(p={nullValue:"NULL_VALUE"}),l.push(p),c++}return{arrayValue:{values:l}}})(n,e)}return(function(s,o){if((s=At(s))===null)return{nullValue:"NULL_VALUE"};if(typeof s=="number")return cC(o.serializer,s);if(typeof s=="boolean")return{booleanValue:s};if(typeof s=="string")return{stringValue:s};if(s instanceof Date){const l=rt.fromDate(s);return{timestampValue:Gc(o.serializer,l)}}if(s instanceof rt){const l=new rt(s.seconds,1e3*Math.floor(s.nanoseconds/1e3));return{timestampValue:Gc(o.serializer,l)}}if(s instanceof xr)return{geoPointValue:{latitude:s.latitude,longitude:s.longitude}};if(s instanceof Rn)return{bytesValue:Tw(o.serializer,s._byteString)};if(s instanceof ft){const l=o.databaseId,c=s.firestore._databaseId;if(!c.isEqual(l))throw o.Sc(`Document reference is for database ${c.projectId}/${c.database} but should be for database ${l.projectId}/${l.database}`);return{referenceValue:jp(s.firestore._databaseId||o.databaseId,s._key.path)}}if(s instanceof Er)return(function(c,h){return{mapValue:{fields:{[J_]:{stringValue:Z_},[$c]:{arrayValue:{values:c.toArray().map((y=>{if(typeof y!="number")throw h.Sc("VectorValues must only contain numeric values.");return Rp(h.serializer,y)}))}}}}}})(s,o);throw o.Sc(`Unsupported field value: ${ld(s)}`)})(n,e)}function nx(n,e){const t={};return q_(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):ei(n,((s,o)=>{const l=Wl(o,e.mc(s));l!=null&&(t[s]=l)})),{mapValue:{fields:t}}}function rx(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof rt||n instanceof xr||n instanceof Rn||n instanceof ft||n instanceof Jp||n instanceof Er)}function em(n,e,t){if(!rx(t)||!H_(t)){const s=ld(t);throw s==="an object"?e.Sc(n+" a custom object"):e.Sc(n+" "+s)}}function tp(n,e,t){if((e=At(e))instanceof Td)return e._internalPath;if(typeof e=="string")return tm(n,e);throw Jc("Field path arguments must be of type string or ",n,!1,void 0,t)}const IR=new RegExp("[~\\*/\\[\\]]");function tm(n,e,t){if(e.search(IR)>=0)throw Jc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Td(...e.split("."))._internalPath}catch{throw Jc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function Jc(n,e,t,s,o){const l=s&&!s.isEmpty(),c=o!==void 0;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let p="";return(l||c)&&(p+=" (found",l&&(p+=` in field ${s}`),c&&(p+=` in document ${o}`),p+=")"),new oe(X.INVALID_ARGUMENT,h+n+p)}function sx(n,e){return n.some((t=>t.isEqual(e)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ix{constructor(e,t,s,o,l){this._firestore=e,this._userDataWriter=t,this._key=s,this._document=o,this._converter=l}get id(){return this._key.path.lastSegment()}get ref(){return new ft(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new SR(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(nm("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class SR extends ix{data(){return super.data()}}function nm(n,e){return typeof e=="string"?tm(n,e):e instanceof Td?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new oe(X.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class rm{}class ax extends rm{}function rs(n,e,...t){let s=[];e instanceof rm&&s.push(e),s=s.concat(t),(function(l){const c=l.filter((p=>p instanceof im)).length,h=l.filter((p=>p instanceof sm)).length;if(c>1||c>0&&h>0)throw new oe(X.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(s);for(const o of s)n=o._apply(n);return n}class sm extends ax{constructor(e,t,s){super(),this._field=e,this._op=t,this._value=s,this.type="where"}static _create(e,t,s){return new sm(e,t,s)}_apply(e){const t=this._parse(e);return lx(e._query,t),new ni(e.firestore,e.converter,Hf(e._query,t))}_parse(e){const t=Id(e.firestore);return(function(l,c,h,p,y,w,E){let S;if(y.isKeyField()){if(w==="array-contains"||w==="array-contains-any")throw new oe(X.INVALID_ARGUMENT,`Invalid Query. You can't perform '${w}' queries on documentId().`);if(w==="in"||w==="not-in"){d0(E,w);const U=[];for(const z of E)U.push(c0(p,l,z));S={arrayValue:{values:U}}}else S=c0(p,l,E)}else w!=="in"&&w!=="not-in"&&w!=="array-contains-any"||d0(E,w),S=TR(h,c,E,w==="in"||w==="not-in");return Tt.create(y,w,S)})(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}class im extends rm{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new im(e,t)}_parse(e){const t=this._queryConstraints.map((s=>s._parse(e))).filter((s=>s.getFilters().length>0));return t.length===1?t[0]:Wn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:((function(o,l){let c=o;const h=l.getFlattenedFilters();for(const p of h)lx(c,p),c=Hf(c,p)})(e._query,t),new ni(e.firestore,e.converter,Hf(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class om extends ax{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new om(e,t)}_apply(e){const t=(function(o,l,c){if(o.startAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new oe(X.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new bl(l,c)})(e._query,this._field,this._direction);return new ni(e.firestore,e.converter,(function(o,l){const c=o.explicitOrderBy.concat([l]);return new oa(o.path,o.collectionGroup,c,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(e._query,t))}}function ri(n,e="asc"){const t=e,s=nm("orderBy",n);return om._create(s,t)}function c0(n,e,t){if(typeof(t=At(t))=="string"){if(t==="")throw new oe(X.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!aw(e)&&t.indexOf("/")!==-1)throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const s=e.path.child(Ze.fromString(t));if(!Ee.isDocumentKey(s))throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${s}' is not because it has an odd number of segments (${s.length}).`);return bv(n,new Ee(s))}if(t instanceof ft)return bv(n,t._key);throw new oe(X.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ld(t)}.`)}function d0(n,e){if(!Array.isArray(n)||n.length===0)throw new oe(X.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function lx(n,e){const t=(function(o,l){for(const c of o)for(const h of c.getFlattenedFilters())if(l.indexOf(h.op)>=0)return h.op;return null})(n.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(e.op));if(t!==null)throw t===e.op?new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new oe(X.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class bR{convertValue(e,t="none"){switch(Qs(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ce(62114,{value:e})}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const s={};return ei(e,((o,l)=>{s[o]=this.convertValue(l,t)})),s}convertVectorValue(e){const t=e.fields?.[$c].arrayValue?.values?.map((s=>yt(s.doubleValue)));return new Er(t)}convertGeoPoint(e){return new xr(yt(e.latitude),yt(e.longitude))}convertArray(e,t){return(e.values||[]).map((s=>this.convertValue(s,t)))}convertServerTimestamp(e,t){switch(t){case"previous":const s=dd(e);return s==null?null:this.convertValue(s,t);case"estimate":return this.convertTimestamp(Tl(e));default:return null}}convertTimestamp(e){const t=Gs(e);return new rt(t.seconds,t.nanos)}convertDocumentKey(e,t){const s=Ze.fromString(e);Ke(Aw(s),9688,{name:e});const o=new Il(s.get(1),s.get(3)),l=new Ee(s.popFirst(5));return o.isEqual(t)||Jr(`Document ${l} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(n,e,t){let s;return s=n?n.toFirestore(e):e,s}class dl{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ji extends ix{constructor(e,t,s,o,l,c){super(e,t,s,o,c),this._firestore=e,this._firestoreImpl=e,this.metadata=l}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Nc(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const s=this._document.data.field(nm("DocumentSnapshot.get",e));if(s!==null)return this._userDataWriter.convertValue(s,t.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(X.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,t={};return t.type=ji._jsonSchemaVersion,t.bundle="",t.bundleSource="DocumentSnapshot",t.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?t:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),t.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),t)}}ji._jsonSchemaVersion="firestore/documentSnapshot/1.0",ji._jsonSchema={type:It("string",ji._jsonSchemaVersion),bundleSource:It("string","DocumentSnapshot"),bundleName:It("string"),bundle:It("string")};class Nc extends ji{data(e={}){return super.data(e)}}class Vi{constructor(e,t,s,o){this._firestore=e,this._userDataWriter=t,this._snapshot=o,this.metadata=new dl(o.hasPendingWrites,o.fromCache),this.query=s}get docs(){const e=[];return this.forEach((t=>e.push(t))),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach((s=>{e.call(t,new Nc(this._firestore,this._userDataWriter,s.key,s,new dl(this._snapshot.mutatedKeys.has(s.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new oe(X.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=(function(o,l){if(o._snapshot.oldDocs.isEmpty()){let c=0;return o._snapshot.docChanges.map((h=>{const p=new Nc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new dl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);return h.doc,{type:"added",doc:p,oldIndex:-1,newIndex:c++}}))}{let c=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((h=>l||h.type!==3)).map((h=>{const p=new Nc(o._firestore,o._userDataWriter,h.doc.key,h.doc,new dl(o._snapshot.mutatedKeys.has(h.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,w=-1;return h.type!==0&&(y=c.indexOf(h.doc.key),c=c.delete(h.doc.key)),h.type!==1&&(c=c.add(h.doc),w=c.indexOf(h.doc.key)),{type:kR(h.type),doc:p,oldIndex:y,newIndex:w}}))}})(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new oe(X.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=Vi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Ip.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const t=[],s=[],o=[];return this.docs.forEach((l=>{l._document!==null&&(t.push(l._document),s.push(this._userDataWriter.convertObjectMap(l._document.data.value.mapValue.fields,"previous")),o.push(l.ref.path))})),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function kR(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce(61501,{type:n})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CR(n){n=un(n,ft);const e=un(n.firestore,es);return fR(Ed(e),n._key).then((t=>cx(e,n,t)))}Vi._jsonSchemaVersion="firestore/querySnapshot/1.0",Vi._jsonSchema={type:It("string",Vi._jsonSchemaVersion),bundleSource:It("string","QuerySnapshot"),bundleName:It("string"),bundle:It("string")};class am extends bR{constructor(e){super(),this.firestore=e}convertBytes(e){return new Rn(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ft(this.firestore,null,t)}}function qn(n){n=un(n,ni);const e=un(n.firestore,es),t=Ed(e),s=new am(e);return ox(n._query),pR(t,n._query).then((o=>new Vi(e,s,n,o)))}function np(n,e,t){n=un(n,ft);const s=un(n.firestore,es),o=ux(n.converter,e);return Cd(s,[tx(Id(s),"setDoc",n._key,o,n.converter!==null,t).toMutation(n._key,Nn.none())])}function ql(n,e,t,...s){n=un(n,ft);const o=un(n.firestore,es),l=Id(o);let c;return c=typeof(e=At(e))=="string"||e instanceof Td?ER(l,"updateDoc",n._key,e,t,s):xR(l,"updateDoc",n._key,e),Cd(o,[c.toMutation(n._key,Nn.exists(!0))])}function bd(n){return Cd(un(n.firestore,es),[new Np(n._key,Nn.none())])}function kd(n,e){const t=un(n.firestore,es),s=cn(n),o=ux(n.converter,e);return Cd(t,[tx(Id(n.firestore),"addDoc",s._key,o,n.converter!==null,{}).toMutation(s._key,Nn.exists(!1))]).then((()=>s))}function AR(n,...e){n=At(n);let t={includeMetadataChanges:!1,source:"default"},s=0;typeof e[s]!="object"||u0(e[s])||(t=e[s++]);const o={includeMetadataChanges:t.includeMetadataChanges,source:t.source};if(u0(e[s])){const p=e[s];e[s]=p.next?.bind(p),e[s+1]=p.error?.bind(p),e[s+2]=p.complete?.bind(p)}let l,c,h;if(n instanceof ft)c=un(n.firestore,es),h=hd(n._key.path),l={next:p=>{e[s]&&e[s](cx(c,n,p))},error:e[s+1],complete:e[s+2]};else{const p=un(n,ni);c=un(p.firestore,es),h=p._query;const y=new am(c);l={next:w=>{e[s]&&e[s](new Vi(c,y,p,w))},error:e[s+1],complete:e[s+2]},ox(n._query)}return(function(y,w,E,S){const N=new Xp(S),U=new Kp(w,N,E);return y.asyncQueue.enqueueAndForget((async()=>Wp(await Xc(y),U))),()=>{N.Nu(),y.asyncQueue.enqueueAndForget((async()=>qp(await Xc(y),U)))}})(Ed(c),h,o,l)}function Cd(n,e){return(function(s,o){const l=new Gr;return s.asyncQueue.enqueueAndForget((async()=>tR(await hR(s),o,l))),l.promise})(Ed(n),e)}function cx(n,e,t){const s=t.docs.get(e._key),o=new am(n);return new ji(n,o,e._key,s,new dl(t.hasPendingWrites,t.fromCache),e.converter)}(function(e,t=!0){(function(o){ra=o})(ta),Ho(new Mi("firestore",((s,{instanceIdentifier:o,options:l})=>{const c=s.getProvider("app").getImmediate(),h=new es(new Ek(s.getProvider("auth-internal")),new Sk(c,s.getProvider("app-check-internal")),(function(y,w){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new oe(X.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Il(y.options.projectId,w)})(c,o),c);return l={useFetchStreams:t,...l},h._setSettings(l),h}),"PUBLIC").setMultipleInstances(!0)),$s(fv,pv,e),$s(fv,pv,"esm2020")})();const RR={apiKey:"AIzaSyBYuHWfYIfbzaZrVIlUtRmUMbeI3it3i7g",authDomain:"english-learning-game-989e9.firebaseapp.com",projectId:"english-learning-game-989e9",storageBucket:"english-learning-game-989e9.firebasestorage.app",messagingSenderId:"404587848000",appId:"1:404587848000:web:61cf3f8b8b9eb5bc551aa5"},dx=Y0(RR),Al=vk(dx),Ye=gR(dx);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),PR=n=>n.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,s)=>s?s.toUpperCase():t.toLowerCase()),h0=n=>{const e=PR(n);return e.charAt(0).toUpperCase()+e.slice(1)},hx=(...n)=>n.filter((e,t,s)=>!!e&&e.trim()!==""&&s.indexOf(e)===t).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var DR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=R.forwardRef(({color:n="currentColor",size:e=24,strokeWidth:t=2,absoluteStrokeWidth:s,className:o="",children:l,iconNode:c,...h},p)=>R.createElement("svg",{ref:p,...DR,width:e,height:e,stroke:n,strokeWidth:s?Number(t)*24/Number(e):t,className:hx("lucide",o),...h},[...c.map(([y,w])=>R.createElement(y,w)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const st=(n,e)=>{const t=R.forwardRef(({className:s,...o},l)=>R.createElement(jR,{ref:l,iconNode:e,className:hx(`lucide-${NR(h0(n))}`,`lucide-${n}`,s),...o}));return t.displayName=h0(n),t};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VR=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],ts=st("arrow-left",VR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],lm=st("arrow-right",LR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=[["path",{d:"M12 7v14",key:"1akyts"}],["path",{d:"M3 18a1 1 0 0 1-1-1V4a1 1 0 0 1 1-1h5a4 4 0 0 1 4 4 4 4 0 0 1 4-4h5a1 1 0 0 1 1 1v13a1 1 0 0 1-1 1h-6a3 3 0 0 0-3 3 3 3 0 0 0-3-3z",key:"ruj8y"}]],Ad=st("book-open",MR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rl=st("check",OR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FR=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],um=st("file-text",FR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UR=[["line",{x1:"6",x2:"10",y1:"11",y2:"11",key:"1gktln"}],["line",{x1:"8",x2:"8",y1:"9",y2:"13",key:"qnk9ow"}],["line",{x1:"15",x2:"15.01",y1:"12",y2:"12",key:"krot7o"}],["line",{x1:"18",x2:"18.01",y1:"10",y2:"10",key:"1lcuu1"}],["path",{d:"M17.32 5H6.68a4 4 0 0 0-3.978 3.59c-.006.052-.01.101-.017.152C2.604 9.416 2 14.456 2 16a3 3 0 0 0 3 3c1 0 1.5-.5 2-1l1.414-1.414A2 2 0 0 1 9.828 16h4.344a2 2 0 0 1 1.414.586L17 18c.5.5 1 1 2 1a3 3 0 0 0 3-3c0-1.545-.604-6.584-.685-7.258-.007-.05-.011-.1-.017-.151A4 4 0 0 0 17.32 5z",key:"mfqc10"}]],If=st("gamepad-2",UR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zR=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],fx=st("house",zR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BR=[["path",{d:"m5 8 6 6",key:"1wu5hv"}],["path",{d:"m4 14 6-6 2-3",key:"1k1g8d"}],["path",{d:"M2 5h12",key:"or177f"}],["path",{d:"M7 2h1",key:"1t2jsx"}],["path",{d:"m22 22-5-10-5 10",key:"don7ne"}],["path",{d:"M14 18h6",key:"1m8k6r"}]],Zc=st("languages",BR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]],f0=st("layout-dashboard",$R);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HR=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],WR=st("lightbulb",HR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qR=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],Gl=st("loader-circle",qR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GR=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],px=st("log-out",GR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KR=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],QR=st("menu",KR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YR=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Rd=st("pen",YR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XR=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Kl=st("plus",XR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JR=[["path",{d:"M15.39 4.39a1 1 0 0 0 1.68-.474 2.5 2.5 0 1 1 3.014 3.015 1 1 0 0 0-.474 1.68l1.683 1.682a2.414 2.414 0 0 1 0 3.414L19.61 15.39a1 1 0 0 1-1.68-.474 2.5 2.5 0 1 0-3.014 3.015 1 1 0 0 1 .474 1.68l-1.683 1.682a2.414 2.414 0 0 1-3.414 0L8.61 19.61a1 1 0 0 0-1.68.474 2.5 2.5 0 1 1-3.014-3.015 1 1 0 0 0 .474-1.68l-1.683-1.682a2.414 2.414 0 0 1 0-3.414L4.39 8.61a1 1 0 0 1 1.68.474 2.5 2.5 0 1 0 3.014-3.015 1 1 0 0 1-.474-1.68l1.683-1.682a2.414 2.414 0 0 1 3.414 0z",key:"w46dr5"}]],ZR=st("puzzle",JR);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eN=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Kr=st("rotate-ccw",eN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tN=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],nN=st("settings",tN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rN=[["path",{d:"m18 14 4 4-4 4",key:"10pe0f"}],["path",{d:"m18 2 4 4-4 4",key:"pucp1d"}],["path",{d:"M2 18h1.973a4 4 0 0 0 3.3-1.7l5.454-8.6a4 4 0 0 1 3.3-1.7H22",key:"1ailkh"}],["path",{d:"M2 6h1.972a4 4 0 0 1 3.6 2.2",key:"km57vx"}],["path",{d:"M22 18h-6.041a4 4 0 0 1-3.3-1.8l-.359-.45",key:"os18l9"}]],cm=st("shuffle",rN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sN=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],Nd=st("trash-2",sN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iN=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],oN=st("trending-up",iN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aN=[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]],mx=st("trophy",aN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lN=[["polyline",{points:"4 7 4 4 20 4 20 7",key:"1nosan"}],["line",{x1:"9",x2:"15",y1:"20",y2:"20",key:"swin9y"}],["line",{x1:"12",x2:"12",y1:"4",y2:"20",key:"1tx1rr"}]],uN=st("type",lN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cN=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],gx=st("users",cN);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dN=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Bi=st("x",dN);function hN({user:n,totalScore:e,isAdmin:t}){const s=Pl(),l=Qn().pathname==="/";return m.jsx("header",{className:"bg-white shadow-lg sticky top-0 z-50",children:m.jsx("div",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"w-9 h-9 bg-gradient-to-br from-blue-500 to-purple-600 rounded-lg flex items-center justify-center",children:m.jsx(Ad,{className:"w-5 h-5 text-white"})}),m.jsxs("div",{className:"text-right",children:[m.jsx("h1",{className:"text-2xl font-bold",children:" "}),m.jsxs("p",{className:"text-sm text-red-600",children:[" ",n.email?.split("@")[0]]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-amber-100 rounded-lg ml-3",children:[m.jsx(mx,{className:"w-4 h-4 text-amber-600"}),m.jsx("span",{className:"text-2xl font-bold text-amber-900",children:e})]}),!l&&m.jsx("button",{onClick:()=>s("/"),className:"flex items-center justify-center w-9 h-9 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors active:scale-95",children:m.jsx(fx,{className:"w-4 h-4"})}),t&&m.jsx("button",{onClick:()=>s("/admin"),className:"flex items-center justify-center w-9 h-9 bg-purple-100 hover:bg-purple-200 rounded-lg transition-colors active:scale-95",children:m.jsx(nN,{className:"w-4 h-4 text-purple-600"})}),m.jsx("button",{onClick:()=>I_(Al),className:"p-3 bg-red-100 hover:bg-red-200 flex items-center justify-center w-9 h-9 rounded-lg transition",children:m.jsx(px,{className:"w-4 h-4 text-red-600"})})]})]})})})}function fN({user:n,totalScore:e,isAdmin:t}){const s=Qn();return R.useEffect(()=>(document.querySelector('[data-modal-open="true"]')?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[s]),m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",dir:"rtl",children:[m.jsx(hN,{user:n,totalScore:e,isAdmin:t}),m.jsx("main",{className:"relative min-h-screen",children:m.jsx(D0,{})})]}),m.jsx("div",{"data-modal-open":!!document.querySelector('.fixed.inset-0[z-index="50"]')})]})}function pN(){const[n,e]=R.useState(!0),[t,s]=R.useState(""),[o,l]=R.useState(""),[c,h]=R.useState(""),[p,y]=R.useState(!1),w=async E=>{E.preventDefault(),h(""),y(!0);try{if(n)await sb(Al,t,o);else{const S=await rb(Al,t,o);await np(cn(Ye,"scores",S.user.uid),{wordMatch:0,fillBlank:0,translation:0,letterScramble:0}),await np(cn(Ye,"users",S.user.uid),{email:S.user.email,createdAt:new Date})}}catch{h("      ")}finally{y(!1)}};return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50 flex items-center justify-center px-4",dir:"rtl",children:m.jsxs("div",{className:"max-w-[500px] rounded-2xl shadow-2xl p-8",children:[m.jsxs("div",{className:"text-center mb-8",children:[m.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-blue-500 to-purple-600 rounded-2xl flex items-center justify-center mx-auto mb-4",children:m.jsx(Ad,{className:"w-10 h-10 text-white"})}),m.jsx("h1",{className:"text-3xl font-bold",children:" "}),m.jsx("p",{className:"text-gray-600 mt-2",children:" !"})]}),m.jsxs("form",{onSubmit:w,className:"space-y-6",children:[m.jsx("input",{type:"email",required:!0,value:t,onChange:E=>s(E.target.value),placeholder:" ",className:"w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-4 focus:ring-purple-300 focus:border-purple-500 transition",dir:"ltr"}),m.jsx("input",{type:"password",required:!0,value:o,onChange:E=>l(E.target.value),placeholder:" ",className:"w-full px-4 py-4 border border-gray-300 rounded-xl focus:ring-4 focus:ring-purple-300 focus:border-purple-500 transition",dir:"ltr"}),c&&m.jsx("div",{className:"bg-red-50 text-red-700 p-4 rounded-xl text-center font-medium",children:c}),m.jsx("button",{type:"submit",disabled:p,className:"w-full bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold text-xl py-4 rounded-xl hover:opacity-90 transition flex items-center justify-center gap-3 disabled:opacity-70",children:p?m.jsx(Gl,{className:"w-6 h-6 animate-spin"}):n?" ":" "})]}),m.jsx("button",{onClick:()=>{e(!n),h("")},className:"mt-6 text-purple-600 hover:text-purple-800 font-medium w-full text-center underline",children:n?"    ":"   "})]})})}function mN(){return m.jsx(pN,{})}function gN({onSelectGame:n}){const e=[{id:"wordMatch",title:" ",description:"    ",icon:ZR,color:"from-blue-500 to-blue-600",bgColor:"bg-blue-50"},{id:"fillBlank",title:" ",description:"   ",icon:um,color:"from-green-500 to-green-600",bgColor:"bg-green-50"},{id:"translation",title:"",description:"   ",icon:Zc,color:"from-purple-500 to-purple-600",bgColor:"bg-purple-50"},{id:"letterScramble",title:" ",description:"    ",icon:cm,color:"from-pink-500 to-pink-600",bgColor:"bg-pink-50"}];return m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-xl mb-1",children:" "}),m.jsx("p",{className:"text-sm text-gray-600",children:"   "})]}),m.jsx("div",{className:"max-w-3xl mx-auto grid grid-cols-2 gap-4 justify-center",children:e.map(t=>{const s=t.icon;return m.jsxs("button",{onClick:()=>n(t.id),className:`${t.bgColor} p-3 rounded-xl max-w-[300px] w-full mx-auto text-center border-2 border-transparent hover:border-gray-300 transition-all active:scale-95`,children:[m.jsx("div",{className:`w-12 h-12 mx-auto mb-2 bg-gradient-to-br ${t.color} rounded-xl flex items-center justify-center`,children:m.jsx(s,{className:"w-6 h-6 text-white"})}),m.jsx("h3",{className:"text-sm font-medium",children:t.title}),m.jsx("p",{className:"text-gray-600 text-xs mt-1",children:t.description})]},t.id)})})]})}function yN({scores:n}){const e={wordMatch:" ",fillBlank:" ",translation:"",letterScramble:" "},t=Object.values(n).reduce((s,o)=>s+o,0);return m.jsxs("div",{className:"max-w-3xl mx-auto bg-white rounded-xl shadow-md p-4 border mt-4",children:[m.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[m.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-amber-400 to-amber-600 rounded-lg flex items-center justify-center",children:m.jsx(mx,{className:"w-5 h-5 text-white"})}),m.jsxs("div",{className:"text-right",children:[m.jsx("h2",{className:"text-base",children:""}),m.jsxs("p",{className:"text-gray-500 text-xs",children:[" : ",t]})]})]}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:Object.entries(n).map(([s,o])=>m.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 rounded-lg p-3 text-center",children:[m.jsx("div",{className:"text-xl text-gray-900 mb-0.5",children:o}),m.jsx("div",{className:"text-xs text-gray-600",children:e[s]})]},s))})]})}function vN({scores:n}){const e=Pl(),t=s=>{e({wordMatch:"/word-match",fillBlank:"/fill-blank",translation:"/translation",letterScramble:"/letter-scramble"}[s])};return m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"mb-8",children:m.jsx(yN,{scores:n})}),m.jsx(gN,{onSelectGame:t})]})}function p0(n,e){if(typeof n=="function")return n(e);n!=null&&(n.current=e)}function _N(...n){return e=>{let t=!1;const s=n.map(o=>{const l=p0(o,e);return!t&&typeof l=="function"&&(t=!0),l});if(t)return()=>{for(let o=0;o<s.length;o++){const l=s[o];typeof l=="function"?l():p0(n[o],null)}}}}var wN=Symbol.for("react.lazy"),ed=BE[" use ".trim().toString()];function xN(n){return typeof n=="object"&&n!==null&&"then"in n}function yx(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===wN&&"_payload"in n&&xN(n._payload)}function EN(n){const e=IN(n),t=R.forwardRef((s,o)=>{let{children:l,...c}=s;yx(l)&&typeof ed=="function"&&(l=ed(l._payload));const h=R.Children.toArray(l),p=h.find(bN);if(p){const y=p.props.children,w=h.map(E=>E===p?R.Children.count(y)>1?R.Children.only(null):R.isValidElement(y)?y.props.children:null:E);return m.jsx(e,{...c,ref:o,children:R.isValidElement(y)?R.cloneElement(y,void 0,w):null})}return m.jsx(e,{...c,ref:o,children:l})});return t.displayName=`${n}.Slot`,t}var TN=EN("Slot");function IN(n){const e=R.forwardRef((t,s)=>{let{children:o,...l}=t;if(yx(o)&&typeof ed=="function"&&(o=ed(o._payload)),R.isValidElement(o)){const c=CN(o),h=kN(l,o.props);return o.type!==R.Fragment&&(h.ref=s?_N(s,c):c),R.cloneElement(o,h)}return R.Children.count(o)>1?R.Children.only(null):null});return e.displayName=`${n}.SlotClone`,e}var SN=Symbol("radix.slottable");function bN(n){return R.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===SN}function kN(n,e){const t={...e};for(const s in e){const o=n[s],l=e[s];/^on[A-Z]/.test(s)?o&&l?t[s]=(...h)=>{const p=l(...h);return o(...h),p}:o&&(t[s]=o):s==="style"?t[s]={...o,...l}:s==="className"&&(t[s]=[o,l].filter(Boolean).join(" "))}return{...n,...t}}function CN(n){let e=Object.getOwnPropertyDescriptor(n.props,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning;return t?n.ref:(e=Object.getOwnPropertyDescriptor(n,"ref")?.get,t=e&&"isReactWarning"in e&&e.isReactWarning,t?n.props.ref:n.props.ref||n.ref)}function vx(n){var e,t,s="";if(typeof n=="string"||typeof n=="number")s+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(e=0;e<o;e++)n[e]&&(t=vx(n[e]))&&(s&&(s+=" "),s+=t)}else for(t in n)n[t]&&(s&&(s+=" "),s+=t);return s}function _x(){for(var n,e,t=0,s="",o=arguments.length;t<o;t++)(n=arguments[t])&&(e=vx(n))&&(s&&(s+=" "),s+=e);return s}const m0=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,g0=_x,AN=(n,e)=>t=>{var s;if(e?.variants==null)return g0(n,t?.class,t?.className);const{variants:o,defaultVariants:l}=e,c=Object.keys(o).map(y=>{const w=t?.[y],E=l?.[y];if(w===null)return null;const S=m0(w)||m0(E);return o[y][S]}),h=t&&Object.entries(t).reduce((y,w)=>{let[E,S]=w;return S===void 0||(y[E]=S),y},{}),p=e==null||(s=e.compoundVariants)===null||s===void 0?void 0:s.reduce((y,w)=>{let{class:E,className:S,...N}=w;return Object.entries(N).every(U=>{let[z,k]=U;return Array.isArray(k)?k.includes({...l,...h}[z]):{...l,...h}[z]===k})?[...y,E,S]:y},[]);return g0(n,c,p,t?.class,t?.className)},RN=(n,e)=>{const t=new Array(n.length+e.length);for(let s=0;s<n.length;s++)t[s]=n[s];for(let s=0;s<e.length;s++)t[n.length+s]=e[s];return t},NN=(n,e)=>({classGroupId:n,validator:e}),wx=(n=new Map,e=null,t)=>({nextPart:n,validators:e,classGroupId:t}),td="-",y0=[],PN="arbitrary..",DN=n=>{const e=VN(n),{conflictingClassGroups:t,conflictingClassGroupModifiers:s}=n;return{getClassGroupId:c=>{if(c.startsWith("[")&&c.endsWith("]"))return jN(c);const h=c.split(td),p=h[0]===""&&h.length>1?1:0;return xx(h,p,e)},getConflictingClassGroupIds:(c,h)=>{if(h){const p=s[c],y=t[c];return p?y?RN(y,p):p:y||y0}return t[c]||y0}}},xx=(n,e,t)=>{if(n.length-e===0)return t.classGroupId;const o=n[e],l=t.nextPart.get(o);if(l){const y=xx(n,e+1,l);if(y)return y}const c=t.validators;if(c===null)return;const h=e===0?n.join(td):n.slice(e).join(td),p=c.length;for(let y=0;y<p;y++){const w=c[y];if(w.validator(h))return w.classGroupId}},jN=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const e=n.slice(1,-1),t=e.indexOf(":"),s=e.slice(0,t);return s?PN+s:void 0})(),VN=n=>{const{theme:e,classGroups:t}=n;return LN(t,e)},LN=(n,e)=>{const t=wx();for(const s in n){const o=n[s];dm(o,t,s,e)}return t},dm=(n,e,t,s)=>{const o=n.length;for(let l=0;l<o;l++){const c=n[l];MN(c,e,t,s)}},MN=(n,e,t,s)=>{if(typeof n=="string"){ON(n,e,t);return}if(typeof n=="function"){FN(n,e,t,s);return}UN(n,e,t,s)},ON=(n,e,t)=>{const s=n===""?e:Ex(e,n);s.classGroupId=t},FN=(n,e,t,s)=>{if(zN(n)){dm(n(s),e,t,s);return}e.validators===null&&(e.validators=[]),e.validators.push(NN(t,n))},UN=(n,e,t,s)=>{const o=Object.entries(n),l=o.length;for(let c=0;c<l;c++){const[h,p]=o[c];dm(p,Ex(e,h),t,s)}},Ex=(n,e)=>{let t=n;const s=e.split(td),o=s.length;for(let l=0;l<o;l++){const c=s[l];let h=t.nextPart.get(c);h||(h=wx(),t.nextPart.set(c,h)),t=h}return t},zN=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,BN=n=>{if(n<1)return{get:()=>{},set:()=>{}};let e=0,t=Object.create(null),s=Object.create(null);const o=(l,c)=>{t[l]=c,e++,e>n&&(e=0,s=t,t=Object.create(null))};return{get(l){let c=t[l];if(c!==void 0)return c;if((c=s[l])!==void 0)return o(l,c),c},set(l,c){l in t?t[l]=c:o(l,c)}}},rp="!",v0=":",$N=[],_0=(n,e,t,s,o)=>({modifiers:n,hasImportantModifier:e,baseClassName:t,maybePostfixModifierPosition:s,isExternal:o}),HN=n=>{const{prefix:e,experimentalParseClassName:t}=n;let s=o=>{const l=[];let c=0,h=0,p=0,y;const w=o.length;for(let z=0;z<w;z++){const k=o[z];if(c===0&&h===0){if(k===v0){l.push(o.slice(p,z)),p=z+1;continue}if(k==="/"){y=z;continue}}k==="["?c++:k==="]"?c--:k==="("?h++:k===")"&&h--}const E=l.length===0?o:o.slice(p);let S=E,N=!1;E.endsWith(rp)?(S=E.slice(0,-1),N=!0):E.startsWith(rp)&&(S=E.slice(1),N=!0);const U=y&&y>p?y-p:void 0;return _0(l,N,S,U)};if(e){const o=e+v0,l=s;s=c=>c.startsWith(o)?l(c.slice(o.length)):_0($N,!1,c,void 0,!0)}if(t){const o=s;s=l=>t({className:l,parseClassName:o})}return s},WN=n=>{const e=new Map;return n.orderSensitiveModifiers.forEach((t,s)=>{e.set(t,1e6+s)}),t=>{const s=[];let o=[];for(let l=0;l<t.length;l++){const c=t[l],h=c[0]==="[",p=e.has(c);h||p?(o.length>0&&(o.sort(),s.push(...o),o=[]),s.push(c)):o.push(c)}return o.length>0&&(o.sort(),s.push(...o)),s}},qN=n=>({cache:BN(n.cacheSize),parseClassName:HN(n),sortModifiers:WN(n),...DN(n)}),GN=/\s+/,KN=(n,e)=>{const{parseClassName:t,getClassGroupId:s,getConflictingClassGroupIds:o,sortModifiers:l}=e,c=[],h=n.trim().split(GN);let p="";for(let y=h.length-1;y>=0;y-=1){const w=h[y],{isExternal:E,modifiers:S,hasImportantModifier:N,baseClassName:U,maybePostfixModifierPosition:z}=t(w);if(E){p=w+(p.length>0?" "+p:p);continue}let k=!!z,H=s(k?U.substring(0,z):U);if(!H){if(!k){p=w+(p.length>0?" "+p:p);continue}if(H=s(U),!H){p=w+(p.length>0?" "+p:p);continue}k=!1}const K=S.length===0?"":S.length===1?S[0]:l(S).join(":"),Y=N?K+rp:K,ae=Y+H;if(c.indexOf(ae)>-1)continue;c.push(ae);const fe=o(H,k);for(let he=0;he<fe.length;++he){const P=fe[he];c.push(Y+P)}p=w+(p.length>0?" "+p:p)}return p},QN=(...n)=>{let e=0,t,s,o="";for(;e<n.length;)(t=n[e++])&&(s=Tx(t))&&(o&&(o+=" "),o+=s);return o},Tx=n=>{if(typeof n=="string")return n;let e,t="";for(let s=0;s<n.length;s++)n[s]&&(e=Tx(n[s]))&&(t&&(t+=" "),t+=e);return t},YN=(n,...e)=>{let t,s,o,l;const c=p=>{const y=e.reduce((w,E)=>E(w),n());return t=qN(y),s=t.cache.get,o=t.cache.set,l=h,h(p)},h=p=>{const y=s(p);if(y)return y;const w=KN(p,t);return o(p,w),w};return l=c,(...p)=>l(QN(...p))},XN=[],kt=n=>{const e=t=>t[n]||XN;return e.isThemeGetter=!0,e},Ix=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,Sx=/^\((?:(\w[\w-]*):)?(.+)\)$/i,JN=/^\d+\/\d+$/,ZN=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,eP=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,tP=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,nP=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,rP=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,jo=n=>JN.test(n),Le=n=>!!n&&!Number.isNaN(Number(n)),Vs=n=>!!n&&Number.isInteger(Number(n)),Sf=n=>n.endsWith("%")&&Le(n.slice(0,-1)),Br=n=>ZN.test(n),sP=()=>!0,iP=n=>eP.test(n)&&!tP.test(n),bx=()=>!1,oP=n=>nP.test(n),aP=n=>rP.test(n),lP=n=>!me(n)&&!ge(n),uP=n=>la(n,Ax,bx),me=n=>Ix.test(n),Ni=n=>la(n,Rx,iP),bf=n=>la(n,pP,Le),w0=n=>la(n,kx,bx),cP=n=>la(n,Cx,aP),vc=n=>la(n,Nx,oP),ge=n=>Sx.test(n),il=n=>ua(n,Rx),dP=n=>ua(n,mP),x0=n=>ua(n,kx),hP=n=>ua(n,Ax),fP=n=>ua(n,Cx),_c=n=>ua(n,Nx,!0),la=(n,e,t)=>{const s=Ix.exec(n);return s?s[1]?e(s[1]):t(s[2]):!1},ua=(n,e,t=!1)=>{const s=Sx.exec(n);return s?s[1]?e(s[1]):t:!1},kx=n=>n==="position"||n==="percentage",Cx=n=>n==="image"||n==="url",Ax=n=>n==="length"||n==="size"||n==="bg-size",Rx=n=>n==="length",pP=n=>n==="number",mP=n=>n==="family-name",Nx=n=>n==="shadow",gP=()=>{const n=kt("color"),e=kt("font"),t=kt("text"),s=kt("font-weight"),o=kt("tracking"),l=kt("leading"),c=kt("breakpoint"),h=kt("container"),p=kt("spacing"),y=kt("radius"),w=kt("shadow"),E=kt("inset-shadow"),S=kt("text-shadow"),N=kt("drop-shadow"),U=kt("blur"),z=kt("perspective"),k=kt("aspect"),H=kt("ease"),K=kt("animate"),Y=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ae=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],fe=()=>[...ae(),ge,me],he=()=>["auto","hidden","clip","visible","scroll"],P=()=>["auto","contain","none"],T=()=>[ge,me,p],b=()=>[jo,"full","auto",...T()],V=()=>[Vs,"none","subgrid",ge,me],j=()=>["auto",{span:["full",Vs,ge,me]},Vs,ge,me],D=()=>[Vs,"auto",ge,me],C=()=>["auto","min","max","fr",ge,me],O=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],ie=()=>["start","end","center","stretch","center-safe","end-safe"],Te=()=>["auto",...T()],De=()=>[jo,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...T()],Q=()=>[n,ge,me],we=()=>[...ae(),x0,w0,{position:[ge,me]}],le=()=>["no-repeat",{repeat:["","x","y","space","round"]}],F=()=>["auto","cover","contain",hP,uP,{size:[ge,me]}],Z=()=>[Sf,il,Ni],_e=()=>["","none","full",y,ge,me],xe=()=>["",Le,il,Ni],je=()=>["solid","dashed","dotted","double"],Ve=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],be=()=>[Le,Sf,x0,w0],Oe=()=>["","none",U,ge,me],We=()=>["none",Le,ge,me],vt=()=>["none",Le,ge,me],Yn=()=>[Le,ge,me],Xn=()=>[jo,"full",...T()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[Br],breakpoint:[Br],color:[sP],container:[Br],"drop-shadow":[Br],ease:["in","out","in-out"],font:[lP],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[Br],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[Br],shadow:[Br],spacing:["px",Le],text:[Br],"text-shadow":[Br],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",jo,me,ge,k]}],container:["container"],columns:[{columns:[Le,me,ge,h]}],"break-after":[{"break-after":Y()}],"break-before":[{"break-before":Y()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:fe()}],overflow:[{overflow:he()}],"overflow-x":[{"overflow-x":he()}],"overflow-y":[{"overflow-y":he()}],overscroll:[{overscroll:P()}],"overscroll-x":[{"overscroll-x":P()}],"overscroll-y":[{"overscroll-y":P()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:b()}],"inset-x":[{"inset-x":b()}],"inset-y":[{"inset-y":b()}],start:[{start:b()}],end:[{end:b()}],top:[{top:b()}],right:[{right:b()}],bottom:[{bottom:b()}],left:[{left:b()}],visibility:["visible","invisible","collapse"],z:[{z:[Vs,"auto",ge,me]}],basis:[{basis:[jo,"full","auto",h,...T()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Le,jo,"auto","initial","none",me]}],grow:[{grow:["",Le,ge,me]}],shrink:[{shrink:["",Le,ge,me]}],order:[{order:[Vs,"first","last","none",ge,me]}],"grid-cols":[{"grid-cols":V()}],"col-start-end":[{col:j()}],"col-start":[{"col-start":D()}],"col-end":[{"col-end":D()}],"grid-rows":[{"grid-rows":V()}],"row-start-end":[{row:j()}],"row-start":[{"row-start":D()}],"row-end":[{"row-end":D()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":C()}],"auto-rows":[{"auto-rows":C()}],gap:[{gap:T()}],"gap-x":[{"gap-x":T()}],"gap-y":[{"gap-y":T()}],"justify-content":[{justify:[...O(),"normal"]}],"justify-items":[{"justify-items":[...ie(),"normal"]}],"justify-self":[{"justify-self":["auto",...ie()]}],"align-content":[{content:["normal",...O()]}],"align-items":[{items:[...ie(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...ie(),{baseline:["","last"]}]}],"place-content":[{"place-content":O()}],"place-items":[{"place-items":[...ie(),"baseline"]}],"place-self":[{"place-self":["auto",...ie()]}],p:[{p:T()}],px:[{px:T()}],py:[{py:T()}],ps:[{ps:T()}],pe:[{pe:T()}],pt:[{pt:T()}],pr:[{pr:T()}],pb:[{pb:T()}],pl:[{pl:T()}],m:[{m:Te()}],mx:[{mx:Te()}],my:[{my:Te()}],ms:[{ms:Te()}],me:[{me:Te()}],mt:[{mt:Te()}],mr:[{mr:Te()}],mb:[{mb:Te()}],ml:[{ml:Te()}],"space-x":[{"space-x":T()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":T()}],"space-y-reverse":["space-y-reverse"],size:[{size:De()}],w:[{w:[h,"screen",...De()]}],"min-w":[{"min-w":[h,"screen","none",...De()]}],"max-w":[{"max-w":[h,"screen","none","prose",{screen:[c]},...De()]}],h:[{h:["screen","lh",...De()]}],"min-h":[{"min-h":["screen","lh","none",...De()]}],"max-h":[{"max-h":["screen","lh",...De()]}],"font-size":[{text:["base",t,il,Ni]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[s,ge,bf]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Sf,me]}],"font-family":[{font:[dP,me,e]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,ge,me]}],"line-clamp":[{"line-clamp":[Le,"none",ge,bf]}],leading:[{leading:[l,...T()]}],"list-image":[{"list-image":["none",ge,me]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",ge,me]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Q()}],"text-color":[{text:Q()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...je(),"wavy"]}],"text-decoration-thickness":[{decoration:[Le,"from-font","auto",ge,Ni]}],"text-decoration-color":[{decoration:Q()}],"underline-offset":[{"underline-offset":[Le,"auto",ge,me]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:T()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",ge,me]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",ge,me]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:we()}],"bg-repeat":[{bg:le()}],"bg-size":[{bg:F()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},Vs,ge,me],radial:["",ge,me],conic:[Vs,ge,me]},fP,cP]}],"bg-color":[{bg:Q()}],"gradient-from-pos":[{from:Z()}],"gradient-via-pos":[{via:Z()}],"gradient-to-pos":[{to:Z()}],"gradient-from":[{from:Q()}],"gradient-via":[{via:Q()}],"gradient-to":[{to:Q()}],rounded:[{rounded:_e()}],"rounded-s":[{"rounded-s":_e()}],"rounded-e":[{"rounded-e":_e()}],"rounded-t":[{"rounded-t":_e()}],"rounded-r":[{"rounded-r":_e()}],"rounded-b":[{"rounded-b":_e()}],"rounded-l":[{"rounded-l":_e()}],"rounded-ss":[{"rounded-ss":_e()}],"rounded-se":[{"rounded-se":_e()}],"rounded-ee":[{"rounded-ee":_e()}],"rounded-es":[{"rounded-es":_e()}],"rounded-tl":[{"rounded-tl":_e()}],"rounded-tr":[{"rounded-tr":_e()}],"rounded-br":[{"rounded-br":_e()}],"rounded-bl":[{"rounded-bl":_e()}],"border-w":[{border:xe()}],"border-w-x":[{"border-x":xe()}],"border-w-y":[{"border-y":xe()}],"border-w-s":[{"border-s":xe()}],"border-w-e":[{"border-e":xe()}],"border-w-t":[{"border-t":xe()}],"border-w-r":[{"border-r":xe()}],"border-w-b":[{"border-b":xe()}],"border-w-l":[{"border-l":xe()}],"divide-x":[{"divide-x":xe()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":xe()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...je(),"hidden","none"]}],"divide-style":[{divide:[...je(),"hidden","none"]}],"border-color":[{border:Q()}],"border-color-x":[{"border-x":Q()}],"border-color-y":[{"border-y":Q()}],"border-color-s":[{"border-s":Q()}],"border-color-e":[{"border-e":Q()}],"border-color-t":[{"border-t":Q()}],"border-color-r":[{"border-r":Q()}],"border-color-b":[{"border-b":Q()}],"border-color-l":[{"border-l":Q()}],"divide-color":[{divide:Q()}],"outline-style":[{outline:[...je(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Le,ge,me]}],"outline-w":[{outline:["",Le,il,Ni]}],"outline-color":[{outline:Q()}],shadow:[{shadow:["","none",w,_c,vc]}],"shadow-color":[{shadow:Q()}],"inset-shadow":[{"inset-shadow":["none",E,_c,vc]}],"inset-shadow-color":[{"inset-shadow":Q()}],"ring-w":[{ring:xe()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Q()}],"ring-offset-w":[{"ring-offset":[Le,Ni]}],"ring-offset-color":[{"ring-offset":Q()}],"inset-ring-w":[{"inset-ring":xe()}],"inset-ring-color":[{"inset-ring":Q()}],"text-shadow":[{"text-shadow":["none",S,_c,vc]}],"text-shadow-color":[{"text-shadow":Q()}],opacity:[{opacity:[Le,ge,me]}],"mix-blend":[{"mix-blend":[...Ve(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Ve()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Le]}],"mask-image-linear-from-pos":[{"mask-linear-from":be()}],"mask-image-linear-to-pos":[{"mask-linear-to":be()}],"mask-image-linear-from-color":[{"mask-linear-from":Q()}],"mask-image-linear-to-color":[{"mask-linear-to":Q()}],"mask-image-t-from-pos":[{"mask-t-from":be()}],"mask-image-t-to-pos":[{"mask-t-to":be()}],"mask-image-t-from-color":[{"mask-t-from":Q()}],"mask-image-t-to-color":[{"mask-t-to":Q()}],"mask-image-r-from-pos":[{"mask-r-from":be()}],"mask-image-r-to-pos":[{"mask-r-to":be()}],"mask-image-r-from-color":[{"mask-r-from":Q()}],"mask-image-r-to-color":[{"mask-r-to":Q()}],"mask-image-b-from-pos":[{"mask-b-from":be()}],"mask-image-b-to-pos":[{"mask-b-to":be()}],"mask-image-b-from-color":[{"mask-b-from":Q()}],"mask-image-b-to-color":[{"mask-b-to":Q()}],"mask-image-l-from-pos":[{"mask-l-from":be()}],"mask-image-l-to-pos":[{"mask-l-to":be()}],"mask-image-l-from-color":[{"mask-l-from":Q()}],"mask-image-l-to-color":[{"mask-l-to":Q()}],"mask-image-x-from-pos":[{"mask-x-from":be()}],"mask-image-x-to-pos":[{"mask-x-to":be()}],"mask-image-x-from-color":[{"mask-x-from":Q()}],"mask-image-x-to-color":[{"mask-x-to":Q()}],"mask-image-y-from-pos":[{"mask-y-from":be()}],"mask-image-y-to-pos":[{"mask-y-to":be()}],"mask-image-y-from-color":[{"mask-y-from":Q()}],"mask-image-y-to-color":[{"mask-y-to":Q()}],"mask-image-radial":[{"mask-radial":[ge,me]}],"mask-image-radial-from-pos":[{"mask-radial-from":be()}],"mask-image-radial-to-pos":[{"mask-radial-to":be()}],"mask-image-radial-from-color":[{"mask-radial-from":Q()}],"mask-image-radial-to-color":[{"mask-radial-to":Q()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ae()}],"mask-image-conic-pos":[{"mask-conic":[Le]}],"mask-image-conic-from-pos":[{"mask-conic-from":be()}],"mask-image-conic-to-pos":[{"mask-conic-to":be()}],"mask-image-conic-from-color":[{"mask-conic-from":Q()}],"mask-image-conic-to-color":[{"mask-conic-to":Q()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:we()}],"mask-repeat":[{mask:le()}],"mask-size":[{mask:F()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",ge,me]}],filter:[{filter:["","none",ge,me]}],blur:[{blur:Oe()}],brightness:[{brightness:[Le,ge,me]}],contrast:[{contrast:[Le,ge,me]}],"drop-shadow":[{"drop-shadow":["","none",N,_c,vc]}],"drop-shadow-color":[{"drop-shadow":Q()}],grayscale:[{grayscale:["",Le,ge,me]}],"hue-rotate":[{"hue-rotate":[Le,ge,me]}],invert:[{invert:["",Le,ge,me]}],saturate:[{saturate:[Le,ge,me]}],sepia:[{sepia:["",Le,ge,me]}],"backdrop-filter":[{"backdrop-filter":["","none",ge,me]}],"backdrop-blur":[{"backdrop-blur":Oe()}],"backdrop-brightness":[{"backdrop-brightness":[Le,ge,me]}],"backdrop-contrast":[{"backdrop-contrast":[Le,ge,me]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Le,ge,me]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Le,ge,me]}],"backdrop-invert":[{"backdrop-invert":["",Le,ge,me]}],"backdrop-opacity":[{"backdrop-opacity":[Le,ge,me]}],"backdrop-saturate":[{"backdrop-saturate":[Le,ge,me]}],"backdrop-sepia":[{"backdrop-sepia":["",Le,ge,me]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":T()}],"border-spacing-x":[{"border-spacing-x":T()}],"border-spacing-y":[{"border-spacing-y":T()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",ge,me]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Le,"initial",ge,me]}],ease:[{ease:["linear","initial",H,ge,me]}],delay:[{delay:[Le,ge,me]}],animate:[{animate:["none",K,ge,me]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[z,ge,me]}],"perspective-origin":[{"perspective-origin":fe()}],rotate:[{rotate:We()}],"rotate-x":[{"rotate-x":We()}],"rotate-y":[{"rotate-y":We()}],"rotate-z":[{"rotate-z":We()}],scale:[{scale:vt()}],"scale-x":[{"scale-x":vt()}],"scale-y":[{"scale-y":vt()}],"scale-z":[{"scale-z":vt()}],"scale-3d":["scale-3d"],skew:[{skew:Yn()}],"skew-x":[{"skew-x":Yn()}],"skew-y":[{"skew-y":Yn()}],transform:[{transform:[ge,me,"","none","gpu","cpu"]}],"transform-origin":[{origin:fe()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:Xn()}],"translate-x":[{"translate-x":Xn()}],"translate-y":[{"translate-y":Xn()}],"translate-z":[{"translate-z":Xn()}],"translate-none":["translate-none"],accent:[{accent:Q()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Q()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",ge,me]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":T()}],"scroll-mx":[{"scroll-mx":T()}],"scroll-my":[{"scroll-my":T()}],"scroll-ms":[{"scroll-ms":T()}],"scroll-me":[{"scroll-me":T()}],"scroll-mt":[{"scroll-mt":T()}],"scroll-mr":[{"scroll-mr":T()}],"scroll-mb":[{"scroll-mb":T()}],"scroll-ml":[{"scroll-ml":T()}],"scroll-p":[{"scroll-p":T()}],"scroll-px":[{"scroll-px":T()}],"scroll-py":[{"scroll-py":T()}],"scroll-ps":[{"scroll-ps":T()}],"scroll-pe":[{"scroll-pe":T()}],"scroll-pt":[{"scroll-pt":T()}],"scroll-pr":[{"scroll-pr":T()}],"scroll-pb":[{"scroll-pb":T()}],"scroll-pl":[{"scroll-pl":T()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",ge,me]}],fill:[{fill:["none",...Q()]}],"stroke-w":[{stroke:[Le,il,Ni,bf]}],stroke:[{stroke:["none",...Q()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},yP=YN(gP);function vP(...n){return yP(_x(n))}const _P=AN("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}});function ht({className:n,variant:e,size:t,asChild:s=!1,...o}){const l=s?TN:"button";return m.jsx(l,{"data-slot":"button",className:vP(_P({variant:e,size:t,className:n})),...o})}function wP({onBack:n,onScore:e,className:t=""}){const[s,o]=R.useState([]),[l,c]=R.useState(!0),[h,p]=R.useState(null),[y,w]=R.useState([]),[E,S]=R.useState(null),[N,U]=R.useState(null),[z,k]=R.useState([]),[H,K]=R.useState(null),[Y,ae]=R.useState(0);R.useEffect(()=>{fe()},[]);const fe=async()=>{try{c(!0),p(null);const D=rs(Zt(Ye,"questions/wordMatch/items"),ri("order","asc")),O=(await qn(D)).docs.map(ie=>({id:ie.id,...ie.data()}));O.length===0?p("    "):(o(O),he(O))}catch(D){console.error("Error loading words:",D),p("  .    ")}finally{c(!1)}},he=D=>{const C=[...D].sort(()=>Math.random()-.5).slice(0,Math.min(6,D.length));w(C),k([]),S(null),U(null),K(null),ae(0)},P=()=>{s.length>0&&he(s)},T=D=>{z.includes(D)||(S(D),N!==null&&V(D,N))},b=D=>{z.includes(D)||(U(D),E!==null&&V(E,D))},V=(D,C)=>{D===C?(k([...z,D]),ae(Y+10),e(10),S(null),U(null)):(K({english:D,arabic:C}),setTimeout(()=>{K(null),S(null),U(null)},1e3))},j=[...y].sort(()=>Math.random()-.5);return l?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border mt-22",children:m.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[m.jsx(Gl,{className:"w-12 h-12 animate-spin text-blue-600"}),m.jsx("p",{className:"text-gray-600",children:"  ..."})]})}):h?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border",children:m.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[m.jsx("div",{className:"text-red-600 text-5xl",children:""}),m.jsx("p",{className:"text-gray-600 text-center",children:h}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ht,{onClick:fe,size:"sm",className:"gap-2",children:[m.jsx(Kr,{className:"w-4 h-4"})," "]}),m.jsxs(ht,{onClick:n,variant:"outline",size:"sm",className:"gap-2",children:["",m.jsx(ts,{className:"w-4 h-4"})]})]})]})}):m.jsx("div",{children:m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs(ht,{onClick:n,variant:"ghost",size:"sm",className:"gap-1 px-2",children:["",m.jsx(ts,{className:"w-4 h-4"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx(ht,{onClick:P,variant:"outline",size:"sm",className:"gap-1 px-2",children:m.jsx(Kr,{className:"w-3.5 h-3.5"})}),m.jsx("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-blue-100 rounded-lg",children:m.jsxs("span",{className:"text-sm text-blue-900",children:[": ",Y]})})]})]}),m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("h2",{className:"text-lg mb-1",children:" "}),m.jsx("p",{className:"text-xs text-gray-600",children:"     "})]}),m.jsxs("div",{className:"space-y-6",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"text-center text-sm text-gray-700",children:"English"}),y.map(D=>m.jsx("button",{onClick:()=>T(D.id),disabled:z.includes(D.id),className:`w-full p-3 rounded-lg border-2 transition-all active:scale-95 ${z.includes(D.id)?"bg-green-100 border-green-500 opacity-50":E===D.id?"bg-blue-100 border-blue-500 scale-105":H?.english===D.id?"bg-red-100 border-red-500 shake":"bg-white border-gray-200"}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[z.includes(D.id)&&m.jsx(Rl,{className:"w-4 h-4 text-green-600"}),H?.english===D.id&&m.jsx(Bi,{className:"w-4 h-4 text-red-600"}),m.jsx("span",{className:"text-sm",children:D.english})]})},`en-${D.id}`))]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("h3",{className:"text-center text-sm text-gray-700",children:""}),j.map(D=>m.jsx("button",{onClick:()=>b(D.id),disabled:z.includes(D.id),className:`w-full p-3 rounded-lg border-2 transition-all active:scale-95 ${z.includes(D.id)?"bg-green-100 border-green-500 opacity-50":N===D.id?"bg-blue-100 border-blue-500 scale-105":H?.arabic===D.id?"bg-red-100 border-red-500 shake":"bg-white border-gray-200"}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[z.includes(D.id)&&m.jsx(Rl,{className:"w-4 h-4 text-green-600"}),H?.arabic===D.id&&m.jsx(Bi,{className:"w-4 h-4 text-red-600"}),m.jsx("span",{className:"text-sm",children:D.arabic})]})},`ar-${D.id}`))]})]}),z.length===y.length&&y.length>0&&m.jsxs("div",{className:"mt-6 text-center p-4 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-300",children:[m.jsx("h3",{className:"text-lg mb-1",children:"! "}),m.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"   !"}),m.jsxs(ht,{onClick:P,size:"sm",className:"gap-2",children:[m.jsx(Kr,{className:"w-3.5 h-3.5"}),"  "]})]})]})})}function xP({onScore:n}){return m.jsxs("div",{className:"mt-10 max-w-6xl mx-auto",children:[m.jsx(wP,{className:"mt-10",onBack:()=>{},onScore:n}),";"]})}function EP({onBack:n,onScore:e}){const[t,s]=R.useState([]),[o,l]=R.useState(!0),[c,h]=R.useState(null),[p,y]=R.useState(0),[w,E]=R.useState(null),[S,N]=R.useState(null),[U,z]=R.useState(0),[k,H]=R.useState(0);R.useEffect(()=>{K()},[]);const K=async()=>{try{l(!0),h(null);const b=rs(Zt(Ye,"questions/fillBlank/items"),ri("order","asc")),j=(await qn(b)).docs.map(D=>({id:D.id,...D.data()}));j.length===0?h("    "):s(j)}catch(b){console.error("Error loading questions:",b),h("  .    ")}finally{l(!1)}},Y=t[p],ae=b=>{E(b);const V=b===Y.blank;N(V),V&&(z(U+10),e(10)),H(k+1)},fe=()=>{p<t.length-1&&(y(p+1),E(null),N(null))},he=()=>{y(0),E(null),N(null),z(0),H(0)},P=()=>{if(!Y)return null;const b=Y.sentence.split("___");return m.jsxs("div",{className:"flex flex-wrap items-center justify-center gap-2 text-xl md:text-2xl",children:[m.jsx("span",{children:b[0]}),m.jsx("span",{className:`px-4 py-2 rounded-lg border-2 border-dashed min-w-[100px] text-center ${w?S?"bg-green-100 border-green-500 text-green-900":"bg-red-100 border-red-500 text-red-900":"bg-blue-50 border-blue-300"}`,children:w||"___"}),m.jsx("span",{children:b[1]})]})},T=k===t.length;return o?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border",children:m.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[m.jsx(Gl,{className:"w-12 h-12 animate-spin text-green-600"}),m.jsx("p",{className:"text-gray-600",children:"  ..."})]})}):c?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border",children:m.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[m.jsx("div",{className:"text-red-600 text-5xl",children:""}),m.jsx("p",{className:"text-gray-600 text-center",children:c}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ht,{onClick:K,size:"sm",className:"gap-2",children:[m.jsx(Kr,{className:"w-4 h-4"})," "]}),m.jsxs(ht,{onClick:n,variant:"outline",size:"sm",className:"gap-2",children:["",m.jsx(ts,{className:"w-4 h-4"})]})]})]})}):m.jsx("div",{children:m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs(ht,{onClick:n,variant:"ghost",size:"sm",className:"gap-1 px-2",children:["",m.jsx(ts,{className:"w-4 h-4"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-100 rounded-lg",children:m.jsx("span",{className:"text-sm text-green-900",children:U})}),m.jsxs("div",{className:"text-xs text-gray-600",children:[p+1,"/",t.length]})]})]}),m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("h2",{className:"text-lg mb-1",children:" "}),m.jsx("p",{className:"text-xs text-gray-600",children:"  "})]}),T?m.jsxs("div",{className:"text-center p-6 bg-gradient-to-r from-green-50 to-emerald-50 rounded-lg border-2 border-green-300",children:[m.jsx("h3",{className:"text-lg mb-1",children:"! "}),m.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"   !"}),m.jsxs("p",{className:"text-base mb-4",children:[": ",U,"/",t.length*10]}),m.jsxs(ht,{onClick:he,size:"sm",className:"gap-2",children:[m.jsx(Kr,{className:"w-4 h-4"}),"  "]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg p-4 mb-4",children:[P(),m.jsx("div",{className:"text-center mt-2 text-xs text-gray-600",children:Y.translation})]}),m.jsx("div",{className:"grid grid-cols-1 gap-2 mb-4",children:Y.options.map((b,V)=>m.jsx("button",{onClick:()=>ae(b),disabled:w!==null,className:`p-3 rounded-lg border-2 transition-all active:scale-95 ${w===b?S?"bg-green-100 border-green-500 scale-105":"bg-red-100 border-red-500":w!==null&&b===Y.blank?"bg-green-100 border-green-500":"bg-white border-gray-200"} ${w!==null?"cursor-not-allowed":"cursor-pointer"}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[w===b&&S&&m.jsx(Rl,{className:"w-4 h-4 text-green-600"}),w===b&&!S&&m.jsx(Bi,{className:"w-4 h-4 text-red-600"}),m.jsx("span",{className:"text-sm",children:b})]})},V))}),w&&m.jsx("div",{className:`p-3 rounded-lg mb-4 ${S?"bg-green-50 border-2 border-green-300":"bg-red-50 border-2 border-red-300"}`,children:m.jsx("p",{className:"text-center text-xs",children:S?"  ! !":`  : ${Y.blank}`})}),w&&p<t.length-1&&m.jsx("div",{className:"text-center",children:m.jsxs(ht,{onClick:fe,size:"sm",className:"gap-2",children:[" ",m.jsx(lm,{className:"w-4 h-4"})]})})]})]})})}function TP({onScore:n}){return m.jsxs("div",{className:"mt-10 max-w-6xl mx-auto",children:[m.jsx(EP,{onBack:()=>{},onScore:n}),";"]})}function IP({onBack:n,onScore:e}){const[t,s]=R.useState([]),[o,l]=R.useState(!0),[c,h]=R.useState(null),[p,y]=R.useState(0),[w,E]=R.useState(null),[S,N]=R.useState(null),[U,z]=R.useState(0),[k,H]=R.useState(0);R.useEffect(()=>{K()},[]);const K=async()=>{try{l(!0),h(null);const T=rs(Zt(Ye,"questions/translation/items"),ri("order","asc")),V=(await qn(T)).docs.map(j=>({id:j.id,...j.data()}));V.length===0?h("    "):s(V)}catch(T){console.error("Error loading questions:",T),h("  .    ")}finally{l(!1)}},Y=t[p],ae=T=>{E(T);const b=T===Y.correct;N(b),b&&(z(U+10),e(10)),H(k+1)},fe=()=>{p<t.length-1&&(y(p+1),E(null),N(null))},he=()=>{y(0),E(null),N(null),z(0),H(0)},P=k===t.length;return o?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border",children:m.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[m.jsx(Gl,{className:"w-12 h-12 animate-spin text-purple-600"}),m.jsx("p",{className:"text-gray-600",children:"  ..."})]})}):c?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border",children:m.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[m.jsx("div",{className:"text-red-600 text-5xl",children:""}),m.jsx("p",{className:"text-gray-600 text-center",children:c}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ht,{onClick:K,size:"sm",className:"gap-2",children:[m.jsx(Kr,{className:"w-4 h-4"})," "]}),m.jsxs(ht,{onClick:n,variant:"outline",size:"sm",className:"gap-2",children:["",m.jsx(ts,{className:"w-4 h-4"})]})]})]})}):m.jsx("div",{children:m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs(ht,{onClick:n,variant:"ghost",size:"sm",className:"gap-1 px-2",children:["",m.jsx(ts,{className:"w-4 h-4"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-purple-100 rounded-lg",children:m.jsx("span",{className:"text-sm text-purple-900",children:U})}),m.jsxs("div",{className:"text-xs text-gray-600",children:[p+1,"/",t.length]})]})]}),m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("h2",{className:"text-lg mb-1",children:" "}),m.jsx("p",{className:"text-xs text-gray-600",children:"  "})]}),P?m.jsxs("div",{className:"text-center p-6 bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg border-2 border-purple-300",children:[m.jsx("h3",{className:"text-lg mb-1",children:"! "}),m.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"   !"}),m.jsxs("p",{className:"text-base mb-4",children:[": ",U,"/",t.length*10]}),m.jsxs(ht,{onClick:he,size:"sm",className:"gap-2",children:[m.jsx(Kr,{className:"w-4 h-4"}),"  "]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-pink-50 rounded-lg p-8 mb-4 text-center",children:[m.jsx("p",{className:"text-xs text-gray-600 mb-2",children:"   "}),m.jsx("h3",{className:"text-3xl",children:Y.word})]}),m.jsx("div",{className:"grid grid-cols-2 gap-2 mb-4",children:Y.options.map((T,b)=>m.jsx("button",{onClick:()=>ae(T),disabled:w!==null,className:`p-3 rounded-lg border-2 transition-all active:scale-95 ${w===T?S?"bg-green-100 border-green-500 scale-105":"bg-red-100 border-red-500":w!==null&&T===Y.correct?"bg-green-100 border-green-500":"bg-white border-gray-200"} ${w!==null?"cursor-not-allowed":"cursor-pointer"}`,children:m.jsxs("div",{className:"flex items-center justify-between",children:[w===T&&S&&m.jsx(Rl,{className:"w-4 h-4 text-green-600"}),w===T&&!S&&m.jsx(Bi,{className:"w-4 h-4 text-red-600"}),m.jsx("span",{className:"text-sm",children:T})]})},b))}),w&&m.jsx("div",{className:`p-3 rounded-lg mb-4 ${S?"bg-green-50 border-2 border-green-300":"bg-red-50 border-2 border-red-300"}`,children:m.jsx("p",{className:"text-center text-xs",children:S?"  ! !":`  : ${Y.correct}`})}),w&&p<t.length-1&&m.jsx("div",{className:"text-center",children:m.jsxs(ht,{onClick:fe,size:"sm",className:"gap-2",children:[" ",m.jsx(lm,{className:"w-4 h-4"})]})})]})]})})}function SP({onScore:n}){return m.jsxs("div",{className:"mt-10 max-w-6xl mx-auto",children:[m.jsx(IP,{onBack:()=>{},onScore:n}),";"]})}function bP({onBack:n,onScore:e}){const[t,s]=R.useState([]),[o,l]=R.useState(!0),[c,h]=R.useState(null),[p,y]=R.useState(0),[w,E]=R.useState(""),[S,N]=R.useState(""),[U,z]=R.useState(!1),[k,H]=R.useState(null),[K,Y]=R.useState(0),[ae,fe]=R.useState(!1),[he,P]=R.useState(0);R.useEffect(()=>{T()},[]);const T=async()=>{try{l(!0),h(null);const ie=rs(Zt(Ye,"questions/letterScramble/items"),ri("order","asc")),De=(await qn(ie)).docs.map(Q=>({id:Q.id,...Q.data()}));De.length===0?h("    "):s(De)}catch(ie){console.error("Error loading questions:",ie),h("  .    ")}finally{l(!1)}},b=t[p];R.useEffect(()=>{b&&V(b.word)},[p,t]);const V=ie=>{const Te=ie.split("");for(let De=Te.length-1;De>0;De--){const Q=Math.floor(Math.random()*(De+1));[Te[De],Te[Q]]=[Te[Q],Te[De]]}E(Te.join(""))},j=()=>{const ie=S.toUpperCase()===b.word;if(H(ie),z(!0),ie){const Te=ae?5:10;Y(K+Te),e(Te)}P(he+1)},D=()=>{p<t.length-1&&(y(p+1),N(""),z(!1),H(null),fe(!1))},C=()=>{y(0),N(""),z(!1),H(null),Y(0),fe(!1),P(0)},O=he===t.length;return o?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border",children:m.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[m.jsx(Gl,{className:"w-12 h-12 animate-spin text-pink-600"}),m.jsx("p",{className:"text-gray-600",children:"  ..."})]})}):c?m.jsx("div",{className:"bg-white rounded-xl shadow-md p-8 border",children:m.jsxs("div",{className:"flex flex-col items-center justify-center gap-4",children:[m.jsx("div",{className:"text-red-600 text-5xl",children:""}),m.jsx("p",{className:"text-gray-600 text-center",children:c}),m.jsxs("div",{className:"flex gap-2",children:[m.jsxs(ht,{onClick:T,size:"sm",className:"gap-2",children:[m.jsx(Kr,{className:"w-4 h-4"})," "]}),m.jsxs(ht,{onClick:n,variant:"outline",size:"sm",className:"gap-2",children:["",m.jsx(ts,{className:"w-4 h-4"})]})]})]})}):m.jsx("div",{children:m.jsxs("div",{className:"bg-white rounded-xl shadow-md p-4 border",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs(ht,{onClick:n,variant:"ghost",size:"sm",className:"gap-1 px-2",children:["",m.jsx(ts,{className:"w-4 h-4"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-pink-100 rounded-lg",children:m.jsx("span",{className:"text-sm text-pink-900",children:K})}),m.jsxs("div",{className:"text-xs text-gray-600",children:[p+1,"/",t.length]})]})]}),m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("h2",{className:"text-lg mb-1",children:" "}),m.jsx("p",{className:"text-xs text-gray-600",children:"   "})]}),O?m.jsxs("div",{className:"text-center p-6 bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg border-2 border-pink-300",children:[m.jsx("h3",{className:"text-lg mb-1",children:"! "}),m.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"   !"}),m.jsxs("p",{className:"text-base mb-4",children:[": ",K,"/",t.length*10]}),m.jsxs(ht,{onClick:C,size:"sm",className:"gap-2",children:[m.jsx(Kr,{className:"w-4 h-4"}),"  "]})]}):m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"bg-gradient-to-r from-pink-50 to-purple-50 rounded-lg p-4 mb-4",children:[m.jsxs("div",{className:"text-center mb-4",children:[m.jsx("p",{className:"text-xs text-gray-600 mb-3",children:"  :"}),m.jsx("div",{className:"flex justify-center gap-1 mb-3 flex-wrap",children:w.split("").map((ie,Te)=>m.jsx("div",{className:"w-10 h-10 bg-white border-2 border-pink-300 rounded-lg flex items-center justify-center text-lg shadow-sm",children:ie},Te))}),m.jsxs("p",{className:"text-xs text-gray-500",children:["(",b.translation,")"]})]}),m.jsx("div",{children:m.jsx("input",{type:"text",value:S,onChange:ie=>N(ie.target.value),disabled:U,placeholder:"  ",className:`w-full px-4 py-2.5 rounded-lg border-2 text-center uppercase ${U?k?"border-green-500 bg-green-50":"border-red-500 bg-red-50":"border-gray-300 focus:border-pink-500 focus:outline-none"}`,onKeyPress:ie=>{ie.key==="Enter"&&!U&&S.trim()&&j()}})})]}),!U&&m.jsxs("div",{className:"flex justify-center gap-2 mb-4",children:[m.jsxs(ht,{onClick:j,disabled:!S.trim(),size:"sm",className:"gap-1.5 flex-1",children:[m.jsx(Rl,{className:"w-3.5 h-3.5"}),""]}),m.jsxs(ht,{onClick:()=>fe(!0),variant:"outline",size:"sm",className:"gap-1.5 flex-1",disabled:ae,children:[m.jsx(WR,{className:"w-3.5 h-3.5"}),""]})]}),ae&&!U&&m.jsx("div",{className:"bg-blue-50 border-2 border-blue-300 rounded-lg p-3 mb-4 text-center",children:m.jsxs("p",{className:"text-xs text-blue-900",children:[" ",b.hint]})}),U&&m.jsx("div",{className:`p-3 rounded-lg mb-4 ${k?"bg-green-50 border-2 border-green-300":"bg-red-50 border-2 border-red-300"}`,children:m.jsx("p",{className:"text-center text-xs",children:k?`  ! +${ae?5:10} `:`  : ${b.word}`})}),U&&p<t.length-1&&m.jsx("div",{className:"text-center",children:m.jsxs(ht,{onClick:D,size:"sm",className:"gap-2",children:[" ",m.jsx(lm,{className:"w-4 h-4"})]})})]})]})})}function kP({onScore:n}){return m.jsxs("div",{className:"mt-10 max-w-6xl mx-auto",children:[m.jsx(bP,{onBack:()=>{},onScore:n}),";"]})}function CP({user:n}){const e=Pl(),t=Qn(),[s,o]=R.useState(!0),l=[{icon:f0,label:" ",path:"/admin"},{icon:Ad,label:" ",path:"/admin/word-match"},{icon:um,label:" ",path:"/admin/fill-blank"},{icon:Zc,label:"",path:"/admin/translation"},{icon:cm,label:" ",path:"/admin/letter-scramble"},{icon:gx,label:"",path:"/admin/users"}],c=h=>h==="/admin"?t.pathname==="/admin":t.pathname.startsWith(h);return m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 to-slate-100",dir:"rtl",children:m.jsxs("div",{className:"flex",children:[m.jsx("aside",{className:`bg-white shadow-lg fixed top-0 bottom-0 right-0 transition-all duration-300 ease-in-out z-40 ${s?"w-64":"w-0"} overflow-hidden`,children:m.jsx("nav",{className:"p-4 space-y-2 mt-[73px]",children:l.map(h=>{const p=h.icon,y=c(h.path);return m.jsxs("button",{onClick:()=>e(h.path),className:`w-full flex items-center gap-3 px-4 py-3 rounded-lg transition-all ${y?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"hover:bg-gray-100 text-gray-700"}`,children:[m.jsx(p,{className:"w-5 h-5 flex-shrink-0"}),m.jsx("span",{className:"font-medium whitespace-nowrap",children:h.label})]},h.path)})})}),m.jsxs("div",{className:`flex-1 transition-all duration-300 ease-in-out ${s?"mr-64":"mr-0"}`,children:[m.jsx("header",{className:"bg-white shadow-lg sticky top-0 z-50",children:m.jsx("div",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("button",{onClick:()=>o(!s),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Toggle sidebar",children:s?m.jsx(Bi,{className:"w-5 h-5 text-gray-700"}):m.jsx(QR,{className:"w-5 h-5 text-gray-700"})}),m.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-purple-600 to-blue-600 rounded-lg flex items-center justify-center",children:m.jsx(f0,{className:"w-6 h-6 text-white"})}),m.jsxs("div",{children:[m.jsx("h1",{className:"text-2xl font-bold text-gray-800",children:" "}),m.jsxs("p",{className:"text-sm text-gray-600",children:[" ",n.email?.split("@")[0]]})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("button",{onClick:()=>e("/"),className:"flex items-center gap-2 px-4 py-2 bg-blue-100 hover:bg-blue-200 rounded-lg transition-colors",children:m.jsx(fx,{className:"w-4 h-4 text-blue-600"})}),m.jsx("button",{onClick:()=>I_(Al),className:"flex items-center gap-2 px-4 py-2 bg-red-100 hover:bg-red-200 rounded-lg transition-colors",children:m.jsx(px,{className:"w-4 h-4 text-red-600"})})]})]})})}),m.jsx("main",{className:"p-6",children:m.jsx(D0,{})})]})]})})}function AP(){const[n,e]=R.useState(null),[t,s]=R.useState({totalQuestions:0,activeGames:0,growthRate:"0",totalUsers:0}),[o,l]=R.useState([{id:"fillblank",title:" ",description:"      ",icon:um,color:"from-green-400 to-green-600",count:"0 ",link:"/admin/fillblank"},{id:"letterscramble",title:" ",description:"     ",icon:cm,color:"from-orange-400 to-orange-600",count:"0 ",link:"/admin/letterscramble"},{id:"translation",title:"",description:"      ",icon:Zc,color:"from-purple-400 to-purple-600",count:"0 ",link:"/admin/translation"},{id:"fillletters",title:" ",description:"       (: H_LL)",icon:uN,color:"from-teal-400 to-cyan-600",count:"0 ",link:"/admin/fillletters"},{id:"wordmatch",title:" ",description:"    ",icon:Zc,color:"from-indigo-400 to-blue-600",count:"0 ",link:"/admin/wordmatch"}]),[c,h]=R.useState(!0);R.useEffect(()=>{(async()=>{try{let w=0,E=0;const S=["questions/fillBlank/items","questions/letterScramble/items","questions/translation/items","questions/fillLetters/items","questions/wordMatch/items"],N=await Promise.all(S.map(async H=>{const K=await qn(rs(Zt(Ye,H)));return{path:H,count:K.size}})),U=o.map(H=>{let K=0;return H.id==="fillblank"&&(K=N.find(Y=>Y.path.includes("fillBlank"))?.count||0),H.id==="letterscramble"&&(K=N.find(Y=>Y.path.includes("letterScramble"))?.count||0),H.id==="translation"&&(K=N.find(Y=>Y.path.includes("translation"))?.count||0),H.id==="fillletters"&&(K=N.find(Y=>Y.path.includes("fillLetters"))?.count||0),H.id==="wordmatch"&&(K=N.find(Y=>Y.path.includes("wordMatch"))?.count||0),K>0&&E++,{...H,count:`${K} ${K>1,""}`}});w=N.reduce((H,K)=>H+K.count,0);const k=(await qn(Zt(Ye,"users"))).size;l(U),s({totalQuestions:w,activeGames:E,growthRate:"0",totalUsers:k})}catch(w){console.error("   :",w)}finally{h(!1)}})()},[]);const p=y=>{window.location.href=y};return c?m.jsx("div",{className:"flex items-center justify-center min-h-screen bg-gray-100",children:m.jsx("div",{className:"text-2xl font-bold text-gray-600",children:"  ..."})}):m.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-8 px-4",children:m.jsxs("div",{className:"w-full max-w-none mx-auto",children:[m.jsxs("div",{className:"mb-12 text-center",children:[m.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full mb-4 shadow-lg",children:m.jsx(If,{size:40,className:"text-white"})}),m.jsx("h1",{className:"text-5xl font-bold text-gray-800 mb-4",children:"  "}),m.jsx("p",{className:"text-gray-600 text-lg max-w-2xl mx-auto",children:"        "})]}),m.jsxs("div",{className:"grid grid-cols-4 gap-6 mb-12",children:[m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 transform hover:scale-105 transition",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{className:"",children:[m.jsx("p",{className:"text-gray-500 text-sm mb-1",children:" "}),m.jsx("p",{className:"text-3xl font-bold text-gray-800",children:t.totalQuestions})]}),m.jsx("div",{className:"bg-blue-500 w-14 h-14 rounded-full flex items-center justify-center",children:m.jsx(Ad,{size:28,className:"text-white"})})]})}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 transform hover:scale-105 transition",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500 text-sm mb-1",children:" "}),m.jsx("p",{className:"text-3xl font-bold text-gray-800",children:t.activeGames})]}),m.jsx("div",{className:"bg-green-500 w-14 h-14 rounded-full flex items-center justify-center",children:m.jsx(If,{size:28,className:"text-white"})})]})}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 transform hover:scale-105 transition",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500 text-sm mb-1",children:" "}),m.jsx("p",{className:"text-3xl font-bold text-green-600",children:t.growthRate})]}),m.jsx("div",{className:"bg-purple-500 w-14 h-14 rounded-full flex items-center justify-center",children:m.jsx(oN,{size:28,className:"text-white"})})]})}),m.jsx("div",{className:"bg-white rounded-2xl shadow-lg p-6 border border-gray-100 transform hover:scale-105 transition",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx("p",{className:"text-gray-500 text-sm mb-1",children:""}),m.jsx("p",{className:"text-3xl font-bold text-gray-800",children:t.totalUsers})]}),m.jsx("div",{className:"bg-orange-500 w-14 h-14 rounded-full flex items-center justify-center",children:m.jsx(gx,{size:28,className:"text-white"})})]})})]}),m.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-12 border",children:[m.jsxs("h2",{className:"text-2xl font-bold text-gray-800 mb-6 flex items-center gap-3",children:[m.jsx(Kl,{className:"text-blue-600",size:28})," "]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:o.map(y=>m.jsxs("button",{onClick:()=>p(y.link),className:"group bg-gradient-to-br from-gray-50 to-white rounded-xl p-6 border-2 border-gray-200 hover:border-blue-400 transition-all hover:shadow-lg text-right",children:[m.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[m.jsx("div",{className:`bg-gradient-to-r ${y.color} w-10 h-10 rounded-lg flex items-center justify-center shadow-md group-hover:scale-110 transition`,children:m.jsx(y.icon,{size:20,className:"text-white"})}),m.jsx("span",{className:"text-sm font-semibold text-gray-600",children:y.count})]}),m.jsxs("h3",{className:"text-lg font-bold text-gray-800 group-hover:text-blue-600",children:["  - ",y.title]})]},y.id))})]}),m.jsxs("div",{className:"mb-12",children:[m.jsxs("h2",{className:"text-3xl font-bold text-gray-800 mb-8 flex items-center gap-3",children:[m.jsx(If,{className:"text-blue-600",size:36})," "]}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-8",children:o.map(y=>m.jsxs("button",{onClick:()=>p(y.link),onMouseEnter:()=>e(y.id),onMouseLeave:()=>e(null),className:"group relative bg-white rounded-2xl shadow-lg overflow-hidden border border-gray-100 transform transition-all hover:scale-105 hover:shadow-2xl text-right",children:[m.jsxs("div",{className:`bg-gradient-to-r ${y.color} p-6 relative overflow-hidden`,children:[m.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-white opacity-10 rounded-full -mr-16 -mt-16"}),m.jsx("div",{className:"absolute bottom-0 left-0 w-24 h-24 bg-white opacity-10 rounded-full -ml-12 -mb-12"}),m.jsxs("div",{className:"relative flex items-center justify-between",children:[m.jsx(y.icon,{size:48,className:"text-white drop-shadow-lg"}),m.jsx("div",{className:"bg-white/20 backdrop-blur-sm px-4 py-2 rounded-full",children:m.jsx("span",{className:"text-white font-bold text-sm",children:y.count})})]})]}),m.jsxs("div",{className:"p-6",children:[m.jsx("h3",{className:"text-2xl font-bold text-gray-800 mb-3 group-hover:text-blue-600",children:y.title}),m.jsx("p",{className:"text-gray-600 text-sm leading-relaxed",children:y.description}),m.jsxs("div",{className:"flex items-center justify-between pt-4 border-t border-gray-100 mt-4",children:[m.jsx("span",{className:"text-sm text-gray-500",children:" "}),m.jsx(ts,{className:`w-6 h-6 text-blue-600 transition-transform ${n===y.id?"translate-x-[-8px]":""}`})]})]}),m.jsx("div",{className:`absolute inset-0 bg-gradient-to-r ${y.color} opacity-0 group-hover:opacity-5 transition-opacity`})]},y.id))})]}),m.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl shadow-xl p-10 text-white text-center",children:[m.jsx("h3",{className:"text-3xl font-bold mb-4",children:" "}),m.jsx("p",{className:"text-blue-50 text-lg max-w-3xl mx-auto leading-relaxed",children:"           "})]})]})})}function Pd({value:n,onChange:e,placeholder:t="...",className:s=""}){return m.jsxs("div",{className:`relative ${s}`,children:[m.jsx("input",{type:"text",placeholder:t,value:n,onChange:o=>e(o.target.value),className:"w-full p-4 pr-33 border-2 border-gray-300 rounded-xl text-lg focus:border-blue-500 outline-none transition"}),n&&m.jsx("button",{onClick:()=>e(""),className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600 transition",children:m.jsx(Bi,{size:20})})]})}function Dd({currentPage:n,totalPages:e,onPageChange:t,className:s=""}){return e<=1?null:m.jsxs("div",{className:`flex justify-center items-center gap-2 ${s}`,children:[m.jsx("button",{onClick:()=>t(Math.max(1,n-1)),disabled:n===1,className:"px-6 py-3 bg-white rounded-xl shadow-md font-bold text-gray-700 hover:bg-gray-100 transition disabled:opacity-50 disabled:cursor-not-allowed",children:""}),m.jsx("div",{className:"flex gap-2",children:Array.from({length:e},(o,l)=>l+1).map(o=>m.jsx("button",{onClick:()=>t(o),className:`w-12 h-12 rounded-xl font-bold transition ${n===o?"bg-gradient-to-r from-blue-500 to-purple-600 text-white shadow-lg":"bg-white text-gray-700 hover:bg-gray-100 shadow-md"}`,children:o},o))}),m.jsx("button",{onClick:()=>t(Math.min(e,n+1)),disabled:n===e,className:"px-6 py-3 bg-white rounded-xl shadow-md font-bold text-gray-700 hover:bg-gray-100 transition disabled:opacity-50 disabled:cursor-not-allowed",children:""})]})}function jd({items:n,itemsPerPage:e=10,searchTerm:t="",searchFields:s=[]}){const[o,l]=R.useState(1),c=R.useMemo(()=>!t||s.length===0?n:n.filter(E=>s.some(S=>{const N=E[S];return typeof N=="string"?N.toLowerCase().includes(t.toLowerCase()):!1})),[n,t,s]),h=Math.ceil(c.length/e),p=(o-1)*e,y=p+e,w=c.slice(p,y);return R.useEffect(()=>{l(1)},[t]),{currentItems:w,filteredItems:c,currentPage:o,totalPages:h,startIndex:p,setCurrentPage:l}}function RP(){const[n,e]=R.useState([]),[t,s]=R.useState(!0),[o,l]=R.useState(""),[c,h]=R.useState(!1),[p,y]=R.useState(!1),[w,E]=R.useState(!1),[S,N]=R.useState(""),[U,z]=R.useState(""),[k,H]=R.useState({english:"",arabic:"",order:1}),{currentItems:K,filteredItems:Y,currentPage:ae,totalPages:fe,startIndex:he,setCurrentPage:P}=jd({items:n,itemsPerPage:10,searchTerm:o,searchFields:["english","arabic"]});R.useEffect(()=>{T()},[]);const T=async()=>{try{const O=rs(Zt(Ye,"questions/wordMatch/items"),ri("order","asc")),ie=await qn(O);e(ie.docs.map(Te=>({id:Te.id,...Te.data()})))}catch{alert("  ")}finally{s(!1)}},b=()=>{H({english:"",arabic:"",order:n.length+1}),E(!1),N(""),h(!0)},V=O=>{H({english:O.english,arabic:O.arabic,order:O.order}),E(!0),N(O.id),h(!0)},j=O=>{z(O),y(!0)},D=async()=>{if(!k.english.trim()||!k.arabic.trim())return alert(" ");try{w&&S?await ql(cn(Ye,"questions/wordMatch/items",S),k):await kd(Zt(Ye,"questions/wordMatch/items"),{...k,order:k.order||n.length+1}),h(!1),T()}catch{alert(" ")}},C=async()=>{try{await bd(cn(Ye,"questions/wordMatch/items",U)),y(!1),T()}catch{alert(" ")}};return t?m.jsx("div",{className:"flex justify-center items-center h-screen text-2xl",children:" ..."}):m.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:[m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"rounded-2xl shadow-xl p-8 mb-8 bg-white",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"  "}),m.jsxs("p",{className:"text-gray-600 mt-2 text-lg",children:[" : ",n.length,o&&` ( : ${Y.length})`]})]}),m.jsxs("button",{onClick:b,className:"px-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold text-[15px] py-2 rounded-xl hover:opacity-90 transition flex items-center justify-center gap-3",children:[m.jsx(Kl,{size:28}),"  "]})]}),m.jsx(Pd,{value:o,onChange:l,placeholder:"     ..."})]}),m.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:"#"}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:" "}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:" "}),m.jsx("th",{className:"px-6 py-4 text-center font-bold text-gray-700",children:""})]})}),m.jsx("tbody",{children:K.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:4,className:"text-center py-16 text-gray-500 text-xl",children:o?"   ":"   "})}):K.map((O,ie)=>m.jsxs("tr",{className:"border-t hover:bg-gray-50 transition",children:[m.jsx("td",{className:"px-6 py-4 text-center font-medium",children:O.order||he+ie+1}),m.jsx("td",{className:"px-6 py-4 font-bold text-lg",children:O.english}),m.jsx("td",{className:"px-6 py-4 font-bold text-blue-600 text-lg",children:O.arabic}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{onClick:()=>V(O),className:"p-3 bg-blue-100 hover:bg-blue-200 rounded-xl transition",children:m.jsx(Rd,{size:22,className:"text-blue-600"})}),m.jsx("button",{onClick:()=>j(O.id),className:"p-3 bg-red-100 hover:bg-red-200 rounded-xl transition",children:m.jsx(Nd,{size:22,className:"text-red-600"})})]})})]},O.id))})]})}),m.jsx(Dd,{currentPage:ae,totalPages:fe,onPageChange:P,className:"mt-8"})]}),c&&m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>h(!1),children:m.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"20px",width:"90%",maxWidth:"500px",position:"relative"},onClick:O=>O.stopPropagation(),children:[m.jsx("button",{onClick:()=>h(!1),style:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",fontSize:"32px",cursor:"pointer"},children:""}),m.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",children:w?" ":"  "}),m.jsx("input",{placeholder:" ",value:k.english,onChange:O=>H({...k,english:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg mb-4 focus:border-blue-500 outline-none",autoFocus:!0}),m.jsx("input",{placeholder:" ",value:k.arabic,onChange:O=>H({...k,arabic:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg mb-4 focus:border-blue-500 outline-none"}),m.jsx("input",{type:"number",placeholder:"",value:k.order,onChange:O=>H({...k,order:+O.target.value||1}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg mb-8 focus:border-blue-500 outline-none"}),m.jsxs("div",{className:"flex items-center justify-center gap-4 mt-8 pt-8",children:[m.jsx("button",{onClick:D,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 rounded-xl font-bold text-xl hover:opacity-90 transition",children:w?" ":" "}),m.jsx("button",{onClick:()=>h(!1),className:"flex-1 bg-gray-300 py-4 rounded-xl font-bold text-xl hover:bg-gray-400 transition",children:""})]})]})}),p&&m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>y(!1),children:m.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"20px",width:"90%",maxWidth:"400px",textAlign:"center"},onClick:O=>O.stopPropagation(),children:[m.jsx("div",{className:"text-red-600 text-6xl mb-6",children:""}),m.jsx("h3",{className:"text-2xl font-bold mb-4",children:" "}),m.jsxs("p",{className:"text-gray-600 mb-8 text-lg",children:["       ",m.jsx("br",{}),"     ."]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:C,className:"flex-1 bg-red-600 text-white py-4 rounded-xl font-bold text-xl hover:bg-red-700 transition",children:" "}),m.jsx("button",{onClick:()=>y(!1),className:"flex-1 bg-gray-300 py-4 rounded-xl font-bold text-xl hover:bg-gray-400 transition",children:""})]})]})})]})}function NP(){const[n,e]=R.useState([]),[t,s]=R.useState(!0),[o,l]=R.useState(""),[c,h]=R.useState(!1),[p,y]=R.useState(!1),[w,E]=R.useState(!1),[S,N]=R.useState(""),[U,z]=R.useState(""),[k,H]=R.useState({word:"",hint:"",translation:"",order:1}),{currentItems:K,filteredItems:Y,currentPage:ae,totalPages:fe,startIndex:he,setCurrentPage:P}=jd({items:n,itemsPerPage:10,searchTerm:o,searchFields:["word","hint","translation"]});R.useEffect(()=>{T()},[]);const T=async()=>{try{const O=rs(Zt(Ye,"questions/letterScramble/items"),ri("order","asc")),ie=await qn(O);e(ie.docs.map(Te=>({id:Te.id,...Te.data()})))}catch{alert("  ")}finally{s(!1)}},b=()=>{H({word:"",hint:"",translation:"",order:n.length+1}),E(!1),N(""),h(!0)},V=O=>{H({word:O.word,hint:O.hint,translation:O.translation,order:O.order}),E(!0),N(O.id),h(!0)},j=O=>{z(O),y(!0)},D=async()=>{if(!k.word.trim()||!k.hint.trim()||!k.translation.trim())return alert("   ");try{w&&S?await ql(cn(Ye,"questions/letterScramble/items",S),{word:k.word.toUpperCase().trim(),hint:k.hint.trim(),translation:k.translation.trim(),order:k.order}):await kd(Zt(Ye,"questions/letterScramble/items"),{word:k.word.toUpperCase().trim(),hint:k.hint.trim(),translation:k.translation.trim(),order:k.order||n.length+1}),h(!1),T()}catch{alert("   ")}},C=async()=>{try{await bd(cn(Ye,"questions/letterScramble/items",U)),y(!1),T()}catch{alert(" ")}};return t?m.jsx("div",{className:"flex justify-center items-center h-screen text-2xl",children:" ..."}):m.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:[m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"rounded-2xl shadow-xl p-8 mb-8 bg-white",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"   "}),m.jsxs("p",{className:"text-gray-600 mt-2 text-lg",children:[" : ",n.length,o&&` ( : ${Y.length})`]})]}),m.jsxs("button",{onClick:b,className:"px-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold text-[15px] py-2 rounded-xl hover:opacity-90 transition flex items-center justify-center gap-3",children:[m.jsx(Kl,{size:28}),"  "]})]}),m.jsx(Pd,{value:o,onChange:l,placeholder:"      ..."})]}),m.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-orange-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:"#"}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),m.jsx("th",{className:"px-6 py-4 text-center font-bold text-gray-700",children:""})]})}),m.jsx("tbody",{children:K.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"text-center py-16 text-gray-500 text-xl",children:o?"   ":"   "})}):K.map((O,ie)=>m.jsxs("tr",{className:"border-t hover:bg-orange-50 transition",children:[m.jsx("td",{className:"px-6 py-4 text-center font-medium",children:O.order||he+ie+1}),m.jsx("td",{className:"px-6 py-4 font-bold text-lg text-orange-600",children:O.word}),m.jsx("td",{className:"px-6 py-4 text-gray-700",children:O.hint}),m.jsx("td",{className:"px-6 py-4 text-blue-600 font-medium",children:O.translation}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{onClick:()=>V(O),className:"p-3 bg-blue-100 hover:bg-blue-200 rounded-xl transition",children:m.jsx(Rd,{size:22,className:"text-blue-600"})}),m.jsx("button",{onClick:()=>j(O.id),className:"p-3 bg-red-100 hover:bg-red-200 rounded-xl transition",children:m.jsx(Nd,{size:22,className:"text-red-600"})})]})})]},O.id))})]})}),m.jsx(Dd,{currentPage:ae,totalPages:fe,onPageChange:P,className:"mt-8"})]}),c&&m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>h(!1),children:m.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"20px",width:"90%",maxWidth:"600px",position:"relative"},onClick:O=>O.stopPropagation(),children:[m.jsx("button",{onClick:()=>h(!1),style:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",fontSize:"32px",cursor:"pointer"},children:""}),m.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",children:w?" ":"  "}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsx("input",{placeholder:"  (   )",value:k.word,onChange:O=>H({...k,word:O.target.value.toUpperCase()}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-orange-500 outline-none",autoFocus:!0}),m.jsx("input",{placeholder:" ",value:k.translation,onChange:O=>H({...k,translation:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-orange-500 outline-none"})]}),m.jsx("textarea",{placeholder:" (:    )",value:k.hint,onChange:O=>H({...k,hint:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg mt-6 focus:border-orange-500 outline-none resize-none h-32"}),m.jsx("input",{type:"number",placeholder:"",value:k.order,onChange:O=>H({...k,order:+O.target.value||1}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg mt-6 focus:border-orange-500 outline-none"}),m.jsxs("div",{className:"flex gap-4 mt-8",children:[m.jsx("button",{onClick:D,className:"flex-1 bg-gradient-to-r from-orange-500 to-red-600 text-white py-4 rounded-xl font-bold text-xl hover:opacity-90 transition",children:w?" ":" "}),m.jsx("button",{onClick:()=>h(!1),className:"flex-1 bg-gray-300 py-4 rounded-xl font-bold text-xl hover:bg-gray-400 transition",children:""})]})]})}),p&&m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>y(!1),children:m.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"20px",width:"90%",maxWidth:"400px",textAlign:"center"},onClick:O=>O.stopPropagation(),children:[m.jsx("div",{className:"text-red-600 text-6xl mb-6",children:""}),m.jsx("h3",{className:"text-2xl font-bold mb-4",children:" "}),m.jsxs("p",{className:"text-gray-600 mb-8 text-lg",children:["       ",m.jsx("br",{}),"     ."]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:C,className:"flex-1 bg-red-600 text-white py-4 rounded-xl font-bold text-xl hover:bg-red-700 transition",children:" "}),m.jsx("button",{onClick:()=>y(!1),className:"flex-1 bg-gray-300 py-4 rounded-xl font-bold text-xl hover:bg-gray-400 transition",children:""})]})]})})]})}function PP(){const[n,e]=R.useState([]),[t,s]=R.useState(!0),[o,l]=R.useState(""),[c,h]=R.useState(!1),[p,y]=R.useState(!1),[w,E]=R.useState(!1),[S,N]=R.useState(""),[U,z]=R.useState(""),[k,H]=R.useState({word:"",correct:"",option1:"",option2:"",option3:"",order:1}),{currentItems:K,filteredItems:Y,currentPage:ae,totalPages:fe,startIndex:he,setCurrentPage:P}=jd({items:n,itemsPerPage:10,searchTerm:o,searchFields:["word","correct","options"]});R.useEffect(()=>{T()},[]);const T=async()=>{try{const O=rs(Zt(Ye,"questions/translation/items"),ri("order","asc")),ie=await qn(O);e(ie.docs.map(Te=>({id:Te.id,...Te.data()})))}catch{alert("  ")}finally{s(!1)}},b=()=>{H({word:"",correct:"",option1:"",option2:"",option3:"",order:n.length+1}),E(!1),N(""),h(!0)},V=O=>{const ie=O.options||[];H({word:O.word,correct:O.correct,option1:ie[0]||"",option2:ie[1]||"",option3:ie[2]||"",order:O.order}),E(!0),N(O.id),h(!0)},j=O=>{z(O),y(!0)},D=async()=>{if(!k.word.trim()||!k.correct.trim()||!k.option1.trim()||!k.option2.trim()||!k.option3.trim())return alert("    ( +   +  )");const ie=[k.option1.trim(),k.option2.trim(),k.option3.trim(),k.correct.trim()].sort(()=>Math.random()-.5);try{w&&S?await ql(cn(Ye,"questions/translation/items",S),{word:k.word.trim(),correct:k.correct.trim(),options:ie,order:k.order}):await kd(Zt(Ye,"questions/translation/items"),{word:k.word.trim(),correct:k.correct.trim(),options:ie,order:k.order||n.length+1}),h(!1),T()}catch{alert("   ")}},C=async()=>{try{await bd(cn(Ye,"questions/translation/items",U)),y(!1),T()}catch{alert(" ")}};return t?m.jsx("div",{className:"flex justify-center items-center h-screen text-2xl",children:" ..."}):m.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:[m.jsxs("div",{className:"max-w-6xl mx-auto",children:[m.jsxs("div",{className:"rounded-2xl shadow-xl p-8 mb-8 bg-white",children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"  "}),m.jsxs("p",{className:"text-gray-600 mt-2 text-lg",children:[" : ",n.length,o&&` ( : ${Y.length})`]})]}),m.jsxs("button",{onClick:b,className:"px-6 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold text-[15px] py-2 rounded-xl hover:opacity-90 transition flex items-center justify-center gap-3",children:[m.jsx(Kl,{size:28}),"  "]})]}),m.jsx(Pd,{value:o,onChange:l,placeholder:"     ..."})]}),m.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-purple-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:"#"}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:" "}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),m.jsx("th",{className:"px-6 py-4 text-center font-bold text-gray-700",children:""})]})}),m.jsx("tbody",{children:K.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:5,className:"text-center py-16 text-gray-500 text-xl",children:o?"   ":"   "})}):K.map((O,ie)=>m.jsxs("tr",{className:"border-t hover:bg-purple-50 transition",children:[m.jsx("td",{className:"px-6 py-4 text-center font-medium",children:O.order||he+ie+1}),m.jsx("td",{className:"px-6 py-4 font-bold text-lg text-purple-700",children:O.word}),m.jsx("td",{className:"px-6 py-4 text-green-600 font-bold",children:O.correct}),m.jsx("td",{className:" ACL px-6 py-4 text-sm leading-relaxed",children:O.options.join(" | ")}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{onClick:()=>V(O),className:"p-3 bg-blue-100 hover:bg-blue-200 rounded-xl transition",children:m.jsx(Rd,{size:22,className:"text-blue-600"})}),m.jsx("button",{onClick:()=>j(O.id),className:"p-3 bg-red-100 hover:bg-red-200 rounded-xl transition",children:m.jsx(Nd,{size:22,className:"text-red-600"})})]})})]},O.id))})]})}),m.jsx(Dd,{currentPage:ae,totalPages:fe,onPageChange:P,className:"mt-8"})]}),c&&m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>h(!1),children:m.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"20px",width:"90%",maxWidth:"700px",position:"relative"},onClick:O=>O.stopPropagation(),children:[m.jsx("button",{onClick:()=>h(!1),style:{position:"absolute",top:"16px",right:"16px",background:"none",border:"none",fontSize:"32px",cursor:"pointer"},children:""}),m.jsx("h2",{className:"text-3xl font-bold mb-8 text-center",children:w?" ":"  "}),m.jsx("input",{placeholder:" ",value:k.word,onChange:O=>H({...k,word:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg mb-4 focus:border-purple-500 outline-none",autoFocus:!0}),m.jsx("input",{placeholder:"  ()",value:k.correct,onChange:O=>H({...k,correct:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg mb-4 focus:border-purple-500 outline-none"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[m.jsx("input",{placeholder:" 1 ()",value:k.option1,onChange:O=>H({...k,option1:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-purple-500 outline-none"}),m.jsx("input",{placeholder:" 2 ()",value:k.option2,onChange:O=>H({...k,option2:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-purple-500 outline-none"}),m.jsx("input",{placeholder:" 3 ()",value:k.option3,onChange:O=>H({...k,option3:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-purple-500 outline-none"})]}),m.jsx("input",{type:"number",placeholder:"",value:k.order,onChange:O=>H({...k,order:+O.target.value||1}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg mb-8 focus:border-purple-500 outline-none"}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:D,className:"flex-1 bg-gradient-to-r from-purple-600 to-indigo-700 text-white py-4 rounded-xl font-bold text-xl hover:opacity-90 transition",children:w?" ":" "}),m.jsx("button",{onClick:()=>h(!1),className:"flex-1 bg-gray-300 py-4 rounded-xl font-bold text-xl hover:bg-gray-400 transition",children:""})]})]})}),p&&m.jsx("div",{style:{position:"fixed",inset:0,background:"rgba(0,0,0,0.7)",display:"flex",alignItems:"center",justifyContent:"center",zIndex:9999},onClick:()=>y(!1),children:m.jsxs("div",{style:{background:"white",padding:"40px",borderRadius:"20px",width:"90%",maxWidth:"400px",textAlign:"center"},onClick:O=>O.stopPropagation(),children:[m.jsx("div",{className:"text-red-600 text-6xl mb-6",children:""}),m.jsx("h3",{className:"text-2xl font-bold mb-4",children:" "}),m.jsxs("p",{className:"text-gray-600 mb-8 text-lg",children:["       ",m.jsx("br",{}),"     ."]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:C,className:"flex-1 bg-red-600 text-white py-4 rounded-xl font-bold text-xl hover:bg-red-700 transition",children:" "}),m.jsx("button",{onClick:()=>y(!1),className:"flex-1 bg-gray-300 py-4 rounded-xl font-bold text-xl hover:bg-gray-400 transition",children:""})]})]})})]})}function DP(){const[n,e]=R.useState([]),[t,s]=R.useState(!0),[o,l]=R.useState(""),[c,h]=R.useState(!1),[p,y]=R.useState(!1),[w,E]=R.useState(!1),[S,N]=R.useState(""),[U,z]=R.useState(""),[k,H]=R.useState({sentence:"",blank:"",option1:"",option2:"",option3:"",translation:"",order:1}),{currentItems:K,filteredItems:Y,currentPage:ae,totalPages:fe,startIndex:he,setCurrentPage:P}=jd({items:n,itemsPerPage:10,searchTerm:o,searchFields:["sentence","blank","translation","options"]});R.useEffect(()=>{T()},[]);const T=async()=>{try{const O=rs(Zt(Ye,"questions/fillBlank/items"),ri("order","asc")),ie=await qn(O);e(ie.docs.map(Te=>({id:Te.id,...Te.data()})))}catch{alert("  ")}finally{s(!1)}},b=()=>{H({sentence:"",blank:"",option1:"",option2:"",option3:"",translation:"",order:n.length+1}),E(!1),N(""),h(!0)},V=O=>{const ie=O.options||[];H({sentence:O.sentence,blank:O.blank,option1:ie[0]||"",option2:ie[1]||"",option3:ie[2]||"",translation:O.translation,order:O.order}),E(!0),N(O.id),h(!0)},j=O=>{z(O),y(!0)},D=async()=>{if(!k.sentence.includes("___")||!k.blank.trim()||!k.translation.trim())return alert("   ___     ");const O=[k.option1,k.option2,k.option3].filter(Boolean);O.push(k.blank);const ie=O.sort(()=>Math.random()-.5);try{w&&S?await ql(cn(Ye,"questions/fillBlank/items",S),{sentence:k.sentence.trim(),blank:k.blank.trim(),options:ie,translation:k.translation.trim(),order:k.order}):await kd(Zt(Ye,"questions/fillBlank/items"),{sentence:k.sentence.trim(),blank:k.blank.trim(),options:ie,translation:k.translation.trim(),order:k.order||n.length+1}),h(!1),T()}catch{alert("   ")}},C=async()=>{try{await bd(cn(Ye,"questions/fillBlank/items",U)),y(!1),T()}catch{alert(" ")}};return t?m.jsx("div",{className:"flex items-center justify-center h-screen text-2xl text-gray-600",children:" ..."}):m.jsxs("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:[m.jsxs("div",{className:"max-w-7xl mx-auto",children:[m.jsxs("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[m.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-6 mb-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-4xl font-bold text-gray-800",children:"   "}),m.jsxs("p",{className:"text-gray-600 mt-2 text-lg",children:[" : ",m.jsx("span",{className:"font-bold",children:n.length}),o&&m.jsxs("span",{className:"mr-2 text-green-600",children:["( : ",Y.length,")"]})]})]}),m.jsxs("button",{onClick:b,className:"flex items-center gap-3 px-6 py-3 bg-gradient-to-r from-blue-500 to-purple-600 text-white font-bold rounded-xl hover:opacity-90 transition shadow-lg",children:[m.jsx(Kl,{size:28}),"  "]})]}),m.jsx(Pd,{value:o,onChange:l,placeholder:"     ..."})]}),m.jsx("div",{className:"bg-white rounded-2xl shadow-xl overflow-hidden",children:m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"w-full",children:[m.jsx("thead",{className:"bg-green-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:"#"}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:" "}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),m.jsx("th",{className:"px-6 py-4 text-right font-bold text-gray-700",children:""}),m.jsx("th",{className:"px-6 py-4 text-center font-bold text-gray-700",children:""})]})}),m.jsx("tbody",{children:K.length===0?m.jsx("tr",{children:m.jsx("td",{colSpan:6,className:"text-center py-20 text-gray-500 text-xl font-medium",children:o?"   ":"   "})}):K.map((O,ie)=>m.jsxs("tr",{className:"border-t hover:bg-green-50 transition",children:[m.jsx("td",{className:"px-6 py-4 text-center font-medium",children:O.order||he+ie+1}),m.jsx("td",{className:"px-6 py-4 text-gray-800",children:O.sentence.replace("___","___")}),m.jsx("td",{className:"px-6 py-4 font-bold text-green-600",children:O.blank}),m.jsx("td",{className:"px-6 py-4 text-sm text-gray-700",children:O.options.join(" | ")}),m.jsx("td",{className:"px-6 py-4 text-blue-600",children:O.translation}),m.jsx("td",{className:"px-6 py-4",children:m.jsxs("div",{className:"flex justify-center gap-3",children:[m.jsx("button",{onClick:()=>V(O),className:"p-3 bg-blue-100 hover:bg-blue-200 rounded-xl transition",children:m.jsx(Rd,{size:22,className:"text-blue-600"})}),m.jsx("button",{onClick:()=>j(O.id),className:"p-3 bg-red-100 hover:bg-red-200 rounded-xl transition",children:m.jsx(Nd,{size:22,className:"text-red-600"})})]})})]},O.id))})]})})}),m.jsx(Dd,{currentPage:ae,totalPages:fe,onPageChange:P,className:"mt-8"})]}),c&&m.jsx("div",{className:"fixed inset-0  flex items-center justify-center z-50 p-4",style:{background:"rgba(0,0,0,0.7)"},children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-2xl max-h-screen overflow-y-auto",onClick:O=>O.stopPropagation(),children:[m.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 p-6 flex justify-between items-center",children:[m.jsx("h2",{className:"text-3xl font-bold text-gray-800",children:w?" ":"  "}),m.jsx("button",{onClick:()=>h(!1),className:"text-gray-500 hover:text-gray-700 text-3xl",children:m.jsx(Bi,{size:32})})]}),m.jsxs("div",{className:"p-6 space-y-5",children:[m.jsx("textarea",{placeholder:" ( ___   )",value:k.sentence,onChange:O=>H({...k,sentence:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 outline-none resize-none h-32",autoFocus:!0}),m.jsx("input",{placeholder:" ",value:k.blank,onChange:O=>H({...k,blank:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 outline-none"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[m.jsx("input",{placeholder:" 1",value:k.option1,onChange:O=>H({...k,option1:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 outline-none"}),m.jsx("input",{placeholder:" 2",value:k.option2,onChange:O=>H({...k,option2:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 outline-none"}),m.jsx("input",{placeholder:" 3 ()",value:k.option3,onChange:O=>H({...k,option3:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 outline-none"})]}),m.jsx("input",{placeholder:"  ",value:k.translation,onChange:O=>H({...k,translation:O.target.value}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 outline-none"}),m.jsx("input",{type:"number",placeholder:"",value:k.order,onChange:O=>H({...k,order:+O.target.value||1}),className:"w-full p-4 border-2 border-gray-300 rounded-xl text-lg focus:border-green-500 outline-none"})]}),m.jsxs("div",{className:"sticky bottom-0 bg-white border-t border-gray-200 p-6 flex gap-4",children:[m.jsx("button",{onClick:D,className:"flex-1 bg-gradient-to-r from-blue-500 to-purple-600 text-white py-4 rounded-xl font-bold text-xl hover:opacity-90 transition shadow-lg",children:w?" ":" "}),m.jsx("button",{onClick:()=>h(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-4 rounded-xl font-bold text-xl transition",children:""})]})]})}),p&&m.jsx("div",{className:"fixed inset-0  flex items-center justify-center z-50 p-4",style:{background:"rgba(0,0,0,0.7)"},children:m.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full text-center",onClick:O=>O.stopPropagation(),children:[m.jsx("div",{className:"text-red-600 text-7xl mb-4",children:""}),m.jsx("h3",{className:"text-2xl font-bold mb-4",children:" "}),m.jsxs("p",{className:"text-gray-600 mb-8 text-lg",children:["       ",m.jsx("br",{}),"     ."]}),m.jsxs("div",{className:"flex gap-4",children:[m.jsx("button",{onClick:C,className:"flex-1 bg-red-600 hover:bg-red-700 text-white py-4 rounded-xl font-bold text-xl transition",children:" "}),m.jsx("button",{onClick:()=>y(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-4 rounded-xl font-bold text-xl transition",children:""})]})]})})]})}function jP(){const[n,e]=R.useState([]),[t,s]=R.useState(!0);return R.useEffect(()=>{(async()=>{try{const c=(await qn(Zt(Ye,"users"))).docs.map(h=>({email:h.data().email,createdAt:h.data().createdAt?.toDate?h.data().createdAt.toDate():h.data().createdAt}));e(c)}catch(l){console.error("   :",l)}finally{s(!1)}})()},[]),t?m.jsx("p",{children:"  ..."}):m.jsx("div",{className:"overflow-x-auto",children:m.jsxs("table",{className:"min-w-full border border-gray-300",children:[m.jsx("thead",{className:"bg-gray-100",children:m.jsxs("tr",{children:[m.jsx("th",{className:"px-4 py-2 border",children:"Email"}),m.jsx("th",{className:"px-4 py-2 border",children:"Created At"})]})}),m.jsx("tbody",{children:n.map((o,l)=>m.jsxs("tr",{className:"text-center",children:[m.jsx("td",{className:"px-4 py-2 border",children:o.email}),m.jsx("td",{className:"px-4 py-2 border",children:new Date(o.createdAt).toLocaleString()})]},l))})]})})}function VP(){const[n,e]=R.useState(null),[t,s]=R.useState(!0),[o,l]=R.useState(!1),[c,h]=R.useState(!0),[p,y]=R.useState({wordMatch:0,fillBlank:0,translation:0,letterScramble:0}),w=({children:N})=>o?N:m.jsx(jy,{to:"/",replace:!0});R.useEffect(()=>ab(Al,U=>{e(U),s(!1)}),[]),R.useEffect(()=>{if(!n)return;h(!0);const N=cn(Ye,"admins",n.uid);CR(N).then(U=>{l(U.exists()&&U.data()?.role==="admin"),h(!1)})},[n]),R.useEffect(()=>{if(!n)return;const N=cn(Ye,"scores",n.uid);return AR(N,z=>{z.exists()?y(z.data()):(np(N,{wordMatch:0,fillBlank:0,translation:0,letterScramble:0}),y({wordMatch:0,fillBlank:0,translation:0,letterScramble:0}))})},[n]);const E=async(N,U)=>{if(!n)return;const z=p[N]+U;y(k=>({...k,[N]:z})),await ql(cn(Ye,"scores",n.uid),{[N]:z})},S=Object.values(p).reduce((N,U)=>N+U,0);return t||c?m.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-purple-50",children:m.jsx("div",{className:"animate-spin w-16 h-16 border-8 border-purple-600 rounded-full border-t-transparent"})}):n?m.jsxs(B1,{children:[m.jsxs(Jt,{element:m.jsx(fN,{user:n,totalScore:S,isAdmin:o}),children:[m.jsx(Jt,{path:"/",element:m.jsx(vN,{scores:p})}),m.jsx(Jt,{path:"/word-match",element:m.jsx(xP,{onScore:N=>E("wordMatch",N)})}),m.jsx(Jt,{path:"/fill-blank",element:m.jsx(TP,{onScore:N=>E("fillBlank",N)})}),m.jsx(Jt,{path:"/translation",element:m.jsx(SP,{onScore:N=>E("translation",N)})}),m.jsx(Jt,{path:"/letter-scramble",element:m.jsx(kP,{onScore:N=>E("letterScramble",N)})})]}),m.jsxs(Jt,{path:"/admin",element:m.jsx(w,{children:m.jsx(CP,{user:n})}),children:[m.jsx(Jt,{index:!0,element:m.jsx(AP,{})}),m.jsx(Jt,{path:"word-match",element:m.jsx(RP,{})}),m.jsx(Jt,{path:"fill-blank",element:m.jsx(DP,{})}),m.jsx(Jt,{path:"translation",element:m.jsx(PP,{})}),m.jsx(Jt,{path:"letter-scramble",element:m.jsx(NP,{})}),m.jsx(Jt,{path:"users",element:m.jsx(jP,{})})]}),m.jsx(Jt,{path:"*",element:m.jsx(jy,{to:"/",replace:!0})})]}):m.jsx(mN,{})}QE.createRoot(document.getElementById("root")).render(m.jsx(T0.StrictMode,{children:m.jsx(dT,{children:m.jsx(VP,{})})}));
